/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@finos/fdc3/dist/fdc3.esm.js":
/*!*******************************************************!*\
  !*** ../../node_modules/@finos/fdc3/dist/fdc3.esm.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChannelError": () => (/* binding */ ChannelError),
/* harmony export */   "ContextTypes": () => (/* binding */ ContextTypes),
/* harmony export */   "Convert": () => (/* binding */ Convert),
/* harmony export */   "Intents": () => (/* binding */ Intents),
/* harmony export */   "OpenError": () => (/* binding */ OpenError),
/* harmony export */   "ResolveError": () => (/* binding */ ResolveError),
/* harmony export */   "addContextListener": () => (/* binding */ addContextListener),
/* harmony export */   "addIntentListener": () => (/* binding */ addIntentListener),
/* harmony export */   "broadcast": () => (/* binding */ broadcast),
/* harmony export */   "compareVersionNumbers": () => (/* binding */ compareVersionNumbers),
/* harmony export */   "fdc3Ready": () => (/* binding */ fdc3Ready),
/* harmony export */   "findIntent": () => (/* binding */ findIntent),
/* harmony export */   "findIntentsByContext": () => (/* binding */ findIntentsByContext),
/* harmony export */   "getCurrentChannel": () => (/* binding */ getCurrentChannel),
/* harmony export */   "getInfo": () => (/* binding */ getInfo),
/* harmony export */   "getOrCreateChannel": () => (/* binding */ getOrCreateChannel),
/* harmony export */   "getSystemChannels": () => (/* binding */ getSystemChannels),
/* harmony export */   "joinChannel": () => (/* binding */ joinChannel),
/* harmony export */   "leaveCurrentChannel": () => (/* binding */ leaveCurrentChannel),
/* harmony export */   "open": () => (/* binding */ open),
/* harmony export */   "raiseIntent": () => (/* binding */ raiseIntent),
/* harmony export */   "raiseIntentForContext": () => (/* binding */ raiseIntentForContext),
/* harmony export */   "versionIsAtLeast": () => (/* binding */ versionIsAtLeast)
/* harmony export */ });
/**
 * SPDX-License-Identifier: Apache-2.0
 * Copyright 2019 FINOS FDC3 contributors - see NOTICE file
 */
var OpenError;

(function (OpenError) {
  OpenError["AppNotFound"] = "AppNotFound";
  OpenError["ErrorOnLaunch"] = "ErrorOnLaunch";
  OpenError["AppTimeout"] = "AppTimeout";
  OpenError["ResolverUnavailable"] = "ResolverUnavailable";
})(OpenError || (OpenError = {}));

var ResolveError;

(function (ResolveError) {
  ResolveError["NoAppsFound"] = "NoAppsFound";
  ResolveError["ResolverUnavailable"] = "ResolverUnavailable";
  ResolveError["ResolverTimeout"] = "ResolverTimeout";
})(ResolveError || (ResolveError = {}));

var ChannelError;

(function (ChannelError) {
  ChannelError["NoChannelFound"] = "NoChannelFound";
  ChannelError["AccessDenied"] = "AccessDenied";
  ChannelError["CreationFailed"] = "CreationFailed";
})(ChannelError || (ChannelError = {}));

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var runtime_1 = createCommonjsModule(function (module) {
/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined$1; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined$1) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined$1;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined$1;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined$1;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined$1, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined$1;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined$1;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined$1;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined$1;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined$1;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   module.exports 
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}
});

var DEFAULT_TIMEOUT = 5000;
var UnavailableError = /*#__PURE__*/new Error('FDC3 DesktopAgent not available at `window.fdc3`.');
var TimeoutError = /*#__PURE__*/new Error('Timed out waiting for `fdc3Ready` event.');
var UnexpectedError = /*#__PURE__*/new Error('`fdc3Ready` event fired, but `window.fdc3` not set to DesktopAgent.');

function rejectIfNoGlobal(f) {
  return window.fdc3 ? f() : Promise.reject(UnavailableError);
}

function throwIfNoGlobal(f) {
  if (!window.fdc3) {
    throw UnavailableError;
  }

  return f();
}

var fdc3Ready = /*#__PURE__*/function () {
  var _ref = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/runtime_1.mark(function _callee(waitForMs) {
    return runtime_1.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (waitForMs === void 0) {
              waitForMs = DEFAULT_TIMEOUT;
            }

            return _context.abrupt("return", new Promise(function (resolve, reject) {
              // if the global is already available resolve immediately
              if (window.fdc3) {
                resolve();
              } else {
                // if its not available setup a timeout to return a rejected promise
                var timeout = setTimeout(function () {
                  return window.fdc3 ? resolve() : reject(TimeoutError);
                }, waitForMs); // listen for the fdc3Ready event

                window.addEventListener('fdc3Ready', function () {
                  clearTimeout(timeout);
                  window.fdc3 ? resolve() : reject(UnexpectedError);
                }, {
                  once: true
                });
              }
            }));

          case 2:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function fdc3Ready(_x) {
    return _ref.apply(this, arguments);
  };
}();
function open(app, context) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.open(app, context);
  });
}
function findIntent(intent, context) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.findIntent(intent, context);
  });
}
function findIntentsByContext(context) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.findIntentsByContext(context);
  });
}
function broadcast(context) {
  throwIfNoGlobal(function () {
    return window.fdc3.broadcast(context);
  });
}
function raiseIntent(intent, context, app) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.raiseIntent(intent, context, app);
  });
}
function raiseIntentForContext(context, app) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.raiseIntentForContext(context, app);
  });
}
function addIntentListener(intent, handler) {
  return throwIfNoGlobal(function () {
    return window.fdc3.addIntentListener(intent, handler);
  });
}
function addContextListener(contextTypeOrHandler, handler) {
  if (typeof contextTypeOrHandler !== 'function') {
    return throwIfNoGlobal(function () {
      return window.fdc3.addContextListener(contextTypeOrHandler, handler);
    });
  } else {
    return throwIfNoGlobal(function () {
      return window.fdc3.addContextListener(contextTypeOrHandler);
    });
  }
}
function getSystemChannels() {
  return rejectIfNoGlobal(function () {
    return window.fdc3.getSystemChannels();
  });
}
function joinChannel(channelId) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.joinChannel(channelId);
  });
}
function getOrCreateChannel(channelId) {
  return rejectIfNoGlobal(function () {
    return window.fdc3.getOrCreateChannel(channelId);
  });
}
function getCurrentChannel() {
  return rejectIfNoGlobal(function () {
    return window.fdc3.getCurrentChannel();
  });
}
function leaveCurrentChannel() {
  return rejectIfNoGlobal(function () {
    return window.fdc3.leaveCurrentChannel();
  });
}
function getInfo() {
  return throwIfNoGlobal(function () {
    return window.fdc3.getInfo();
  });
}
/**
 * Compare numeric semver version number strings (in the form `1.2.3`).
 *
 * Returns `-1` if the first argument is a lower version number than the second,
 * `1` if the first argument is greater than the second, 0 if the arguments are
 * equal and `null` if an error occurred during the comparison.
 *
 * @param a
 * @param b
 */

var compareVersionNumbers = function compareVersionNumbers(a, b) {
  try {
    var aVerArr = a.split('.').map(Number);
    var bVerArr = b.split('.').map(Number);

    for (var index = 0; index < Math.max(aVerArr.length, bVerArr.length); index++) {
      /* If one version number has more digits and the other does not, and they are otherwise equal,
         assume the longer is greater. E.g. 1.1.1 > 1.1 */
      if (index === aVerArr.length || aVerArr[index] < bVerArr[index]) {
        return -1;
      } else if (index === bVerArr.length || aVerArr[index] > bVerArr[index]) {
        return 1;
      }
    }

    return 0;
  } catch (e) {
    console.error('Failed to compare version strings', e);
    return null;
  }
};
/**
 * Check if the FDC3 version in an ImplementationMetadata object is greater than
 * or equal to the supplied numeric semver version number string (in the form `1.2.3`).
 *
 * Returns a boolean or null if an error occurred while comparing the version numbers.
 *
 * @param metadata
 * @param version
 */

var versionIsAtLeast = function versionIsAtLeast(metadata, version) {
  var comparison = compareVersionNumbers(metadata.fdc3Version, version);
  return comparison === null ? null : comparison >= 0 ? true : false;
};

var ContextTypes;

(function (ContextTypes) {
  ContextTypes["Contact"] = "fdc3.contact";
  ContextTypes["ContactList"] = "fdc3.contactList";
  ContextTypes["Country"] = "fdc3.country";
  ContextTypes["Instrument"] = "fdc3.instrument";
  ContextTypes["Organization"] = "fdc3.organization";
  ContextTypes["Portfolio"] = "fdc3.portfolio";
  ContextTypes["Position"] = "fdc3.position";
})(ContextTypes || (ContextTypes = {}));

// To parse this data:
//
//   import { Convert, Context, Contact, ContactList, Instrument, InstrumentList, Country, Organization, Portfolio, Position } from "./file";
//
//   const context = Convert.toContext(json);
//   const contact = Convert.toContact(json);
//   const contactList = Convert.toContactList(json);
//   const instrument = Convert.toInstrument(json);
//   const instrumentList = Convert.toInstrumentList(json);
//   const country = Convert.toCountry(json);
//   const organization = Convert.toOrganization(json);
//   const portfolio = Convert.toPortfolio(json);
//   const position = Convert.toPosition(json);
//
// These functions will throw an error if the JSON doesn't
// match the expected interface, even if the JSON is valid.
// Converts JSON strings to/from your types
// and asserts the results of JSON.parse at runtime
var Convert = /*#__PURE__*/function () {
  function Convert() {}

  Convert.toContext = function toContext(json) {
    return cast(JSON.parse(json), r('Context'));
  };

  Convert.contextToJson = function contextToJson(value) {
    return JSON.stringify(uncast(value, r('Context')), null, 2);
  };

  Convert.toContact = function toContact(json) {
    return cast(JSON.parse(json), r('Contact'));
  };

  Convert.contactToJson = function contactToJson(value) {
    return JSON.stringify(uncast(value, r('Contact')), null, 2);
  };

  Convert.toContactList = function toContactList(json) {
    return cast(JSON.parse(json), r('ContactList'));
  };

  Convert.contactListToJson = function contactListToJson(value) {
    return JSON.stringify(uncast(value, r('ContactList')), null, 2);
  };

  Convert.toInstrument = function toInstrument(json) {
    return cast(JSON.parse(json), r('Instrument'));
  };

  Convert.instrumentToJson = function instrumentToJson(value) {
    return JSON.stringify(uncast(value, r('Instrument')), null, 2);
  };

  Convert.toInstrumentList = function toInstrumentList(json) {
    return cast(JSON.parse(json), r('InstrumentList'));
  };

  Convert.instrumentListToJson = function instrumentListToJson(value) {
    return JSON.stringify(uncast(value, r('InstrumentList')), null, 2);
  };

  Convert.toCountry = function toCountry(json) {
    return cast(JSON.parse(json), r('Country'));
  };

  Convert.countryToJson = function countryToJson(value) {
    return JSON.stringify(uncast(value, r('Country')), null, 2);
  };

  Convert.toOrganization = function toOrganization(json) {
    return cast(JSON.parse(json), r('Organization'));
  };

  Convert.organizationToJson = function organizationToJson(value) {
    return JSON.stringify(uncast(value, r('Organization')), null, 2);
  };

  Convert.toPortfolio = function toPortfolio(json) {
    return cast(JSON.parse(json), r('Portfolio'));
  };

  Convert.portfolioToJson = function portfolioToJson(value) {
    return JSON.stringify(uncast(value, r('Portfolio')), null, 2);
  };

  Convert.toPosition = function toPosition(json) {
    return cast(JSON.parse(json), r('Position'));
  };

  Convert.positionToJson = function positionToJson(value) {
    return JSON.stringify(uncast(value, r('Position')), null, 2);
  };

  return Convert;
}();

function invalidValue(typ, val, key) {
  if (key === void 0) {
    key = '';
  }

  if (key) {
    throw Error("Invalid value for key \"" + key + "\". Expected type " + JSON.stringify(typ) + " but got " + JSON.stringify(val));
  }

  throw Error("Invalid value " + JSON.stringify(val) + " for type " + JSON.stringify(typ));
}

function jsonToJSProps(typ) {
  if (typ.jsonToJS === undefined) {
    var map = {};
    typ.props.forEach(function (p) {
      return map[p.json] = {
        key: p.js,
        typ: p.typ
      };
    });
    typ.jsonToJS = map;
  }

  return typ.jsonToJS;
}

function jsToJSONProps(typ) {
  if (typ.jsToJSON === undefined) {
    var map = {};
    typ.props.forEach(function (p) {
      return map[p.js] = {
        key: p.json,
        typ: p.typ
      };
    });
    typ.jsToJSON = map;
  }

  return typ.jsToJSON;
}

function transform(val, typ, getProps, key) {
  if (key === void 0) {
    key = '';
  }

  function transformPrimitive(typ, val) {
    if (typeof typ === typeof val) return val;
    return invalidValue(typ, val, key);
  }

  function transformUnion(typs, val) {
    // val must validate against one typ in typs
    var l = typs.length;

    for (var i = 0; i < l; i++) {
      var _typ = typs[i];

      try {
        return transform(val, _typ, getProps);
      } catch (_) {}
    }

    return invalidValue(typs, val);
  }

  function transformEnum(cases, val) {
    if (cases.indexOf(val) !== -1) return val;
    return invalidValue(cases, val);
  }

  function transformArray(typ, val) {
    // val must be an array with no invalid elements
    if (!Array.isArray(val)) return invalidValue('array', val);
    return val.map(function (el) {
      return transform(el, typ, getProps);
    });
  }

  function transformDate(val) {
    if (val === null) {
      return null;
    }

    var d = new Date(val);

    if (isNaN(d.valueOf())) {
      return invalidValue('Date', val);
    }

    return d;
  }

  function transformObject(props, additional, val) {
    if (val === null || typeof val !== 'object' || Array.isArray(val)) {
      return invalidValue('object', val);
    }

    var result = {};
    Object.getOwnPropertyNames(props).forEach(function (key) {
      var prop = props[key];
      var v = Object.prototype.hasOwnProperty.call(val, key) ? val[key] : undefined;
      result[prop.key] = transform(v, prop.typ, getProps, prop.key);
    });
    Object.getOwnPropertyNames(val).forEach(function (key) {
      if (!Object.prototype.hasOwnProperty.call(props, key)) {
        result[key] = transform(val[key], additional, getProps, key);
      }
    });
    return result;
  }

  if (typ === 'any') return val;

  if (typ === null) {
    if (val === null) return val;
    return invalidValue(typ, val);
  }

  if (typ === false) return invalidValue(typ, val);

  while (typeof typ === 'object' && typ.ref !== undefined) {
    typ = typeMap[typ.ref];
  }

  if (Array.isArray(typ)) return transformEnum(typ, val);

  if (typeof typ === 'object') {
    return typ.hasOwnProperty('unionMembers') ? transformUnion(typ.unionMembers, val) : typ.hasOwnProperty('arrayItems') ? transformArray(typ.arrayItems, val) : typ.hasOwnProperty('props') ? transformObject(getProps(typ), typ.additional, val) : invalidValue(typ, val);
  } // Numbers can be parsed by Date but shouldn't be.


  if (typ === Date && typeof val !== 'number') return transformDate(val);
  return transformPrimitive(typ, val);
}

function cast(val, typ) {
  return transform(val, typ, jsonToJSProps);
}

function uncast(val, typ) {
  return transform(val, typ, jsToJSONProps);
}

function a(typ) {
  return {
    arrayItems: typ
  };
}

function u() {
  for (var _len = arguments.length, typs = new Array(_len), _key = 0; _key < _len; _key++) {
    typs[_key] = arguments[_key];
  }

  return {
    unionMembers: typs
  };
}

function o(props, additional) {
  return {
    props: props,
    additional: additional
  };
}

function m(additional) {
  return {
    props: [],
    additional: additional
  };
}

function r(name) {
  return {
    ref: name
  };
}

var typeMap = {
  Context: /*#__PURE__*/o([{
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/u(undefined, /*#__PURE__*/m(''))
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }], 'any'),
  ContactList: /*#__PURE__*/o([{
    json: 'contacts',
    js: 'contacts',
    typ: /*#__PURE__*/a( /*#__PURE__*/r('Contact'))
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/u(undefined, /*#__PURE__*/m(''))
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  Contact: /*#__PURE__*/o([{
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/r('ContactID')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  ContactID: /*#__PURE__*/o([{
    json: 'email',
    js: 'email',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'FDS_ID',
    js: 'FDS_ID',
    typ: /*#__PURE__*/u(undefined, '')
  }], ''),
  InstrumentList: /*#__PURE__*/o([{
    json: 'instruments',
    js: 'instruments',
    typ: /*#__PURE__*/a( /*#__PURE__*/r('Instrument'))
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/u(undefined, /*#__PURE__*/m(''))
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  Instrument: /*#__PURE__*/o([{
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/r('InstrumentID')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  InstrumentID: /*#__PURE__*/o([{
    json: 'BBG',
    js: 'BBG',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'CUSIP',
    js: 'CUSIP',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'FDS_ID',
    js: 'FDS_ID',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'FIGI',
    js: 'FIGI',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'ISIN',
    js: 'ISIN',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'PERMID',
    js: 'PERMID',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'RIC',
    js: 'RIC',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'SEDOL',
    js: 'SEDOL',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'ticker',
    js: 'ticker',
    typ: /*#__PURE__*/u(undefined, '')
  }], ''),
  Country: /*#__PURE__*/o([{
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/r('CountryID')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  CountryID: /*#__PURE__*/o([{
    json: 'ISOALPHA2',
    js: 'ISOALPHA2',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'ISOALPHA3',
    js: 'ISOALPHA3',
    typ: /*#__PURE__*/u(undefined, '')
  }], ''),
  Organization: /*#__PURE__*/o([{
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/r('OrganizationID')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  OrganizationID: /*#__PURE__*/o([{
    json: 'FDS_ID',
    js: 'FDS_ID',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'LEI',
    js: 'LEI',
    typ: /*#__PURE__*/u(undefined, '')
  }, {
    json: 'PERMID',
    js: 'PERMID',
    typ: /*#__PURE__*/u(undefined, '')
  }], ''),
  Portfolio: /*#__PURE__*/o([{
    json: 'positions',
    js: 'positions',
    typ: /*#__PURE__*/a( /*#__PURE__*/r('Position'))
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/u(undefined, /*#__PURE__*/m(''))
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any'),
  Position: /*#__PURE__*/o([{
    json: 'holding',
    js: 'holding',
    typ: 3.14
  }, {
    json: 'instrument',
    js: 'instrument',
    typ: /*#__PURE__*/r('Instrument')
  }, {
    json: 'type',
    js: 'type',
    typ: ''
  }, {
    json: 'id',
    js: 'id',
    typ: /*#__PURE__*/u(undefined, /*#__PURE__*/m(''))
  }, {
    json: 'name',
    js: 'name',
    typ: /*#__PURE__*/u(undefined, '')
  }], 'any')
};

var Intents;

(function (Intents) {
  Intents["StartCall"] = "StartCall";
  Intents["StartChat"] = "StartChat";
  Intents["ViewChart"] = "ViewChart";
  Intents["ViewContact"] = "ViewContact";
  Intents["ViewQuote"] = "ViewQuote";
  Intents["ViewNews"] = "ViewNews";
  Intents["ViewInstrument"] = "ViewInstrument";
  Intents["ViewAnalysis"] = "ViewAnalysis";
})(Intents || (Intents = {}));


//# sourceMappingURL=fdc3.esm.js.map


/***/ }),

/***/ "../../node_modules/@openfin/excel/openfin.excel.js":
/*!**********************************************************!*\
  !*** ../../node_modules/@openfin/excel/openfin.excel.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AdapterError": () => (/* binding */ r),
/* harmony export */   "ApiError": () => (/* binding */ o),
/* harmony export */   "EventError": () => (/* binding */ s),
/* harmony export */   "ExcelCellBorderLineStyle": () => (/* binding */ a),
/* harmony export */   "ExcelCellHorizontalAlignment": () => (/* binding */ c),
/* harmony export */   "ExcelCellPattern": () => (/* binding */ d),
/* harmony export */   "ExcelCellVerticalAlignment": () => (/* binding */ h),
/* harmony export */   "ExcelFilterOperator": () => (/* binding */ l),
/* harmony export */   "InitializationError": () => (/* binding */ u),
/* harmony export */   "ParameterError": () => (/* binding */ p),
/* harmony export */   "disableLogging": () => (/* binding */ w),
/* harmony export */   "enableLogging": () => (/* binding */ y),
/* harmony export */   "getExcelApplication": () => (/* binding */ f)
/* harmony export */ });
var e={3885:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4794);class s extends i.Base{async wrap(e){this.wire.sendAction("wrap-application").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch((e=>{})),this._create(e)}async start(e){this.wire.sendAction("start-application").catch((e=>{}));const t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e){return this.wire.sendAction("run-applications",{applications:e}).then((()=>{}))}getCurrent(){return this.wire.sendAction("get-current-application").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch((e=>{}));const n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch((e=>{})),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then((({payload:e})=>{const t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})})).then((t=>(t._manifestUrl=e,t)))}}t.default=s},4794:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=n(9659),r=n(4997),o=n(4169);class s extends i.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new r._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){const t=[];return e.forEach((e=>{t.push(new r._Window(this.wire,{uuid:e.uuid,name:e.name}))})),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then((({payload:e})=>e.data))}async quit(e=!1){await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}_close(e=!1){return this.wire.sendAction("close-application",{force:e,...this.identity}).then((()=>{}))}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch((e=>{})),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then((({payload:e})=>{const t=[];return e.data.forEach((e=>{t.push({uuid:this.identity.uuid,name:e})})),this.windowListFromIdentityList(t)}))}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then((({payload:e})=>e.data))}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then((({payload:e})=>e.data))}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then((({payload:e})=>e.data))}async getViews(){const{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then((({payload:e})=>e.data))}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch((e=>{})),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then((()=>{}))}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then((()=>{}))}restart(){return this.wire.sendAction("restart-application",this.identity).then((()=>{}))}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch((e=>{})),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then((()=>{}))}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then((()=>{}))}async sendApplicationLog(){const{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then((()=>{}))}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then((()=>{}))}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then((()=>{}))}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then((({payload:e})=>e.data))}terminate(){return this.wire.sendAction("terminate-application",this.identity).then((()=>{}))}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-info",this.identity).then((({payload:e})=>e.data))}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){await this.wire.sendAction("set-file-download-location",{downloadLocation:e,...this.identity})}}t.Application=s},7264:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3885);r(n(4794),t),t.default=o.default},9659:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=t.EmitterBase=t.Base=void 0;const s=n(3442),a=n(8068);class c{constructor(e){this.isNodeEnvironment=()=>"NodeEnvironment"===this.wire.environment.constructor.name,this.isOpenFinEnvironment=()=>"OpenFinEnvironment"===this.wire.environment.constructor.name,this.wire=e}get fin(){return a.getFin(this.wire)}get me(){return this.wire.me}}t.Base=c,t.EmitterBase=class extends c{constructor(e,t,...n){super(e),this.topic=t,i.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(o(this,i)),this.getOrCreateEmitter=()=>this.wire.eventAggregator.getOrCreate(o(this,i)),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,i)=>{const r={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},o=this.getOrCreateEmitter();n(o);try{await this.wire.sendAction("subscribe-to-desktop-event",r)}catch(e){throw i(o),this.deleteEmitterIfNothingRegistered(o),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){const n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch((()=>null)),this.getOrCreateEmitter()}return Promise.resolve()},this.on=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.on(e,t)}),(n=>{n.removeListener(e,t)})),this),this.addListener=this.on,this.once=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.once(e,i),n.once(e,t)}),(n=>{n.removeListener(e,i),n.removeListener(e,t)})),this},this.prependListener=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.prependListener(e,t)}),(n=>{n.removeListener(e,t)})),this),this.prependOnceListener=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.prependOnceListener(e,t),n.once(e,i)}),(n=>{n.removeListener(e,t),n.removeListener(e,i)})),this},this.removeListener=async(e,t,n)=>{const i=await this.deregisterEventListener(e,n);return i&&(i.removeListener(e,t),this.deleteEmitterIfNothingRegistered(i)),this},this.deregisterAllListeners=async e=>{const t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){const e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),i=[];for(let e=0;e<n;e++)i.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch((()=>null)));return await Promise.all(i),e}},this.removeAllListeners=async e=>{const t=async e=>{const t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await t(e);else if(this.hasEmitter()){const e=this.getOrCreateEmitter().eventNames();await s.promiseMap(e,t)}return this},r(this,i,[t,...n]),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[]}deleteEmitterIfNothingRegistered(e){0===e.eventNames().length&&this.wire.eventAggregator.delete(o(this,i))}},i=new WeakMap,t.Reply=class{}},3427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.Base{writeText(e){return this.wire.sendAction("clipboard-write-text",e).then((()=>{}))}readText(e){return this.wire.sendAction("clipboard-read-text",e).then((({payload:e})=>e.data))}writeHtml(e){return this.wire.sendAction("clipboard-write-html",e).then((()=>{}))}readHtml(e){return this.wire.sendAction("clipboard-read-html",e).then((({payload:e})=>e.data))}writeRtf(e){return this.wire.sendAction("clipboard-write-rtf",e).then((()=>{}))}readRtf(e){return this.wire.sendAction("clipboard-read-rtf",e).then((({payload:e})=>e.data))}write(e){return this.wire.sendAction("clipboard-write",e).then((()=>{}))}getAvailableFormats(e){return this.wire.sendAction("clipboard-read-formats",e).then((({payload:e})=>e.data))}}t.default=r},7813:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitterMap=void 0;const i=n(6465);function r(e){return Buffer.from(e).toString("base64")}t.EmitterMap=class{constructor(){this.storage=new Map}hashKeys(e){return e.map(r).join("/")}getOrCreate(e){const t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new i.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){const t=this.hashKeys(e);return this.storage.delete(t)}}},2734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(7813);class r extends i.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if(function(e){return"process-desktop-event"===e.action}(e)){const{payload:t}=e,n=function(e){const{topic:t}=e;if("frame"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("window"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("application"===t){const{uuid:n}=e;return[t,n]}if("view"===t){const{uuid:n,name:i}=e;return[t,n,i]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}t.default=r},7168:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(8298);class o extends i.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch((e=>{})),Promise.resolve(new r.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch((e=>{})),new r.ExternalApplication(this.wire,{uuid:e})}}t.default=o},8298:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplication=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then((({payload:e})=>e.data))}}t.ExternalApplication=r},9021:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7168);t.default=o.default,r(n(8298),t)},6545:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(6465),r=n(3641),o=n(4997),s=n(7264),a=n(8347),c=n(3427),d=n(9021),h=n(6720),l=n(9211),u=n(4169),p=n(609),w=n(9641),y=n(8068),f=n(8706),g=n(7153);class m extends i.EventEmitter{constructor(e){super(),y.registerFin(e,this),this.wire=e,this.System=new r.default(e),this.Window=new o.default(e),this.Application=new s.default(e),this.InterApplicationBus=new a.default(e),this.Clipboard=new c.default(e),this.ExternalApplication=new d.default(e),this.Frame=new h.default(e),this.GlobalHotkey=new l.default(e),this.Platform=new p.default(e,this.InterApplicationBus.Channel),this.View=new u.default(e),this.Interop=new f.default(e),this.SnapshotSource=new g.default(e),this.me=w.getMe(e),e.on("disconnected",(()=>{this.emit("disconnected")}))}}t.default=m},1778:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(8161);class s extends i.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch((e=>{})),Promise.resolve(new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch((e=>{})),new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}t.default=s},8161:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Frame=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then((({payload:e})=>e.data))}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then((({payload:e})=>e.data))}}t._Frame=r},6720:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1778);t.default=o.default,r(n(8161),t)},9211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter((e=>!("registered"===e||"unregistered"===e))).map((e=>this.removeAllListeners(e)))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){const{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t.default=r},7539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelBase=t.ProtectedItems=void 0;const n=e=>(t,n,i)=>{const r=e(t,n,i);return void 0===r?n:r};t.ProtectedItems=class{constructor(e,t){this.providerIdentity=e,this.wire=t}};class i{constructor(){this.subscriptions=new Map}static defaultAction(e){throw new Error(`No action registered at target for ${e}`)}async processAction(e,t,n){try{const r=this.subscriptions.has(e)?this.subscriptions.get(e):(t,n)=>{var r;return(null!==(r=this.defaultAction)&&void 0!==r?r:i.defaultAction)(e,t,n)},o=this.preAction?await this.preAction(e,t,n):t,s=await r(o,n);return this.postAction?await this.postAction(e,s,n):s}catch(t){if(this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw new Error("Already registered beforeAction middleware");this.preAction=n(e)}onError(e){if(this.errorMiddleware)throw new Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw new Error("Already registered afterAction middleware");this.postAction=n(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw new Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw new Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}t.ChannelBase=i},8378:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const c=n(7539),d=new Map;class h extends c.ChannelBase{constructor(e,t,n){super(),i.set(this,void 0),r.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),o.set(this,(()=>{d.delete(this.endpointId),a(this,r).close()})),s(this,i,new c.ProtectedItems(e,t)),this.disconnectListener=()=>{},this.endpointId=e.endpointId,s(this,r,n),d.set(this.endpointId,this),n.receive(this.processAction)}static closeChannelByEndpointId(e){const t=d.get(e);t&&a(t,o).call(t)}static handleProviderDisconnect(e,t){e.disconnectListener(t),a(e,o).call(e)}get providerIdentity(){return a(this,i).providerIdentity}async dispatch(e,t){if(a(this,r).isEndpointConnected(this.providerIdentity.channelId))return a(this,r).send(this.providerIdentity.channelId,e,t);throw new Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw new Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){const e=a(this,i),{channelName:t,uuid:n,name:r}=e.providerIdentity;await e.wire.sendAction("disconnect-from-channel",{channelName:t,uuid:n,name:r,endpointId:this.endpointId}),a(this,o).call(this)}}t.default=h,i=new WeakMap,r=new WeakMap,o=new WeakMap},6711:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const a=n(3917),c=n(9659),d=n(1046),h=n(3870),l=n(569),u=n(2942),p=n(3749),w=n(3037),y=n(7113);class f extends c.Base{constructor(e){super(e),i.set(this,void 0),r.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new w.ProtocolManager(this.isNodeEnvironment()?["classic"]:["rtc","classic"]),o(this,i,new p.MessageReceiver(e)),o(this,r,new l.RTCICEManager(e)),e.registerMessageHandler(this.onmessage.bind(this))}static getProtocolOptionsFromStrings(e){return e.map((e=>{switch(e){case"rtc":return h.RTCInfo;case"classic":return d.ClassicInfo;default:return a.exhaustiveCheck(e,["rtc","classic"])}}))}createProvider(e,t){const n=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),r=this.protocolManager.getProviderProtocols(null==n?void 0:n.protocols),o=r.map((e=>{switch(e){case"rtc":return new h.RTCStrategy;case"classic":return new d.ClassicStrategy(this.wire,s(this,i),t.channelId,t);default:return a.exhaustiveCheck(e,["rtc","classic"])}}));let c;if(2===o.length){const[e,t]=o;c=y.default.combine(e,t)}else{if(1!==o.length)throw new Error("failed to combine strategies");[c]=o}const l=new u.ChannelProvider(t,this.wire,c),p=t.channelId;return this.providerMap.set(p,{provider:l,strategy:c,supportedProtocols:f.getProtocolOptionsFromStrings(r)}),u.ChannelProvider.setProviderRemoval(l,this.removeChannelFromProviderMap.bind(this)),l}async createClientOffer(e){const t=this.protocolManager.getClientProtocols(null==e?void 0:e.protocols);let n;return{offer:{supportedProtocols:await Promise.all(t.map((async e=>{switch(e){case"rtc":{const{rtcClient:e,channels:t,offer:i,rtcConnectionId:o,channelsOpened:a}=await s(this,r).startClientOffer();return n={rtcClient:e,channels:t,channelsOpened:a},{type:"rtc",version:h.RTCInfo.version,payload:{offer:i,rtcConnectionId:o}}}case"classic":return{type:"classic",version:d.ClassicInfo.version};default:return a.exhaustiveCheck(e,["rtc","classic"])}}))),maxProtocols:2},rtc:n}}async createClientStrategy(e,t){var n;t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),s(this,i).checkForPreviousClientConnection(t.channelId));const o=null!==(n=t.answer)&&void 0!==n?n:{supportedProtocols:[{type:"classic",version:1}]},a=(await Promise.all(o.supportedProtocols.map((async n=>"rtc"===n.type&&e?(await s(this,r).finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new h.RTCStrategy):"classic"===n.type?new d.ClassicStrategy(this.wire,s(this,i),t.endpointId,t):null)))).filter((e=>null!==e));let c;if(e&&!a.some((e=>e instanceof h.RTCStrategy))&&e&&e.rtcClient.close(),a.length>=2)c=y.default.combine(a[0],a[1]);else{if(!a.length)throw new Error("No compatible protocols");[c]=a}const l={endpointIdentity:t,rtc:e};return c.addEndpoint(t.channelId,l),c}async processChannelConnection(e){const{clientIdentity:t,providerIdentity:n,ackToSender:i,payload:o,offer:a}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);const c=n.channelId,l=this.providerMap.get(c);if(!l)return i.payload.success=!1,i.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(i);const{provider:p,strategy:w,supportedProtocols:y}=l;try{if(!(p instanceof u.ChannelProvider))throw Error("Cannot connect to a channel client");const e=null!=a?a:{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1},n=this.protocolManager.getCompatibleProtocols(y,e);if(!n.length)throw new Error("This provider does not support any of the offered protocols.");const c=await p.processConnection(t,o);i.payload.payload=i.payload.payload||{};let l={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return l=await n.reduce((async(e,t)=>{const n=await e;if("rtc"===t.type){const{answer:e,rtcClient:i,channels:o}=await s(this,r).createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:h.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then((e=>o.then((t=>({...e,rtc:{rtcClient:i,channels:t}})))))}else n.supportedProtocols.push({type:"classic",version:d.ClassicInfo.version});return n}),Promise.resolve(l)),l.endpointPayloadPromise.then((e=>w.addEndpoint(t.endpointId,e))),i.payload.payload.result=c,i.payload.payload.answer=l,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,this.wire.sendRaw(i)}}}t.ConnectionManager=f,i=new WeakMap,r=new WeakMap},7722:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const s=n(8378),a=n(2942),c=n(9659),d=n(6711),h=()=>{};class l extends c.EmitterBase{constructor(e){super(e,"channel"),i.set(this,void 0),r(this,i,new d.ConnectionManager(e))}async getAllChannels(){return this.wire.sendAction("get-all-channels").then((({payload:e})=>e.data))}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async connect(e,t){if(!e||"string"!=typeof e)throw new Error("Please provide a channelName string to connect to a channel.");const n=Object.assign(this.wire.environment.getDefaultChannelOptions().connect,t||{});let r=h,a=h;const c=new Promise((t=>{r=t,a=i=>{e===i.channelName&&(this.removeListener("connected",a),this.connect(e,n).then((e=>{t(e)})))},this.on("connected",a)}));try{const{offer:t,rtc:c}=await o(this,i).createClientOffer(n),d=await this.wire.sendAction("connect-to-channel",{channelName:e,...n,offer:t}),{payload:{data:h}}=d;r&&r(),this.removeListener("connected",a);const l=await o(this,i).createClientStrategy(c,h),u=new s.default(h,this.wire,l);return l.onEndpointDisconnect(h.channelId,(async()=>{try{await u.disconnect()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${h.uuid} / name: ${h.name} / endpointId: ${h.endpointId}.`)}finally{s.default.handleProviderDisconnect(u,h)}})),this.on("disconnected",(t=>{t.channelName===e&&s.default.handleProviderDisconnect(u,t)})),u}catch(t){const i="internal-nack";if({wait:!0,...n}.wait&&t.message&&t.message.includes(i))return console.warn(`Channel not found for channelName: ${e}, waiting for channel connection.`),c;throw t.message===i?new Error(`No channel found for channelName: ${e}`):new Error(t)}}async create(e,t){if(!e)throw new Error("Please provide a channelName to create a channel");const{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),r=o(this,i).createProvider(t,n);return this.on("client-disconnected",(t=>{t.channelName===e&&a.ChannelProvider.handleClientDisconnection(r,t)})),r}}t.Channel=l,i=new WeakMap},3749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiver=void 0;const i=n(8378),r=n(9659);class o extends r.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){var t,n;const{senderIdentity:i,providerIdentity:r,action:o,ackToSender:s,payload:a,intendedTargetIdentity:c}=e.payload,d=null!==(n=null!==(t=c.channelId)&&void 0!==t?t:c.endpointId)&&void 0!==n?n:this.latestEndpointIdByChannelId.get(r.channelId),h=this.endpointMap.get(d);if(!h)return s.payload.success=!1,s.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${d} no longer connected.`,this.wire.sendRaw(s);try{const e=await h(o,a,i);return s.payload.payload=s.payload.payload||{},s.payload.payload.result=e,this.wire.sendRaw(s)}catch(e){return s.payload.success=!1,s.payload.reason=e.message,this.wire.sendRaw(s)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){const t=this.latestEndpointIdByChannelId.get(e);t&&(i.default.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}t.MessageReceiver=o},1046:function(e,t){var n,i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicInfo=t.ClassicStrategy=void 0,t.ClassicStrategy=class{constructor(e,t,s,a){this.messageReceiver=t,this.endpointId=s,this.providerIdentity=a,n.set(this,void 0),i.set(this,new Map),this.send=async(e,t,r)=>{const s=o(this,i).get(e);if(!s)throw new Error(`Could not locate routing info for endpoint ${e}`);const a={...s};return a.isLocalEndpointId&&delete a.endpointId,delete a.isLocalEndpointId,(await o(this,n).sendAction("send-channel-message",{...a,providerIdentity:this.providerIdentity,action:t,payload:r}).catch((e=>{throw new Error(e.message)}))).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),r(this,i,new Map)},r(this,n,e)}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){o(this,i).delete(e)}isEndpointConnected(e){return o(this,i).has(e)}addEndpoint(e,t){o(this,i).set(e,t.endpointIdentity)}isValidEndpointPayload(e){var t,n;return"string"==typeof(null===(t=null==e?void 0:e.endpointIdentity)||void 0===t?void 0:t.endpointId)||"string"==typeof(null===(n=null==e?void 0:e.endpointIdentity)||void 0===n?void 0:n.channelId)}},n=new WeakMap,i=new WeakMap,t.ClassicInfo={version:5,minimumVersion:0,type:"classic"}},7113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.primary=e,this.secondary=t}static combine(e,t){return new n(e,t)}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,(()=>{this.secondary.isEndpointConnected(e)||t()})),this.secondary.onEndpointDisconnect(e,(()=>{this.primary.isEndpointConnected(e)||t()}))}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}t.default=n},3037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolManager=void 0,t.ProtocolManager=class{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultClientProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultProviderProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter((t=>e.some((e=>{var n;return e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(null!==(n=t.minimumVersion)&&void 0!==n?n:0)})))).slice(0,t.maxProtocols)}}},8776:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCEndpoint=void 0;const a=n(2366);t.RTCEndpoint=class{constructor(e,t){this.rtc=e,this.endpointIdentity=t,this.responseMap=new Map,i.set(this,null),r.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),o(this,r)&&o(this,r).call(this))},this.send=async(e,t)=>{const n=`message-${Math.random()}`,i=new Promise(((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})}));return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),i},this.close=()=>{this.responseMap.forEach((e=>e.reject("Connection has closed."))),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc.channels.response.addEventListener("message",(e=>{var t;const{messageId:n,payload:i,success:r,error:o}=JSON.parse(e.data),{resolve:s,reject:a}=null!==(t=this.responseMap.get(n))&&void 0!==t?t:{};s&&a?(this.responseMap.delete(n),r?s(i):a(o)):(console.log("Could not find id in responseMap."),console.log(e))})),this.rtc.channels.request.addEventListener("message",(async e=>{const{messageId:n,action:r,payload:s}=JSON.parse(e.data);if(o(this,i))try{const e=await o(this,i).call(this,r,s,t);this.rtc.channels.response.send(JSON.stringify({messageId:n,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,error:a.errorToPOJO(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,success:!1,error:"Connection not ready."}))})),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach((e=>{e.onclose=e=>{[...this.responseMap.values()].forEach((e=>e.reject(new Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB.")))),this.close(),o(this,r)&&o(this,r).call(this)}}))}onDisconnect(e){if(o(this,r))throw new Error("RTCEndpoint disconnectListener cannot be set twice.");s(this,r,e)}receive(e){if(o(this,i))throw new Error("You have already set a listener for this RTC Endpoint.");s(this,i,e)}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},i=new WeakMap,r=new WeakMap},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTCICEManager=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise(((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){const n=()=>{e.removeEventListener("open",n),t()};e.addEventListener("open",n)}else n(new Error("This Channel has already closed"))}))}static createDataChannelPromise(e,t){let n;const i=new Promise((e=>{n=e})),r=i=>{const o=()=>{i.channel.removeEventListener("open",o),n(i.channel)};i.channel.label===e&&(i.channel.addEventListener("open",o),t.removeEventListener("datachannel",r))};return t.addEventListener("datachannel",r),i}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){const e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseClientIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForProviderIce(e,(async e=>{await t.addIceCandidate(e.candidate)}));const n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},i=await t.createOffer();await t.setLocalDescription(i);const r=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then((()=>{}));return{rtcClient:t,channels:n,offer:i,rtcConnectionId:e,channelsOpened:r}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){const n=this.createRtcPeer(),i=r.createDataChannelPromise("request",n),o=r.createDataChannelPromise("response",n);n.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseProviderIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForClientIce(e,(async e=>{await n.addIceCandidate(e.candidate)})),await n.setRemoteDescription(t);const s=await n.createAnswer();await n.setLocalDescription(s);const a=Promise.all([i,o]).then((([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n})));return{rtcClient:n,answer:s,channels:a}}}t.RTCICEManager=r},3870:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCInfo=t.RTCStrategy=void 0;const c=n(8776);t.RTCStrategy=class{constructor(){i.set(this,null),r.set(this,new Map),o.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{s(this,o)&&(s(this,r).forEach((e=>e.close())),a(this,r,new Map)),a(this,o,!1)}}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(s(this,i))throw new Error("You have already set a listener for this RTC Strategy");a(this,i,e),s(this,r).forEach((e=>e.receive(s(this,i))))}getEndpointById(e){const t=s(this,r).get(e);if(!t)throw new Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return s(this,o)}isEndpointConnected(e){return s(this,r).has(e)}addEndpoint(e,t){if(!s(this,o))return void console.warn("Adding endpoint to disconnected RTC Strategy");const n=new c.RTCEndpoint(t.rtc,t.endpointIdentity);s(this,i)&&n.receive(s(this,i)),s(this,r).set(e,n)}async closeEndpoint(e){s(this,r).delete(e)}isValidEndpointPayload(e){const t=e=>"object"==typeof e&&null!==e;return t(e)&&t(e.endpointIdentity)&&t(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}},i=new WeakMap,r=new WeakMap,o=new WeakMap,t.RTCInfo={version:1,minimumVersion:0,type:"rtc"}},2942:function(e,t,n){var i=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelProvider=void 0;const o=n(7539),s=n(2300);let a=(()=>{var e,t,n,a,c;class d extends o.ChannelBase{constructor(h,l,u){super(),e.set(this,void 0),t.set(this,void 0),n.set(this,void 0),a.set(this,(t=>{const o=this.connections.filter((e=>e.endpointId!==t.endpointId));r(this,n).closeEndpoint(t.endpointId),i(this,e,o)})),this.processAction=async(e,t,n)=>(d.clientIsMultiRuntime(n)&&!s.runtimeUuidMeetsMinimumRuntimeVersion(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),c.set(this,(()=>{r(this,n).close();const e=d.removalMap.get(this);e&&e()})),i(this,t,new o.ProtectedItems(h,l)),this.connectListener=()=>{},this.disconnectListener=()=>{},i(this,e,[]),i(this,n,u),u.receive(this.processAction)}get connections(){return[...r(this,e)]}static handleClientDisconnection(e,t){const n=e.connections.find((e=>e.endpointId===t.endpointId));n?r(e,a).call(e,n):e.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name)).forEach(r(e,a)),e.disconnectListener(t)}static setProviderRemoval(e,t){d.removalMap.set(e,t)}dispatch(e,t,i){var o;const s=null!==(o=e.endpointId)&&void 0!==o?o:this.getEndpointIdForOpenFinId(e,t);return s&&r(this,n).isEndpointConnected(s)?r(this,n).send(s,t,i):Promise.reject(new Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${s} no longer connected.`))}async processConnection(t,n){return r(this,e).push(t),this.connectListener(t,n)}publish(e,t){return this.connections.map((i=>r(this,n).send(i.endpointId,e,t)))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){const n=r(this,t),{channelName:o}=n.providerIdentity;i(this,e,[]),await n.wire.sendAction("destroy-channel",{channelName:o}),r(this,c).call(this)}checkForClientConnection(e){if(!this.isClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider.\n                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return d.clientIdentityIncludesEndpointId(e)?this.connections.some((t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name)):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some((t=>t.uuid===e.uuid&&t.name===e.name))}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider. Client Identity:\n                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,n){var i;const o=this.connections.filter((t=>t.name===e.name&&t.uuid===e.uuid));if(o.length>=2){const i=r(this,t),{uuid:o,name:s}=e,a=null==i?void 0:i.providerIdentity.uuid,c=null==i?void 0:i.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the\n                "endpointId" parameter. The identity you are dispatching to ({uuid: ${o}, name: ${s}})\n                has multiple channelClients for this channel. Your dispatched action: (${n}) from the provider:\n                ({uuid: ${a}, name: ${c}}) will only be processed by the most recently-created client.`)}return null===(i=o.pop())||void 0===i?void 0:i.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}}return e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,c=new WeakMap,d.removalMap=new WeakMap,d})();t.ChannelProvider=a},8347:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterAppPayload=void 0;const i=n(6465),r=n(9659),o=n(3127),s=n(7722),a=n(4999);class c extends r.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new o.default,this.Channel=new s.Channel(e),this.emitter=new i.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}publish(e,t){return this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name}).then((()=>{}))}async send(e,t,n){const i=a.validateIdentity(e);if(i)throw new Error(i);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){const i=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(i,n),this.refCounter.actOnFirst(i,(()=>this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})),(()=>Promise.resolve()))}unsubscribe(e,t,n){const i=e.name||"*",r=this.createSubscriptionKey(e.uuid,i,t);return this.emitter.removeListener(r,n),this.refCounter.actOnLast(r,(()=>this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:i,topic:t,destinationWindowName:this.me.name})),(()=>new Promise((e=>e)).then((()=>{}))))}processMessage(e){const{payload:{message:t,sourceWindowName:n,sourceUuid:i,topic:r}}=e,o=[this.createSubscriptionKey(i,n,r),this.createSubscriptionKey(i,"*",r),this.createSubscriptionKey("*","*",r)],s={uuid:i,name:n};o.forEach((e=>{this.emitter.emit(e,t,s)}))}emitSubscriverEvent(e,t){const{payload:{targetName:n,uuid:i,topic:r}}=t,o={name:n,uuid:i,topic:r};this.emitter.emit(e,o)}createSubscriptionKey(e,t,n){const i=t||"*";if(!(e&&i&&n))throw new Error("Missing uuid, name, or topic string");return function(...e){return e.map((e=>Buffer.from(`${e}`).toString("base64"))).join("/")}(e,i,n)}onmessage(e){const{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}t.default=c,t.InterAppPayload=class{}},2977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2057),o=n(7138),s=(e,...t)=>new e(...t);class a extends i.Base{async init(e,t=s){this.wire.sendAction("interop-init").catch((e=>{}));const n=await this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`),i=await this.fin.Application.getCurrentSync().getInfo();return t(r.InteropBroker,this.wire,n,i.initialOptions.interopBrokerConfiguration||{})}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch((e=>{})),new o.InteropClient(this.wire,e,t)}}t.default=a},2057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InteropBroker=void 0;const i=n(9659),r=n(7115),o=n(1787);let s=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class a extends i.Base{constructor(e,t,n){super(e),this.channel=t,this.interopClients=new Map,this.contextGroupsById=new Map,n.contextGroups&&(s=n.contextGroups),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,this.setContextGroupMap(),this.wireChannel(t)}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch((e=>{}));const n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?new Error("You must join a context group before you can set context."):new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{const{contextGroupId:t}=n;if(!this.contextGroupsById.has(t))throw new Error(`Client has a context group that isn't in the context group mapping: ${t}.`);const i=a.checkContextIntegrity(e);if(!1===i.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${i.reason}. Context: ${JSON.stringify(e)}`);const r=this.contextGroupsById.get(t),o=e.type;r.set(o,e),this.lastContextMap.set(t,o),Array.from(this.interopClients.values()).filter((e=>e.contextGroupId===t)).forEach((t=>{for(const[,n]of t.contextHandlers)a.isContextTypeCompatible(o,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)}))}}getCurrentContext(e,t){var n;this.wire.sendAction("interop-broker-get-current-context").catch((e=>{}));const i=this.getClientState(t);if(!(null==i?void 0:i.contextGroupId))throw new Error("You must be a member of a context group to call getCurrentContext");const{contextGroupId:r}=i,o=this.contextGroupsById.get(r),s=this.lastContextMap.get(r),a=null!==(n=null==e?void 0:e.contextType)&&void 0!==n?n:s;return o&&a?o.get(a):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch((e=>{})),t){a.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);const n=this.channel.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name));if(!n.length)throw new Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);const i=[];for(const t of n)i.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(i)}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch((e=>{}));const n=this.getClientState(t);if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find((t=>t.id===e)))throw new Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await a.setCurrentContextGroupInClientOptions(t,e);const i=this.contextGroupsById.get(e);for(const[,e]of n.contextHandlers){const{contextType:n,handlerId:r}=e;if(void 0===n)i.forEach(((e,n)=>{this.invokeContextHandler(t,r,e)}));else if(i.has(n)){const e=i.get(n);e&&this.invokeContextHandler(t,r,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch((e=>{})),e){a.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);const t=this.channel.connections.filter((t=>t.uuid===e.uuid&&t.name===e.name));if(!t.length)throw new Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);const n=[];for(const e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch((e=>{}));const t=this.getClientState(e);t&&(t.contextGroupId=void 0),await a.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch((e=>{})),s.map((e=>({...e})))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch((e=>{})),this.getContextGroups().find((t=>t.id===e))}getAllClientsInContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch((e=>{})),Array.from(this.interopClients.values()).filter((t=>t.contextGroupId===e)).map((e=>e.clientIdentity))}async handleFiredIntent(e,t){const n=o.generateOverrideWarning("interopClient.fireIntent","fdc3.raiseIntent","InteropBroker.handleFiredIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch((e=>{}));const n=this.intentClientMap.get(t.name),i=`intent-handler-${e.name}`;if(n){const t=n.get(i);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){const{clientIdentity:e,pendingIntents:n}=t;try{const r=n[n.length-1];await this.channel.dispatch(e,i,r),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(i,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);const n=this.intentClientMap.get(t.name);n&&n.set(i,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntent","fdc3.findIntent","InteropBroker.handleInfoForIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntentsByContext","fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){const n=o.generateOverrideWarning("interopClient.fireIntentForContext","fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntentForContext)}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){var n;const i=null===(n=null==e?void 0:e.interopSnapshotDetails)||void 0===n?void 0:n.contextGroupStates;i&&((null==t?void 0:t.closeExistingWindows)||this.updateExistingClients(i),this.rehydrateContextGroupStates(i))}updateExistingClients(e){this.interopClients.forEach((t=>{const{clientIdentity:n,contextGroupId:i,contextHandlers:r}=t;if(i){const t=e[i];for(const[,e]of Object.entries(t))r.forEach((t=>{const{handlerId:i,contextType:r}=t;a.isContextTypeCompatible(e.type,r)&&this.invokeContextHandler(n,i,e)}))}}))}getContextGroupStates(){return a.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){const t=Object.entries(e);for(const[e,n]of t){const t=Object.entries(n);for(const[n,i]of t)this.contextGroupsById.has(e)?this.contextGroupsById.get(e).set(n,i):console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${e}`)}}contextHandlerRegistered({contextType:e,handlerId:t},n){const i={contextType:e,handlerId:t},r=this.getClientState(n);if(null==r||r.contextHandlers.set(t,i),r&&r.contextGroupId){const{contextGroupId:i}=r,o=this.contextGroupsById.get(i);if(void 0===e)o.forEach(((e,i)=>{this.invokeContextHandler(n,t,e)}));else if(o.has(e)){const i=o.get(e);i&&this.invokeContextHandler(n,t,i)}}}async intentHandlerRegistered(e,t){const{handlerId:n}=e,i=this.intentClientMap.get(t.name),r=null==i?void 0:i.get(n);if(i)if(r){const{pendingIntents:e}=r;r.clientIdentity=t,r.isReady=!0;try{if(e.length>0){const i=e[e.length-1];await this.channel.dispatch(t,n,i),r.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else i.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);const e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}invokeContextHandler(e,t,n){this.channel.dispatch(e,t,n).catch((i=>{console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,i)}))}removeContextHandler({handlerId:e},t){const n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw new Error("Failed to join session context group: must specify group id.");const n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{const n=new r.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw new Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){const t=Object.fromEntries(e),n={};return Object.entries(t).forEach((([e,t])=>{const i=Object.fromEntries(t);n[e]=i})),n}static checkContextIntegrity(e){if(!e)return{isValid:!1,reason:"No context supplied"};if("object"!=typeof e)return{isValid:!1,reason:"Context must be an Object"};if(!e.type)return{isValid:!1,reason:"Context must have a type property"};if(e.id&&"object"!=typeof e.id)return{isValid:!1,reason:"Context id must be an Object populated with key-value identifiers (if set)"};if(e.id){const{id:t}=e,n=Object.keys(t);let i=!1;if(!n.length)return{isValid:!1,reason:"Context id must have at least one key-value identifier"};if(n.forEach((e=>{"string"==typeof e&&"string"==typeof t[e]||(i=!0)})),i)return{isValid:!1,reason:"Context id key-value identifiers must be of type string"}}return e.name&&"string"!=typeof e.name?{isValid:!1,reason:"Context name must be of string type (if set)"}:{isValid:!0}}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(const e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}static async setCurrentContextGroupInClientOptions(e,t){const n=await fin.System.getEntityInfo(e.uuid,e.name);let i;"view"===n.entityType?i=await fin.View.wrap(e):"window"===n.entityType&&(i=await fin.Window.wrap(e)),i?await i.updateOptions({interop:{currentContextGroup:t}}):console.warn(`Setting Current Context Group: Entity with identity ${e.uuid}, ${e.name} is not a window or view. It is a ${n.entityType} instead.`)}wireChannel(e){e.onConnection(((e,t)=>{if(!this.isConnectionAuthorized(e,t))throw new Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw new Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");const n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};(null==t?void 0:t.currentContextGroup)&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=null==t?void 0:t.currentContextGroup),this.interopClients.set(e.endpointId,n)})),e.onDisconnection((e=>{this.interopClients.delete(e.endpointId);const t=this.intentClientMap.get(e.name);t&&e.uuid===fin.me.identity.uuid&&t.forEach((e=>{e.isReady=!1})),this.sessionContextGroupMap.forEach((t=>{t.onDisconnection(e)}))})),e.beforeAction(((e,t,n)=>{if(!this.isActionAuthorized(e,t,n))throw new Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);console.log(e,t,n)})),e.afterAction(console.log),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this))}async isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch((e=>{})),!0}async isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch((e=>{})),!0}}t.InteropBroker=a},7138:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropClient=void 0;const a=n(9659),c=n(822),d=n(1787);class h extends a.Base{constructor(e,t,n){super(e),i.set(this,void 0),r.set(this,void 0),o(this,r,new Map),o(this,i,this.wire.environment.whenReady().then((()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${t}`,{payload:n}))))}async setContext(e){return this.wire.sendAction("interop-client-set-context").catch((e=>{})),(await s(this,i)).dispatch("setContext",{context:e})}async addContextHandler(e,t){this.wire.sendAction("interop-client-add-context-handler").catch((e=>{}));const n=await s(this,i);let r;t?(r=`invokeContextHandler-${t}-${d.generateId()}`,console.warn(`Warning: By providing a contextType (${t}), you are using the experimental addContextHandler. To avoid issues, make sure you are adding your context handlers at the top level in your application.`)):r="invokeContextHandler";const o=d.wrapContextHandler(e,r);return n.register(r,o),await n.dispatch("contextHandlerRegistered",{handlerId:r,contextType:t}),{unsubscribe:async()=>{n.remove(r),await n.dispatch("removeContextHandler",{handlerId:r})}}}async getContextGroups(){return this.wire.sendAction("interop-client-get-context-groups").catch((e=>{})),(await s(this,i)).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch((e=>{}));const n=await s(this,i);if(!e)throw new Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){return this.wire.sendAction("interop-client-remove-from-context-group").catch((e=>{})),(await s(this,i)).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){return this.wire.sendAction("interop-client-fire-intent").catch((e=>{})),(await s(this,i)).dispatch("fireIntent",e)}async registerIntentHandler(e,t){this.wire.sendAction("interop-client-register-intent-handler").catch((e=>{}));const n=await s(this,i),r=`intent-handler-${t}`,o=this.wrapIntentHandler(e,r);try{await n.register(r,o),await n.dispatch("intentHandlerRegistered",{handlerId:r})}catch(e){throw new Error("Unable to register intent handler")}return{unsubscribe:async()=>{n.remove(r)}}}async getCurrentContext(e){return this.wire.sendAction("interop-client-get-current-context").catch((e=>{})),(await s(this,i)).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){return this.wire.sendAction("interop-client-get-info-for-intent").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){return this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){return this.wire.sendAction("interop-client-fire-intent-for-context").catch((e=>{})),(await s(this,i)).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{const t=s(this,r).get(e);if(t)return t.getUserInstance();const n=await s(this,i),{hasConflict:o}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});o&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);const a=new c.default(this.wire,s(this,i),e);return s(this,r).set(e,a),a.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}wrapIntentHandler(e,t){return async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}}}}t.InteropClient=h,i=new WeakMap,r=new WeakMap},7115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(8706);t.default=class{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){const{context:n}=e,r=i.InteropBroker.checkContextIntegrity(n);if(!1===r.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach((e=>{var t;null===(t=e.contextHandlers.get(n.type))||void 0===t||t.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getClientState(e){return this.clients.get(e.endpointId)}handlerAdded(e,t){const{handlerId:n,contextType:i}=e,r=this.getClientState(t);if(!r)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(i){const e=r.contextHandlers.get(i)||[];r.contextHandlers.set(i,[...e,n]);const o=this.contextGroupMap.get(i);o&&this.provider.dispatch(t,n,o)}else r.globalHandler=n,[...this.contextGroupMap.keys()].forEach((e=>{const i=this.contextGroupMap.get(e);i&&this.provider.dispatch(t,n,i)}))}handlerRemoved(e,t){const{handlerId:n}=e,i=this.clients.get(t.endpointId);i?(Array.from(i.contextHandlers).forEach((([,e])=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)})),i.globalHandler===n&&(i.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}}},822:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(9659),a=n(1787);class c extends s.Base{constructor(e,t,n){super(e),i.set(this,void 0),this.id=n,r(this,i,t)}async setContext(e){return this.wire.sendAction("interop-session-context-group-set-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){return this.wire.sendAction("interop-session-context-group-get-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){this.wire.sendAction("interop-session-context-group-add-handler").catch((e=>{}));const n=await o(this,i);let r;return r=t?`sessionContextHandler:invoke-${this.id}-${t}-${a.generateId()}`:`sessionContextHandler:invoke-${this.id}`,n.register(r,a.wrapContextHandler(e,r)),n.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:r,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(r)}}async createUnsubscribeCb(e){const t=await o(this,i);return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:a.wrapInTryCatch(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:a.wrapInTryCatch(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:a.wrapInTryCatch(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}t.default=c,i=new WeakMap},8706:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2977);t.default=o.default,r(n(7138),t),r(n(2057),t)},1787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BROKER_ERRORS=t.generateOverrideWarning=t.generateOverrideError=t.wrapContextHandler=t.wrapInTryCatch=t.generateId=void 0,t.generateId=()=>`${Math.random()}${Date.now()}`,t.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw new Error((t||"")+e)}},t.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}},t.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`,t.generateOverrideWarning=(e,t,n,i)=>{const{uuid:r,name:o}=i;return`Entity with identity: ${r}/${o} has called ${e} or ${t} but ${n} has not been overridden.`},t.BROKER_ERRORS={fireIntent:t.generateOverrideError("fireIntent","handleFiredIntent"),fireIntentForContext:t.generateOverrideError("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:t.generateOverrideError("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:t.generateOverrideError("getInfoForIntentsByContext","handleInfoForIntentsByContext")}},9641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.getBaseMe=void 0;const i=n(4169),r=n(6720),o=n(4997);function s(e,t,n){return{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e,uuid:t,name:n,entityType:e}}t.getBaseMe=s,t.getMe=function(e){const{uuid:t,name:n,entityType:a}=e.me,c={setContext(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},addContextHandler(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getContextGroups(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},joinContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},removeFromContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getAllClientsInContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getInfoForContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")}};switch(a){case"view":return Object.assign(new i.View(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"window":return Object.assign(new o._Window(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"iframe":return Object.assign(new r._Frame(e,{uuid:t,name:n}),s(a,t,n),{interop:c});default:return{...s(a,t,n)}}}},7283:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(6394),o=n(9872);class s extends i.Base{constructor(e,t){super(e),this._channel=t,this._initializer=(...e)=>this.wire.environment.getProviderInitializer().then((t=>t(this.wire.environment)(...e))),this.Layout=new r.LayoutModule(this.wire)}async init(e){const t=null==e?void 0:e.overrideCallback,n=await this.fin.Interop.init(this.fin.me.uuid,null==e?void 0:e.interopOverride);return window.interopBroker=n,this._initializer(t,n)}async wrap(e){return this.wire.sendAction("platform-wrap").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}async getCurrent(){return this.wire.sendAction("platform-get-current").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch((e=>{})),new Promise((async(t,n)=>{try{const{uuid:n}=e,i=await this.fin.Application._create({...e,isPlatformController:!0});i.once("platform-api-ready",(()=>t(this.wrapSync({uuid:n})))),i._run({uuid:n})}catch(e){n(e)}}))}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch((e=>{})),new Promise((async(n,i)=>{try{const i=await this.fin.Application._createFromManifest(e);i.once("platform-api-ready",(()=>n(this.wrapSync({uuid:i.identity.uuid})))),i._run(t)}catch(e){i(e)}}))}}t.default=s},9872:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const o=n(9659),s=n(4999),a=new Map;class c extends o.EmitterBase{constructor(e,t){super(t.wire,"application",e.uuid),this.getClient=e=>{this.wire.sendAction("platform-get-client",this.identity).catch((e=>{}));const t=e||this.identity,{uuid:n}=t;if(!a.has(n)){const e=r(this,i).call(this,n);a.set(n,e)}return a.get(n)},i.set(this,(async e=>{try{const t=`custom-frame-${e}`,n=await this._channel.connect(t,{wait:!1});return n.onDisconnection((()=>{a.delete(e)})),n}catch(t){throw a.delete(e),new Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}})),this.launchLegacyManifest=this.launchContentManifest;const n=s.validateIdentity(e);if(n)throw new Error(n);this._channel=t,this.identity={uuid:e.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch((e=>{}));const i=await this.getClient(),r=await i.dispatch("create-view",{target:t,opts:e,targetView:n});if(!r||s.validateIdentity(r.identity))throw new Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(r)}`);return this.fin.View.wrapSync(r.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch((e=>{}));const t=await this.getClient();e.reason||(e.reason="api-call");const n=await t.dispatch("create-view-container",e);if(!n||s.validateIdentity(n.identity))throw new Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);const{identity:i}=n,r=this.fin.Window.wrapSync(i);return r.name=i.name,r.uuid=i.uuid,r}async quit(){return this.wire.sendAction("platform-quit",this.identity).catch((e=>{})),(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch((e=>{}));const t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){var n;console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch((e=>{}));const i={...e,uuid:null!==(n=e.uuid)&&void 0!==n?n:this.identity.uuid},r=await this.fin.View.wrap(i),o=await r.getOptions();return this.createView(o,t)}async getSnapshot(){return this.wire.sendAction("platform-get-snapshot",this.identity).catch((e=>{})),(await this.getClient()).dispatch("get-snapshot")}async applySnapshot(e,t){this.wire.sendAction("platform-apply-snapshot",this.identity).catch((e=>{}));const n="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";let i;if("string"==typeof e)try{i=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw new Error(`${n}: ${e}`)}else i=e;if(!i.windows)throw new Error(n);const r=await this.getClient();return await r.dispatch("apply-snapshot",{snapshot:i,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch((e=>{}));const t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch((e=>{})),!e)throw new Error("Please provide a serializable object or string to set the context.");const n=await this.getClient(),{entityType:i}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:i,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch((e=>{}));const t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}}t.Platform=c,i=new WeakMap},4386:(e,t)=>{function n(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPresetType=void 0,t.isValidPresetType=n,t.default={isValidPresetType:n}},609:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7283);t.default=o.default,r(n(9872),t)},4210:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0;const s=n(8111),a=n(9659);class c extends a.Base{constructor(){super(...arguments),i.set(this,void 0),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch((e=>{})),!this.fin.me.isWindow)throw new Error("Layout.init can only be called from a Window context.");if(r(this,i))throw new Error("Layout for this window already initialized, please use Layout.replace call to replace the layout.");const t=await this.wire.environment.getManagerConstructor();o(this,i,new t);let{layout:n,containerId:s}=e;n&&console.warn("We recommend using a layout in window options.\n                This layout has not been sanitized and unexpected behavior can occur."),n=n||(await this.fin.Window.getCurrentSync().getOptions()).layout,s=s||"layout-container";const a=document.getElementById(s);return await r(this,i).initManager(),await r(this,i).createLayout(n,a),Object.assign(this.getCurrentSync(),{layoutManager:r(this,i)})}}async wrap(e){return this.wire.sendAction("layout-wrap").catch((e=>{})),new s.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch((e=>{})),new s.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}}t.LayoutModule=c,i=new WeakMap},8111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;const i=n(4999),r=n(4386),o=n(9659);class s extends o.Base{constructor(e,t){super(t),this.replace=async e=>{this.wire.sendAction("layout-replace").catch((e=>{}));const t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch((e=>{}));const n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch((e=>{}));const t=await this.platform.getClient(),{presetType:n}=e;if(!n||!r.isValidPresetType(n))throw new Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};const n=i.validateIdentity(e);if(n)throw new Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){return this.wire.sendAction("layout-get-config").catch((e=>{})),(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}}t.Layout=s},6394:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4210),t),r(n(8111),t)},1746:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2878),o=n(6215);class s extends i.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch((e=>{})),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw new Error("you must pass in a valid SnapshotProvider");const t=await this.fin.InterApplicationBus.Channel.create(o.getSnapshotSourceChannelName(fin.me.identity));t.register("get-snapshot",(async()=>({snapshot:await e.getSnapshot()}))),t.register("apply-snapshot",(({snapshot:t})=>e.applySnapshot(t)))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch((e=>{})),new r.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch((e=>{})),this.wrapSync(e)}}t.default=s},2878:function(e,t,n){var i,r,o,s,a,c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSource=void 0;const h=n(9659),l=n(6215),u=new Map;class p extends h.Base{constructor(e,t){super(e),i.set(this,void 0),r.set(this,(()=>(u.has(this.identity.uuid)||u.set(this.identity.uuid,{eventFired:null,clientPromise:null}),u.get(this.identity.uuid)))),o.set(this,(()=>(d(this,r).call(this).clientPromise||(d(this,r).call(this).clientPromise=d(this,s).call(this)),d(this,r).call(this).clientPromise))),s.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);try{d(this,r).call(this).eventFired||await d(this,a).call(this);const t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection((()=>{d(this,r).call(this).clientPromise=null,d(this,r).call(this).eventFired=null})),t}catch(e){throw d(this,r).call(this).clientPromise=null,new Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}})),a.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);let t,n;const i=new Promise(((e,i)=>{t=e,n=i}));d(this,r).call(this).eventFired=i;const o=async i=>{try{i.channelName===e&&(t(),await this.fin.InterApplicationBus.Channel.removeListener("connected",o))}catch(e){n(e)}};await this.fin.InterApplicationBus.Channel.on("connected",o)})),c(this,i,t)}get identity(){return d(this,i)}async ready(){this.wire.sendAction("snapshot-source-ready").catch((e=>{}));try{await d(this,o).call(this)}catch(e){await d(this,r).call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch((e=>{}));const e=await d(this,o).call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){return this.wire.sendAction("snapshot-source-apply-snapshot").catch((e=>{})),(await d(this,o).call(this)).dispatch("apply-snapshot",{snapshot:e})}}t.SnapshotSource=p,i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap},7153:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1746);t.default=o.default,r(n(2878),t)},6215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSnapshotSourceChannelName=void 0,t.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`},3641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(5007),o=n(4997);class s extends i.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise(((n,i)=>{const r="external-process-exited";let s,a,c,d;"function"==typeof t.listener&&(c=e=>{const n=e||{};a={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},s===e.processUuid&&(t.listener(a),d.removeListener(r,c))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),d=new o._Window(this.wire,this.wire.me),d.on(r,c)),this.wire.sendAction(e,t).then((({payload:e})=>{s=e.data.uuid,n(e.data),a&&s===a.uuid&&(t.listener(a),d.removeListener(r,c))})).catch((e=>{d&&d.removeListener(r,c),i(e)}))}))}getVersion(){return this.wire.sendAction("get-version").then((({payload:e})=>e.data))}clearCache(e){return this.wire.sendAction("clear-cache",e).then((()=>{}))}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then((()=>{}))}exit(){return this.wire.sendAction("exit-desktop").then((()=>{}))}async fetchManifest(e){const{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then((()=>{}))}getAllWindows(){return this.wire.sendAction("get-all-windows").then((({payload:e})=>e.data))}getAllApplications(){return this.wire.sendAction("get-all-applications").then((({payload:e})=>e.data))}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then((({payload:e})=>e.data))}async getCrashReporterState(){const{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){const t=e,n={...t,diagnosticMode:t.diagnosticsMode||t.diagnosticMode},{payload:{data:{diagnosticMode:i,isRunning:r}}}=await this.wire.sendAction("start-crash-reporter",n);return{diagnosticMode:i,diagnosticsMode:i,isRunning:r}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then((({payload:e})=>e.data))}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then((({payload:e})=>e.data))}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then((({payload:e})=>e.data))}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then((({payload:e})=>e.data))}async isAppCertified(e){const{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then((({payload:e})=>e.data.runtimes))}async getInstalledApps(){const{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then((({payload:e})=>e.data))}getMachineId(){return this.wire.sendAction("get-machine-id").then((({payload:e})=>e.data))}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then((({payload:e})=>e.data))}getLogList(){return this.wire.sendAction("list-logs").then((({payload:e})=>e.data))}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then((({payload:e})=>e.data))}getMousePosition(){return this.wire.sendAction("get-mouse-position").then((({payload:e})=>e.data))}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then((({payload:e})=>e.data))}async getAllProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then((({payload:e})=>e.data))}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then((({payload:e})=>e.data))}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then((({payload:e})=>e.data))}getHostSpecs(){return this.wire.sendAction("get-host-specs").then((({payload:e})=>e.data))}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then((()=>{}))}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then((()=>{}))}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then((()=>{}))}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then((()=>{}))}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then((()=>{}))}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then((()=>{}))}downloadAsset(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadAsset only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`asset-download-progress-${o}`,a=`asset-download-error-${o}`,c=`asset-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-asset",l).catch((e=>{h(),i(e)}))}))}downloadRuntime(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`runtime-download-progress-${o}`,a=`runtime-download-error-${o}`,c=`runtime-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-runtime",l).catch((e=>{h(),i(e)}))}))}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then((({payload:e})=>e.data))}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then((({payload:e})=>e.data))}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then((({payload:e})=>e.data))}getCookies(e){const t=this.wire.environment.getUrl(),n=Object.assign(e,{url:t});return this.wire.sendAction("get-cookies",n).then((({payload:e})=>e.data))}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then((()=>{}))}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then((({payload:e})=>e.data))}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then((({payload:e})=>e.data))}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then((({payload:e})=>e.data))}async getServiceConfiguration(e){if("string"!=typeof e.name)throw new Error("Must provide an object with a `name` property having a string value");const{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then((({payload:e})=>e.data))}async getSystemAppConfig(e){if("string"!=typeof e)throw new Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then((({payload:e})=>e.data))}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then((({payload:e})=>e.data))}async launchManifest(e,t){return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:t})).payload.data.manifest}async queryPermissionForCurrentContext(e){const t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){const{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}}t.default=s},240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4169);class s extends i.Base{async create(e){const{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw new Error("Please provide a name property as a string in order to create a View.");return this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap");const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},3163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(4636),r=n(4997);class o extends i.WebContents{constructor(e,t){super(e,t,"view"),this.identity=t,this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout",{...this.identity}).catch((e=>{})),(await this.getCurrentWindow()).getLayout()),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then((({payload:e})=>e.data)),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then((()=>{})),this.getCurrentWindow=async()=>{const{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new r._Window(this.wire,e)}}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){const t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}t.View=o},4169:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(240);t.default=o.default,r(n(3163),t)},4636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebContents=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then((({payload:e})=>e.data))}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then((({payload:e})=>e.data))}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then((({payload:e})=>e.data))}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then((()=>{}))}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then((()=>{}))}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then((()=>{}))}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then((()=>{}))}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then((()=>{}))}print(e){return this.wire.sendAction("print",{...this.identity,options:e}).then((()=>{}))}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then((({payload:e})=>e.data))}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then((()=>{}))}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then((({payload:e})=>e.data))}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then((({payload:e})=>e.data))}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}}t.WebContents=r},2163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(5047);class s extends i.Base{async wrap(e){this.wire.sendAction("window-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}create(e){return this.wire.sendAction("create-window").catch((e=>{})),new o._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},5047:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Window=void 0;const i=n(7264),r=n(4636),o=n(4169);class s extends r.WebContents{constructor(e,t){super(e,t,"window"),this.identity=t}createWindow(e){return this.wire.sendAction("window-create-window",this.identity).catch((e=>{})),new Promise(((t,n)=>{const i="fire-constructor-callback",r=new Promise((e=>{this.on(i,(function t(n){let r;const{success:o}=n,s=n.data,{message:a}=s;r=o?{httpResponseCode:s.httpResponseCode,apiInjected:s.apiInjected}:{message:s.message,networkErrorCode:s.networkErrorCode,stack:s.stack},this.removeListener(i,t),e({message:a,cbPayload:r,success:o})}))}));void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0);const o=this.wire.environment.createChildContent({entityType:"window",options:e});Promise.all([r,o]).then((e=>{const i=e[0];i.success?t(this):n(i);try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}})).catch(n)}))}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then((({payload:e})=>e.data))}getBounds(){return this.wire.sendAction("get-window-bounds",this.identity).then((({payload:e})=>e.data))}center(){return this.wire.sendAction("center-window",this.identity).then((()=>{}))}blur(){return this.wire.sendAction("blur-window",this.identity).then((()=>{}))}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then((()=>{}))}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then((()=>{}))}hide(){return this.wire.sendAction("hide-window",this.identity).then((()=>{}))}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then((()=>{Object.setPrototypeOf(this,null)}))}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then((()=>{}))}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then((({payload:e})=>e.data))}async getCurrentViews(){const{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}flash(){return this.wire.sendAction("flash-window",this.identity).then((()=>{}))}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then((({payload:e})=>e.data))}async getLayout(){if(this.wire.sendAction("window-get-layout",this.identity).catch((e=>{})),!(await this.getOptions()).layout)throw new Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then((({payload:e})=>e.data))}getParentApplication(){return this.wire.sendAction("window-get-parent-application",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity)).then((e=>e.getWindow()))}async getSnapshot(e){const t={area:e,...this.identity};return console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage"),(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then((({payload:e})=>e.data))}getWebWindow(){return this.wire.sendAction("window-get-web-window",this.identity).catch((e=>{})),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window",this.identity).catch((e=>{})),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then((({payload:e})=>e.data))}maximize(){return this.wire.sendAction("maximize-window",this.identity).then((()=>{}))}minimize(){return this.wire.sendAction("minimize-window",this.identity).then((()=>{}))}moveBy(e,t){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,...this.identity}).then((()=>{}))}moveTo(e,t){return this.wire.sendAction("move-window",{left:e,top:t,...this.identity}).then((()=>{}))}resizeBy(e,t,n){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}resizeTo(e,t,n){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}restore(){return this.wire.sendAction("restore-window",this.identity).then((()=>{}))}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then((()=>{}))}setBounds(e){return this.wire.sendAction("set-window-bounds",{...e,...this.identity}).then((()=>{}))}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then((()=>{}))}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then((()=>{}))}updateOptions(e){return this.wire.sendAction("update-window-options",{options:e,...this.identity}).then((()=>{}))}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then((()=>{}))}async showPopupMenu(e){const{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then((()=>{}))}}t._Window=s},4997:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2163);t.default=o.default,r(n(5047),t)},1681:(e,t,n)=>{var i;t.H=void 0;const r=n(6465),o=n(6545),s=n(9298);class a extends r.EventEmitter{connect(e){throw new Error("You are not running in OpenFin.")}connectSync(){throw new Error("You are not running in OpenFin.")}send(e){throw new Error("You are not running in OpenFin.")}shutdown(){throw new Error("You are not running in OpenFin.")}constructor(){super()}}class c{constructor(){this.childViews=!0}getDefaultChannelOptions(){throw new Error("Method not implemented.")}getRtcPeer(){throw new Error("Method not implemented.")}getManagerConstructor(){throw new Error("Method not implemented.")}getProviderInitializer(){throw new Error("Method not implemented.")}writeToken(e,t){throw new Error("Method not implemented.")}retrievePort(e){throw new Error("Method not implemented.")}getNextMessageId(){throw new Error("Method not implemented.")}getRandomId(){throw new Error("Method not implemented.")}createChildContent(e){throw new Error("Method not implemented.")}getWebWindow(e){throw new Error("Method not implemented.")}getCurrentEntityIdentity(){throw new Error("Method not implemented.")}getCurrentEntityType(){return"unknown"}raiseEvent(e,t){throw new Error("Method not implemented.")}getUrl(){throw new Error("Method not implemented.")}whenReady(){throw new Error("Method not implemented.")}}t.H="undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.fin)||(()=>{const e=new c,t=new s.default(a,e,{uuid:"",name:""});return new o.default(t)})()},8068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFin=t.registerFin=void 0;const n=new WeakMap;t.registerFin=function(e,t){n.set(e,t)},t.getFin=function(e){const t=n.get(e);if(!t)throw new Error("Could not locate fin api for given transport");return t}},5007:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.NotSupportedError=t.NotImplementedError=t.NoAckError=t.DuplicateCorrelationError=t.UnexpectedActionError=t.DisconnectedError=void 0;class n extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}t.DisconnectedError=n;class i extends Error{}t.UnexpectedActionError=i;class r extends Error{}t.DuplicateCorrelationError=r;class o extends Error{}t.NoAckError=o;class s extends Error{}t.NotImplementedError=s;class a extends Error{}t.NotSupportedError=a;class c extends Error{constructor(e){const t=e.payload||e,{reason:n,error:i}=t;super(n),this.name="RuntimeError",(null==i?void 0:i.stack)&&(this.stack=i.stack)}}t.RuntimeError=c},9298:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(6465),a=n(8624),c=n(5007),d=n(2734),h=n(9641);class l extends s.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new d.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],i.set(this,void 0),this.connectSync=()=>{o(this,i).connectSync()},this.getPort=()=>{if("NodeEnvironment"!==this.environment.constructor.name)throw new c.NotImplementedError("Not Implemented");return o(this,i).wire.url.split(":").slice(-1)[0]},r(this,i,new e(this.onmessage.bind(this))),this.environment=t,this.sendRaw=o(this,i).send.bind(o(this,i)),this.registerMessageHandler(this.handleMessage.bind(this)),o(this,i).on("disconnected",(()=>{for(const[,{reject:e}]of this.wireListeners)e("Remote connection has closed");this.wireListeners.clear(),this.emit("disconnected")}));const{uuid:s,name:a}=n,l=this.environment.getCurrentEntityType();this.me=h.getBaseMe(l,s,a)}shutdown(){return o(this,i).shutdown()}async connect(e){if(a.isExistingConnectConfig(e))return this.connectByPort(e);if(a.isNewConnectConfig(e)){const t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectByPort(e){const{address:t,uuid:n}=e,r={...e,type:"file-token"},s=o(this,i);await s.connect(t);const a=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==a.action)throw new c.UnexpectedActionError(a.action);const{token:d}=a.payload;await this.environment.writeToken(a.payload.file,a.payload.token);const h=await this.sendAction("request-authorization",r,!0);if("authorization-response"!==h.action)throw new c.UnexpectedActionError(h.action);if(!0!==h.payload.success)throw new c.RuntimeError(h.payload);return d}sendAction(e,t={},n=!1){return new Promise(((r,s)=>{const a=this.environment.getNextMessageId(),c={action:e,payload:t,messageId:a},d=o(this,i);return this.addWireListener(a,r,s,n),d.send(c).catch(s)}))}ferryAction(e){return new Promise(((t,n)=>{const r=this.environment.getNextMessageId();e.messageId=r;const s=e=>{t(e.payload)};return o(this,i).send(e).then((()=>this.addWireListener(r,s,n,!1))).catch(n)}))}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,i){i?this.uncorrelatedListener=t:this.wireListeners.has(e)?n(new c.DuplicateCorrelationError(String(e))):this.wireListeners.set(e,{resolve:t,reject:n})}onmessage(e){for(const t of this.messageHandlers)t.call(null,e)}handleMessage(e){const t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{const{resolve:n,reject:i}=this.wireListeners.get(t);"ack"!==e.action?i(new c.NoAckError(e.action)):"payload"in e?e.payload.success?n.call(null,e):i(new c.RuntimeError(e.payload)):i(new c.RuntimeError(e)),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}i=new WeakMap,t.default=l},8624:(e,t)=>{function n(e){return"string"==typeof e.manifestUrl}function i(e){return r(e)&&"string"==typeof e.address}function r(e){return"string"==typeof e.uuid}function o(e){return e.runtime&&"string"==typeof e.runtime.version}function s(e){return r(e)&&o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalConnectConfig=t.isPortDiscoveryConfig=t.isNewConnectConfig=t.isExistingConnectConfig=t.isExternalConfig=void 0,t.isExternalConfig=n,t.isExistingConnectConfig=i,t.isNewConnectConfig=s,t.isPortDiscoveryConfig=function(e){return n(e)&&o(e)||s(e)},t.isInternalConnectConfig=function(e){return i(e)||s(e)}},2366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPOJO=void 0,t.errorToPOJO=function(e){return{stack:e.stack,message:e.message,toString:e.toString}}},3917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustiveCheck=void 0,t.exhaustiveCheck=function(e,t){throw new Error(`Unsupported value: ${e}${t?`\n Supported values are: ${t.join("")}`:""}`)}},3442:(e,t)=>{async function n(e){const t=[];for(const n of e){const e=await n();t.push(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMapSerial=t.serial=t.promiseMap=t.promisify=void 0,t.promisify=function(e){return(...t)=>new Promise(((n,i)=>{e(...t,((e,t)=>e?i(e):n(t)))}))},t.promiseMap=async function(e,t){return Promise.all(e.map(t))},t.serial=n,t.promiseMapSerial=async function(e,t){return n(e.map(((e,n,i)=>()=>t(e,n,i))))}},3127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.topicRefMap=new Map}incRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t+1;n=i,this.topicRefMap.set(e,i)}else this.topicRefMap.set(e,1),n=1;return n}decRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t-1;this.topicRefMap.set(e,i),n=i}else n=-1;return n}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}}},2300:(e,t)=>{function n(e){return[...e.split(".").reverse().entries()].reduce(((e,[t,n])=>e+ +n*1e4**t),0)}function i(e,t){return n(e)>=n(t)}function r(e){return e.split("/")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeUuidMeetsMinimumRuntimeVersion=t.parseRuntimeUuid=t.meetsMinimumRuntimeVersion=void 0,t.meetsMinimumRuntimeVersion=i,t.parseRuntimeUuid=r,t.runtimeUuidMeetsMinimumRuntimeVersion=function(e,t){return i(r(e),t)}},4999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateIdentity=void 0,t.validateIdentity=function(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t}},6465:e=>{var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,d;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(e))>0&&s.length>r&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,d=h,console&&console.warn&&console.warn(d)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function u(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):w(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var d=c.length,h=w(c,d);for(n=0;n<d;++n)i(h[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{n.d(i,{dq:()=>a,MS:()=>s,xQ:()=>c,sO:()=>fe,Zu:()=>ge,I3:()=>me,$U:()=>ve,i0:()=>Ce,cX:()=>d,_W:()=>h,U$:()=>w,U7:()=>y,rd:()=>pe});var e,t,r,o=n(1681);class s extends Error{constructor(e="An unexpected error has occurred",t){var n;super(e),t&&(this.innerError=t&&t),this.stack=null===(n=this.stack)||void 0===n?void 0:n.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class a extends s{constructor(e="Failed to execute adapter function",t){super(e,t)}}class c extends s{constructor(e="Failed to raise event",t){super(e,t)}}class d extends s{constructor(e="Failed to initialize adapter",t){super(e,t)}}class h extends s{constructor(e="Invalid parameter value",t){super(e,t)}}!function(e){e.ActivateWorkbook="ActivateWorkbook",e.ActivateWorksheet="ActivateWorksheet",e.AddWorksheet="AddWorksheet",e.CalculateWorkbook="CalculateWorkbook",e.CalculateWorksheet="CalculateWorksheet",e.ClearAllCells="ClearAllCells",e.ClearAllCellValues="ClearAllCellValues",e.ClearAllCellFormatting="ClearAllCellFormatting",e.ClearCellValues="ClearCellValues",e.ClearCellFormatting="ClearCellFormatting",e.ClearCells="ClearCells",e.CloseWorkbook="CloseWorkbook",e.CreateWorkbook="CreateWorkbook",e.DeleteWorksheet="DeleteWorksheet",e.DeregisterEvent="DeregisterEvent",e.EventFired="EventFired",e.GetCalculationMode="GetCalculationMode",e.GetCells="GetCells",e.GetWorkbookById="GetWorkbookById",e.GetWorkbookName="GetWorkbookName",e.GetWorkbooks="GetWorkbooks",e.GetWorksheetById="GetWorksheetById",e.GetWorksheetByName="GetWorksheetByName",e.GetWorksheetName="GetWorksheetName",e.GetWorksheets="GetWorksheets",e.LogMessage="LogMessage",e.OpenWorkbook="OpenWorkbook",e.ProtectWorksheet="ProtectWorksheet",e.RegisterEvent="RegisterEvent",e.SaveWorkbook="SaveWorkbook",e.SaveWorkbookAs="SaveWorkbookAs",e.SetCellValues="SetCellValues",e.SetCellFormatting="SetCellFormatting",e.SetCellName="SetCellName",e.SetWorksheetName="SetWorksheetName",e.FilterCells="FilterCells",e.QuitApplication="QuitApplication"}(e||(e={})),function(e){e.Activate="Activate",e.AddWorksheet="AddWorksheet",e.Change="Change",e.Close="Close",e.Deactivate="Deactivate",e.DeleteWorksheet="DeleteWorksheet"}(t||(t={})),function(e){e.Workbook="Workbook",e.Worksheet="Worksheet"}(r||(r={}));const l="1.3.0";let u=!1;const p="[@openfin/excel]",w=()=>{u=!1},y=()=>{u=!0,g("v1.3.0")},f=(e,t)=>{u&&(e.innerError?console.error(t?`${p} ${t}`:p,e,"\n\n(inner)",e.innerError):console.error(t?`${p} ${t}`:p,e))},g=(...e)=>{u&&console.log(p,...e)},m=(...e)=>{u&&console.warn(p,...e)};o.H||Object.assign(window,{fin:{}}),Object.assign(o.H,{Integrations:{Excel:{enableLogging:y,disableLogging:w}}});const v=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),C=new Map,I=(t,n)=>async()=>{g(`Worksheet: Activate (${n})`);try{await t.dispatch(e.ActivateWorksheet,n)}catch(e){throw new a}},x=(t,n)=>async()=>{g(`Worksheet: Calculate (${n})`);try{await t.dispatch(e.CalculateWorksheet,n)}catch(e){throw new a}},A=(t,n)=>async()=>{g(`Worksheet: Clear all cell values (${n})`);try{await t.dispatch(e.ClearAllCellValues,n)}catch(e){throw new a}},b=(t,n)=>async()=>{g(`Worksheet: Clear all cell formatting (${n})`);try{await t.dispatch(e.ClearAllCellFormatting,n)}catch(e){throw new a}},E=(t,n)=>async()=>{g(`Worksheet: Clear all cells (${n})`);try{await t.dispatch(e.ClearAllCells,n)}catch(e){throw new a}},P=(t,n)=>async i=>{g(`Worksheet: Clear cell values; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellValues,r)}catch(e){throw new a}},k=(t,n)=>async i=>{g(`Worksheet: Clear cell formatting; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellFormatting,r)}catch(e){throw new a}},M=(t,n)=>async i=>{g(`Worksheet: Clear cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCells,r)}catch(e){throw new a}},_=(e,t)=>(n,i,r=1e3)=>{if(Number.isNaN(r)||r<=0)throw new s("Update interval must be a positive number");const o=v();g(`Worksheet: Create data stream; streamId:${o}; cellRange:${n}; updateInterval:${r} (${t})`);const a={close:()=>{g(`Closed stream (${o})`),(e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(t=n.timer)&&void 0!==t?t:void 0)&&T(e),C.delete(e)}catch(e){throw f(e),e}})(o)},cellRange:n,id:o,start:()=>{g(`Started streaming (${o})`),B(o,i,e,t)},stop:()=>{g(`Stopped streaming (${o})`),T(o)},updateInterval:r,worksheetId:t};return C.set(o,{dataStream:a}),a},S=(e,t,n,i)=>{const o={eventTarget:r.Worksheet,objectId:t};return{objectId:t,activate:I(e,t),addEventListener:n(e,o),calculate:x(e,t),clearAllCellFormatting:b(e,t),clearAllCells:E(e,t),clearAllCellValues:A(e,t),clearCellFormatting:k(e,t),clearCells:M(e,t),clearCellValues:P(e,t),createDataStream:_(e,t),delete:O(e,t),filterCells:W(e,t),getCells:F(e,t),getName:L(e,t),protect:R(e,t),removeEventListener:i(e),setCellFormatting:$(e,t),setCellName:G(e,t),setCellValues:j(e,t),setName:N(e,t)}},O=(t,n)=>async()=>{g(`Worksheet: Delete (${n})`);try{await t.dispatch(e.DeleteWorksheet,n)}catch(e){throw new a}},W=(t,n)=>async(i,r,o,s,c,d=!0)=>{g(`Worksheet: Filter cells; cellRange:${i} (${n})`,{columnIndex:r,filterOperator:o,criteria1:s,criteria2:c,visibleDropDown:d});const h={cellRange:i,criteria1:s,criteria2:c,columnIndex:r,filterOperator:o,objectId:n,visibleDropDown:d};try{await t.dispatch(e.FilterCells,h)}catch(e){throw new a}},F=(t,n)=>async i=>{g(`Worksheet: Get cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};let o=[];try{o=await t.dispatch(e.GetCells,r),g(`${i}:`,o)}catch(e){throw new a}return o},L=(t,n)=>async()=>{g(`Worksheet: Get name (${n})`);try{return await t.dispatch(e.GetWorksheetName,n)}catch(e){throw new a}},R=(t,n)=>async()=>{g(`Worksheet: Protect (${n})`);try{await t.dispatch(e.ProtectWorksheet,n)}catch(e){throw new a}},$=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell formatting; cellRange:${i} (${n})`,r);const o={cellRange:i,formatting:r,objectId:n};try{await t.dispatch(e.SetCellFormatting,o)}catch(e){throw new a}},G=(t,n)=>async(i,r)=>{const o=r.trim();let s;if(!o)throw s=new h("Cell range name cannot be an empty string"),f(s),s;if(o.length>255)throw s=new h("Cell range name must be 255 characters or less"),f(s),s;if(/[^a-z0-9_.?\\"']/.test(o))throw s=new h("Cell range name contains invalid characters"),f(s),s;if(/^\d|\d$/.test(o))throw s=new h("Cell range name must not start or end with a number"),f(s),s;g(`Worksheet: Set cell name; cellRange:${i}; newCellRangeName:${o} (${n})`);const c={cellRange:i,name:o,objectId:n};try{await t.dispatch(e.SetCellName,c)}catch(e){throw new a}},j=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell values; cellRange:${i} (${n})`,r);const o={cellRange:i,objectId:n,valuesMap:r};try{await t.dispatch(e.SetCellValues,o)}catch(e){throw new a}},N=(t,n)=>async i=>{const r=i.trim();let o;if(!r)throw o=new h("Worksheet name cannot be an empty string"),f(o),o;if(r.length>31)throw o=new h("Worksheet name must be 31 characters or less"),f(o),o;g(`Worksheet: Set name; newWorksheetName:${r} (${n})`);const s={newWorksheetName:r,objectId:n};try{return await t.dispatch(e.SetWorksheetName,s)}catch(e){throw new a}},B=(e,t,n,i)=>{var r;try{const o=C.get(e);if(!o)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(r=o.timer)&&void 0!==r?r:void 0)&&T(e);const{cellRange:a,updateInterval:c}=o.dataStream,d=async()=>{const r=await t();try{await j(n,i)(a,[[r]])}catch(t){m(`Unable to update cell range for stream with id ${e}: ${null==t?void 0:t.message}`)}},h=window.setInterval(d,c);o.timer=h}catch(e){throw f(e),e}},T=e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);if(void 0===(null!==(t=n.timer)&&void 0!==t?t:void 0))return;window.clearInterval(n.timer),n.timer=void 0}catch(e){throw f(e),e}},D=new Map,V=(n,i)=>async(r,o)=>{if(!i||!i.eventTarget||!i.objectId){const e=new c("Event registration missing required values");throw f(e),e}const s=Object.keys(t).find((e=>e.toLowerCase()===r.toLowerCase()));if(!s){const e=new c(`Unsupported event name: ${r}`);throw f(e),e}i.eventName=t[s],g("Registering event",i);try{const t=await n.dispatch(e.RegisterEvent,i);D.set(t,o)}catch(e){throw new a(void 0,e)}},H=t=>async n=>{let i;for(const[e,t]of D)if(t===n){i=e;break}if(!i)throw new c;g("Deregistering event:",i);try{await t.dispatch(e.DeregisterEvent,i),D.delete(i)}catch(e){throw new a}},U=(t,n)=>async()=>{g(`Workbook: Activate (${n})`);try{return await t.dispatch(e.ActivateWorkbook,n)}catch(e){throw new a}},z=(t,n,i,r)=>async()=>{let o;g(`Workbook: Add worksheet (${n})`);try{o=await t.dispatch(e.AddWorksheet,n)}catch(e){throw new a}return S(t,o,i,r)},q=(t,n)=>async()=>{g(`Workbook: Calculate (${n})`);try{await t.dispatch(e.CalculateWorkbook,n)}catch(e){throw new a}},J=(t,n)=>async()=>{g(`Workbook: Close (${n})`);try{return await t.dispatch(e.CloseWorkbook,n)}catch(e){throw new a}},K=(e,t,n,i)=>{const o={eventTarget:r.Workbook,objectId:t};return{objectId:t,activate:U(e,t),addWorksheet:z(e,t,n,i),addEventListener:n(e,o),calculate:q(e,t),close:J(e,t),getCalculationMode:Y(e,t),getName:Q(e,t),getWorksheetByName:Z(e,t,n,i),getWorksheets:X(e,t,n,i),removeEventListener:i(e),save:ee(e,t),saveAs:te(e,t)}},Y=(t,n)=>async()=>{g("Workbook: Get calculation mode");try{return await t.dispatch(e.GetCalculationMode,n)}catch(e){throw new a}},Q=(t,n)=>async()=>{g(`Workbook: Get name (${n})`);try{return await t.dispatch(e.GetWorkbookName,n)}catch(e){throw new a}},Z=(t,n,i,r)=>async o=>{let s;g(`Workbook: Get worksheet by name: ${o} (${n})`);try{if(s=await t.dispatch(e.GetWorksheetByName,{objectId:n,worksheetName:o}),null===s)return null}catch(e){throw new a}return S(t,s,i,r)},X=(t,n,i,r)=>async()=>{let o;g(`Workbook: Get worksheets (${n})`);try{o=await t.dispatch(e.GetWorksheets,n)}catch(e){throw new a}return o.map((e=>S(t,e,i,r)))},ee=(t,n)=>async()=>{g(`Workbook: Save (${n})`);try{return await t.dispatch(e.SaveWorkbook,n)}catch(e){throw new a}},te=(t,n)=>async i=>{g(`Workbook: Save as; filePath:${i} (${n})`);try{return await t.dispatch(e.SaveWorkbookAs,{filePath:i,objectId:n})}catch(e){throw new a}},ne=t=>async()=>{let n;g("Application: Create workbook");try{n=await t.dispatch(e.CreateWorkbook)}catch(e){throw new a}return K(t,n,V,H)},ie=t=>async n=>{let i;g(`Application: Get workbook; id:${n}`);try{i=await t.dispatch(e.GetWorkbookById,n)}catch(e){throw new a}return K(t,i,V,H)},re=t=>async()=>{let n;g("Application: Get workbooks");try{n=await t.dispatch(e.GetWorkbooks)}catch(e){throw new a}return n.map((e=>K(t,e,V,H)))},oe=t=>async n=>{g(`Application: Get worksheet; id:${n}`);try{n=await t.dispatch(e.GetWorksheetById,n)}catch(e){throw new a}return S(t,n,V,H)},se=t=>async n=>{let i;g(`Application: Open workbook; filePath:${n}`);try{i=await t.dispatch(e.OpenWorkbook,n)}catch(e){throw new a}return K(t,i,V,H)},ae=t=>async(n=!0)=>{g(`Application: Quit; displayAlerts:${n}`);try{return await t.dispatch(e.QuitApplication,n)}catch(e){throw new a}};var ce;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(ce||(ce={}));const de="excel-adapter",he=v();let le,ue;const pe=async()=>{try{if(!le||!await(async e=>(await o.H.InterApplicationBus.Channel.getAllChannels()).some((t=>t.channelName===e)))(he)){await(async()=>{var e;const t=null===(e=(await o.H.Application.getCurrentSync().getManifest()).appAssets)||void 0===e?void 0:e.find((e=>e.alias===de));if(t)return void m("Detected adapter package in app manifest appAssets",t);if(await ye())return void g("Using existing adapter package");const n={alias:de,src:"https://cdn.openfin.co/release/integrations/excel/1.3.0/OpenFin.Excel.zip",target:"OpenFin.Excel.exe",version:l};g("Downloading adapter package",n);try{await o.H.System.downloadAsset(n,(()=>{}))}catch(e){throw f("Unable to download adapter package"),e}})();const e=await o.H.System.getRuntimeInfo(),t=o.H.Application.me.uuid,n=e.version,i=e.securityRealm;g("Initializing adapter",{appId:t,channelName:he,runtimeVersion:n,securityRealm:i}),le=await o.H.System.launchExternalProcess({alias:de,arguments:`${t} ${n} ${i} ${he}`}),g(`Adapter running with uuid ${le.uuid}`)}const i=o.H.InterApplicationBus.Channel.connect(he,{payload:{version:l}}),s=new Promise((e=>{setTimeout(e,2e4)})).then((()=>{throw new Error("Connection to adapter timed out")}));ue=await Promise.race([i,s]),g(`Connected to adapter on channel ${he}`),ue.register(e.LogMessage,we),ue.register(e.EventFired,(n=ue,e=>{const{eventRegistrationId:i}=e,o=D.get(i);if(!o)throw new c(`No registered event listener found for id: ${i}`);g("Event payload received",e),((e,n,i)=>{var o,s;switch(i.eventTarget){case r.Workbook:switch(null===(o=i.eventName)||void 0===o?void 0:o.toUpperCase()){case t.Activate.toUpperCase():case t.Close.toUpperCase():case t.Deactivate.toUpperCase():return e();case t.AddWorksheet.toUpperCase():case t.DeleteWorksheet.toUpperCase():return e(S(n,i.worksheetObjectId,V,H));default:throw new c(`Unexpected workbook event: ${i.eventName}`)}case r.Worksheet:switch(null===(s=i.eventName)||void 0===s?void 0:s.toUpperCase()){case t.Activate.toUpperCase():return e();case t.Change.toUpperCase():return e(i.changedCells);case t.Deactivate.toUpperCase():return e();default:throw new c(`Unexpected worksheet event: ${i.eventName}`)}default:throw new c(`Unexpected event target: ${i.eventTarget}`)}})(o,n,e)}))}catch(e){const t=new d(void 0,e);throw f(t),t}var n;return{adapter:{channelName:he,version:l},createWorkbook:ne(ue),getWorkbookById:ie(ue),getWorkbooks:re(ue),getWorksheetById:oe(ue),openWorkbook:se(ue),quit:ae(ue)}},we=e=>{const{message:t,type:n}=e,i="[adapter]";switch(n){case ce.Error:f(t,i);break;case ce.Info:g(i,t);break;case ce.Warn:m(i,t)}},ye=async()=>{try{const e=await o.H.System.getAppAssetInfo({alias:de});return e&&e.version===l}catch(e){return!1}};var fe,ge,me,ve,Ce;!function(e){e.Continuous="Continuous",e.Dash="Dash",e.DashDot="DashDot",e.DashDotDot="DashDotDot",e.Dot="Dot",e.Double="Double",e.SlantDashDot="SlantDashDot",e.None="None"}(fe||(fe={})),function(e){e.Center="Center",e.CenterAcrossSelection="CenterAcrossSelection",e.Distributed="Distributed",e.Fill="Fill",e.General="General",e.Justify="Justify",e.Left="Left",e.Right="Right"}(ge||(ge={})),function(e){e.Automatic="Automatic",e.Checker="Checker",e.CrissCross="CrissCross",e.Down="Down",e.Gray16="Gray16",e.Gray25="Gray25",e.Gray50="Gray50",e.Gray75="Gray75",e.Gray8="Gray8",e.Grid="Grid",e.Horizontal="Horizontal",e.LightDown="LightDown",e.LightHorizontal="LightHorizontal",e.LightUp="LightUp",e.LightVertical="LightVertical",e.LinearGradient="LinearGradient",e.None="None",e.RectangularGradient="RectangularGradient",e.SemiGray75="SemiGray75",e.Solid="Solid",e.Up="Up",e.Vertical="Vertical"}(me||(me={})),function(e){e.Bottom="Bottom",e.Center="Center",e.Distributed="Distributed",e.Justify="Justify",e.Top="Top"}(ve||(ve={})),function(e){e.And="And",e.Or="Or",e.Top10Items="Top10Items",e.Bottom10Items="Bottom10Items",e.Top10Percent="Top10Percent",e.Bottom10Percent="Bottom10Percent",e.FilterValues="FilterValues"}(Ce||(Ce={}))})();var r=i.dq,o=i.MS,s=i.xQ,a=i.sO,c=i.Zu,d=i.I3,h=i.$U,l=i.i0,u=i.cX,p=i._W,w=i.U$,y=i.U7,f=i.rd;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!*****************************!*\
  !*** ./client/src/excel.ts ***!
  \*****************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _finos_fdc3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @finos/fdc3 */ "../../node_modules/@finos/fdc3/dist/fdc3.esm.js");
/* harmony import */ var _openfin_excel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/excel */ "../../node_modules/@openfin/excel/openfin.excel.js");


const KNOWN_INSTRUMENTS = ["TSLA", "MSFT", "AAPL"];
let excel;
let openWorkbooks;
let selectedWorkbookIndex;
let openWorksheets;
let selectedWorksheetIndex;
document.addEventListener("DOMContentLoaded", async () => {
    try {
        await init();
    }
    catch (error) {
        console.error(error);
    }
});
async function init() {
    try {
        const resultsContainer = document.querySelector("#results-container");
        resultsContainer.style.display = "none";
        excel = await (0,_openfin_excel__WEBPACK_IMPORTED_MODULE_1__.getExcelApplication)();
        await populateWorkbooks();
        const openExcelButton = document.querySelector("#open-excel");
        openExcelButton.addEventListener("click", async () => {
            await openExcel();
        });
        const refreshWorkbookButton = document.querySelector("#workbook-refresh");
        refreshWorkbookButton.addEventListener("click", async () => populateWorkbooks());
        const refreshWorksheetButton = document.querySelector("#worksheet-refresh");
        refreshWorksheetButton.addEventListener("click", async () => populateWorksheets());
        const openWorkbooksSelect = document.querySelector("#workbooks");
        openWorkbooksSelect.addEventListener("change", async (e) => selectWorkbook(e.target.value));
        const openWorksheetsSelect = document.querySelector("#worksheets");
        openWorksheetsSelect.addEventListener("change", async (e) => selectWorksheet(e.target.value));
        const setValueButton = document.querySelector("#set-value");
        setValueButton.addEventListener("click", async () => {
            await setCellValue();
        });
    }
    catch (err) {
        showError(err);
    }
}
function showError(err) {
    const errDom = document.querySelector("#error");
    errDom.innerHTML = err.message;
}
async function openExcel() {
    try {
        // Open the select work book and sheet
        // if anything throws an exception just open a new workbook
        await selectWorkbook(openWorkbooks[selectedWorkbookIndex].name);
        await selectWorksheet(openWorksheets[selectedWorksheetIndex].name);
    }
    catch {
        await excel.createWorkbook();
        await populateWorkbooks();
    }
}
async function populateWorkbooks() {
    if (excel) {
        selectedWorkbookIndex = undefined;
        const refreshButton = document.querySelector("#workbook-refresh");
        refreshButton.disabled = true;
        const select = document.querySelector("#workbooks");
        select.disabled = true;
        select.innerHTML = "";
        openWorkbooks = [];
        try {
            const workbooks = await excel.getWorkbooks();
            for (const book of workbooks) {
                const name = await book.getName();
                openWorkbooks.push({
                    book,
                    name
                });
            }
            const optionEmpty = document.createElement("option");
            optionEmpty.innerHTML = "----Select workbook----";
            optionEmpty.value = "";
            optionEmpty.selected = true;
            optionEmpty.disabled = true;
            select.append(optionEmpty);
            for (const openWorkbook of openWorkbooks) {
                const option = document.createElement("option");
                option.innerHTML = openWorkbook.name;
                option.value = openWorkbook.name;
                select.append(option);
            }
        }
        catch (err) {
            console.error(err);
            showError(err);
        }
        finally {
            select.disabled = false;
            refreshButton.disabled = false;
        }
    }
}
async function selectWorkbook(name) {
    const newWorkbookIndex = openWorkbooks.findIndex((w) => w.name === name);
    if (newWorkbookIndex !== selectedWorkbookIndex) {
        selectedWorkbookIndex = newWorkbookIndex;
        if (newWorkbookIndex >= 0) {
            await openWorkbooks[selectedWorkbookIndex].book.activate();
        }
    }
    await populateWorksheets();
}
async function populateWorksheets() {
    if (excel) {
        selectedWorksheetIndex = undefined;
        const refreshButton = document.querySelector("#worksheet-refresh");
        refreshButton.disabled = true;
        const select = document.querySelector("#worksheets");
        select.disabled = true;
        select.innerHTML = "";
        openWorksheets = [];
        const workbook = openWorkbooks[selectedWorkbookIndex];
        if (workbook) {
            try {
                const sheets = await workbook.book.getWorksheets();
                for (const sheet of sheets) {
                    const name = await sheet.getName();
                    openWorksheets.push({
                        sheet,
                        name
                    });
                }
                const optionEmpty = document.createElement("option");
                optionEmpty.innerHTML = "----Select worksheet----";
                optionEmpty.value = "";
                optionEmpty.selected = true;
                optionEmpty.disabled = true;
                select.append(optionEmpty);
                for (const openWorksheet of openWorksheets) {
                    const option = document.createElement("option");
                    option.innerHTML = openWorksheet.name;
                    option.value = openWorksheet.name;
                    select.append(option);
                }
            }
            catch (err) {
                console.error(err);
                showError(err);
            }
            finally {
                select.disabled = false;
                refreshButton.disabled = false;
            }
        }
    }
}
async function selectWorksheet(name) {
    const newWorksheetIndex = openWorksheets.findIndex((w) => w.name === name);
    if (newWorksheetIndex !== selectedWorksheetIndex) {
        const oldWorksheet = openWorksheets[selectedWorksheetIndex];
        if (oldWorksheet) {
            await oldWorksheet.sheet.removeEventListener(handleCellChange);
        }
        selectedWorksheetIndex = newWorksheetIndex;
        if (selectedWorksheetIndex >= 0) {
            await openWorksheets[selectedWorksheetIndex].sheet.activate();
            await openWorksheets[selectedWorksheetIndex].sheet.addEventListener("change", handleCellChange);
            const resultsContainer = document.querySelector("#results-container");
            resultsContainer.style.display = "flex";
            document.querySelector("#cell-location").disabled = false;
            document.querySelector("#cell-value").disabled = false;
            document.querySelector("#set-value").disabled = false;
        }
    }
}
async function handleCellChange(cells) {
    const cellContainer = document.querySelector("#cell-changes-container");
    cellContainer.innerHTML = JSON.stringify(cells, undefined, "  ");
    for (const cell of cells) {
        if (KNOWN_INSTRUMENTS.includes(cell.value)) {
            await broadcastInstrument(cell.value);
        }
    }
}
async function setCellValue() {
    if (openWorksheets && selectedWorksheetIndex !== undefined) {
        const cellLocation = document.querySelector("#cell-location");
        const cellValue = document.querySelector("#cell-value");
        await openWorksheets[selectedWorksheetIndex].sheet.setCellValues(cellLocation.value, [[cellValue.value]]);
    }
}
async function broadcastInstrument(instrument) {
    const broadcastElement = document.querySelector("#broadcast-instrument");
    if (window.fdc3) {
        try {
            const fdcInstrument = {
                type: "fdc3.instrument",
                id: {
                    ticker: instrument
                }
            };
            const channel = await (0,_finos_fdc3__WEBPACK_IMPORTED_MODULE_0__.getCurrentChannel)();
            channel.broadcast(fdcInstrument);
            broadcastElement.value = instrument;
        }
        catch (err) {
            broadcastElement.value = err.message;
        }
    }
    else {
        broadcastElement.textContent = "No FD3 Channel available";
    }
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhjZWwuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOEJBQThCOztBQUUvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DOztBQUVyQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLE1BQU07QUFDTixlQUFlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLFdBQVc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUMsY0FBYztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0I7O0FBRWxCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0I7QUFDekM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUEsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsT0FBTztBQUMzQjs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOzs7QUFHSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0VBQXNFLGFBQWE7QUFDbkY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNB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Q0FBQyxJQUFJLEVBQUU7UUFDaEIsSUFBSTtZQUNILE1BQU0sYUFBYSxHQUFHO2dCQUNyQixJQUFJLEVBQUUsaUJBQWlCO2dCQUN2QixFQUFFLEVBQUU7b0JBQ0gsTUFBTSxFQUFFLFVBQVU7aUJBQ2xCO2FBQ0QsQ0FBQztZQUVGLE1BQU0sT0FBTyxHQUFHLE1BQU0sOERBQWlCLEVBQUUsQ0FBQztZQUMxQyxPQUFPLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRWpDLGdCQUFnQixDQUFDLEtBQUssR0FBRyxVQUFVLENBQUM7U0FDcEM7UUFBQyxPQUFPLEdBQUcsRUFBRTtZQUNiLGdCQUFnQixDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1NBQ3JDO0tBQ0Q7U0FBTTtRQUNOLGdCQUFnQixDQUFDLFdBQVcsR0FBRywwQkFBMEIsQ0FBQztLQUMxRDtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlZ3JhdGlvbi1leGNlbC8uLi8uLi9ub2RlX21vZHVsZXMvQGZpbm9zL2ZkYzMvZGlzdC9mZGMzLmVzbS5qcyIsIndlYnBhY2s6Ly9pbnRlZ3JhdGlvbi1leGNlbC8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vZXhjZWwvb3BlbmZpbi5leGNlbC5qcyIsIndlYnBhY2s6Ly9pbnRlZ3JhdGlvbi1leGNlbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9pbnRlZ3JhdGlvbi1leGNlbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRpb24tZXhjZWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9pbnRlZ3JhdGlvbi1leGNlbC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2ludGVncmF0aW9uLWV4Y2VsLy4vY2xpZW50L3NyYy9leGNlbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcclxuICogQ29weXJpZ2h0IDIwMTkgRklOT1MgRkRDMyBjb250cmlidXRvcnMgLSBzZWUgTk9USUNFIGZpbGVcclxuICovXG52YXIgT3BlbkVycm9yO1xuXG4oZnVuY3Rpb24gKE9wZW5FcnJvcikge1xuICBPcGVuRXJyb3JbXCJBcHBOb3RGb3VuZFwiXSA9IFwiQXBwTm90Rm91bmRcIjtcbiAgT3BlbkVycm9yW1wiRXJyb3JPbkxhdW5jaFwiXSA9IFwiRXJyb3JPbkxhdW5jaFwiO1xuICBPcGVuRXJyb3JbXCJBcHBUaW1lb3V0XCJdID0gXCJBcHBUaW1lb3V0XCI7XG4gIE9wZW5FcnJvcltcIlJlc29sdmVyVW5hdmFpbGFibGVcIl0gPSBcIlJlc29sdmVyVW5hdmFpbGFibGVcIjtcbn0pKE9wZW5FcnJvciB8fCAoT3BlbkVycm9yID0ge30pKTtcblxudmFyIFJlc29sdmVFcnJvcjtcblxuKGZ1bmN0aW9uIChSZXNvbHZlRXJyb3IpIHtcbiAgUmVzb2x2ZUVycm9yW1wiTm9BcHBzRm91bmRcIl0gPSBcIk5vQXBwc0ZvdW5kXCI7XG4gIFJlc29sdmVFcnJvcltcIlJlc29sdmVyVW5hdmFpbGFibGVcIl0gPSBcIlJlc29sdmVyVW5hdmFpbGFibGVcIjtcbiAgUmVzb2x2ZUVycm9yW1wiUmVzb2x2ZXJUaW1lb3V0XCJdID0gXCJSZXNvbHZlclRpbWVvdXRcIjtcbn0pKFJlc29sdmVFcnJvciB8fCAoUmVzb2x2ZUVycm9yID0ge30pKTtcblxudmFyIENoYW5uZWxFcnJvcjtcblxuKGZ1bmN0aW9uIChDaGFubmVsRXJyb3IpIHtcbiAgQ2hhbm5lbEVycm9yW1wiTm9DaGFubmVsRm91bmRcIl0gPSBcIk5vQ2hhbm5lbEZvdW5kXCI7XG4gIENoYW5uZWxFcnJvcltcIkFjY2Vzc0RlbmllZFwiXSA9IFwiQWNjZXNzRGVuaWVkXCI7XG4gIENoYW5uZWxFcnJvcltcIkNyZWF0aW9uRmFpbGVkXCJdID0gXCJDcmVhdGlvbkZhaWxlZFwiO1xufSkoQ2hhbm5lbEVycm9yIHx8IChDaGFubmVsRXJyb3IgPSB7fSkpO1xuXG5mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4sIG1vZHVsZSkge1xuXHRyZXR1cm4gbW9kdWxlID0geyBleHBvcnRzOiB7fSB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG59XG5cbnZhciBydW50aW1lXzEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkJDE7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElFIDggaGFzIGEgYnJva2VuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0aGF0IG9ubHkgd29ya3Mgb24gRE9NIG9iamVjdHMuXG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthc3luY0l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkJDEpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCQxO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQkMTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIik7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkJDE7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkJDEsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkJDE7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQkMTtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZCQxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkJDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkJDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgIG1vZHVsZS5leHBvcnRzIFxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxufSk7XG5cbnZhciBERUZBVUxUX1RJTUVPVVQgPSA1MDAwO1xudmFyIFVuYXZhaWxhYmxlRXJyb3IgPSAvKiNfX1BVUkVfXyovbmV3IEVycm9yKCdGREMzIERlc2t0b3BBZ2VudCBub3QgYXZhaWxhYmxlIGF0IGB3aW5kb3cuZmRjM2AuJyk7XG52YXIgVGltZW91dEVycm9yID0gLyojX19QVVJFX18qL25ldyBFcnJvcignVGltZWQgb3V0IHdhaXRpbmcgZm9yIGBmZGMzUmVhZHlgIGV2ZW50LicpO1xudmFyIFVuZXhwZWN0ZWRFcnJvciA9IC8qI19fUFVSRV9fKi9uZXcgRXJyb3IoJ2BmZGMzUmVhZHlgIGV2ZW50IGZpcmVkLCBidXQgYHdpbmRvdy5mZGMzYCBub3Qgc2V0IHRvIERlc2t0b3BBZ2VudC4nKTtcblxuZnVuY3Rpb24gcmVqZWN0SWZOb0dsb2JhbChmKSB7XG4gIHJldHVybiB3aW5kb3cuZmRjMyA/IGYoKSA6IFByb21pc2UucmVqZWN0KFVuYXZhaWxhYmxlRXJyb3IpO1xufVxuXG5mdW5jdGlvbiB0aHJvd0lmTm9HbG9iYWwoZikge1xuICBpZiAoIXdpbmRvdy5mZGMzKSB7XG4gICAgdGhyb3cgVW5hdmFpbGFibGVFcnJvcjtcbiAgfVxuXG4gIHJldHVybiBmKCk7XG59XG5cbnZhciBmZGMzUmVhZHkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgX3JlZiA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3J1bnRpbWVfMS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUod2FpdEZvck1zKSB7XG4gICAgcmV0dXJuIHJ1bnRpbWVfMS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgaWYgKHdhaXRGb3JNcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHdhaXRGb3JNcyA9IERFRkFVTFRfVElNRU9VVDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgIC8vIGlmIHRoZSBnbG9iYWwgaXMgYWxyZWFkeSBhdmFpbGFibGUgcmVzb2x2ZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICBpZiAod2luZG93LmZkYzMpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXRzIG5vdCBhdmFpbGFibGUgc2V0dXAgYSB0aW1lb3V0IHRvIHJldHVybiBhIHJlamVjdGVkIHByb21pc2VcbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5mZGMzID8gcmVzb2x2ZSgpIDogcmVqZWN0KFRpbWVvdXRFcnJvcik7XG4gICAgICAgICAgICAgICAgfSwgd2FpdEZvck1zKTsgLy8gbGlzdGVuIGZvciB0aGUgZmRjM1JlYWR5IGV2ZW50XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZmRjM1JlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgd2luZG93LmZkYzMgPyByZXNvbHZlKCkgOiByZWplY3QoVW5leHBlY3RlZEVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICBvbmNlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZSk7XG4gIH0pKTtcblxuICByZXR1cm4gZnVuY3Rpb24gZmRjM1JlYWR5KF94KSB7XG4gICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKTtcbmZ1bmN0aW9uIG9wZW4oYXBwLCBjb250ZXh0KSB7XG4gIHJldHVybiByZWplY3RJZk5vR2xvYmFsKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmZkYzMub3BlbihhcHAsIGNvbnRleHQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRJbnRlbnQoaW50ZW50LCBjb250ZXh0KSB7XG4gIHJldHVybiByZWplY3RJZk5vR2xvYmFsKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmZkYzMuZmluZEludGVudChpbnRlbnQsIGNvbnRleHQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRJbnRlbnRzQnlDb250ZXh0KGNvbnRleHQpIHtcbiAgcmV0dXJuIHJlamVjdElmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5maW5kSW50ZW50c0J5Q29udGV4dChjb250ZXh0KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBicm9hZGNhc3QoY29udGV4dCkge1xuICB0aHJvd0lmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5icm9hZGNhc3QoY29udGV4dCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmFpc2VJbnRlbnQoaW50ZW50LCBjb250ZXh0LCBhcHApIHtcbiAgcmV0dXJuIHJlamVjdElmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5yYWlzZUludGVudChpbnRlbnQsIGNvbnRleHQsIGFwcCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmFpc2VJbnRlbnRGb3JDb250ZXh0KGNvbnRleHQsIGFwcCkge1xuICByZXR1cm4gcmVqZWN0SWZOb0dsb2JhbChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5mZGMzLnJhaXNlSW50ZW50Rm9yQ29udGV4dChjb250ZXh0LCBhcHApO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGFkZEludGVudExpc3RlbmVyKGludGVudCwgaGFuZGxlcikge1xuICByZXR1cm4gdGhyb3dJZk5vR2xvYmFsKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmZkYzMuYWRkSW50ZW50TGlzdGVuZXIoaW50ZW50LCBoYW5kbGVyKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhZGRDb250ZXh0TGlzdGVuZXIoY29udGV4dFR5cGVPckhhbmRsZXIsIGhhbmRsZXIpIHtcbiAgaWYgKHR5cGVvZiBjb250ZXh0VHlwZU9ySGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB0aHJvd0lmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5mZGMzLmFkZENvbnRleHRMaXN0ZW5lcihjb250ZXh0VHlwZU9ySGFuZGxlciwgaGFuZGxlcik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRocm93SWZOb0dsb2JhbChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmZkYzMuYWRkQ29udGV4dExpc3RlbmVyKGNvbnRleHRUeXBlT3JIYW5kbGVyKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0U3lzdGVtQ2hhbm5lbHMoKSB7XG4gIHJldHVybiByZWplY3RJZk5vR2xvYmFsKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmZkYzMuZ2V0U3lzdGVtQ2hhbm5lbHMoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBqb2luQ2hhbm5lbChjaGFubmVsSWQpIHtcbiAgcmV0dXJuIHJlamVjdElmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5qb2luQ2hhbm5lbChjaGFubmVsSWQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldE9yQ3JlYXRlQ2hhbm5lbChjaGFubmVsSWQpIHtcbiAgcmV0dXJuIHJlamVjdElmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5nZXRPckNyZWF0ZUNoYW5uZWwoY2hhbm5lbElkKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50Q2hhbm5lbCgpIHtcbiAgcmV0dXJuIHJlamVjdElmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5nZXRDdXJyZW50Q2hhbm5lbCgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxlYXZlQ3VycmVudENoYW5uZWwoKSB7XG4gIHJldHVybiByZWplY3RJZk5vR2xvYmFsKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmZkYzMubGVhdmVDdXJyZW50Q2hhbm5lbCgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEluZm8oKSB7XG4gIHJldHVybiB0aHJvd0lmTm9HbG9iYWwoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuZmRjMy5nZXRJbmZvKCk7XG4gIH0pO1xufVxuLyoqXHJcbiAqIENvbXBhcmUgbnVtZXJpYyBzZW12ZXIgdmVyc2lvbiBudW1iZXIgc3RyaW5ncyAoaW4gdGhlIGZvcm0gYDEuMi4zYCkuXHJcbiAqXHJcbiAqIFJldHVybnMgYC0xYCBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYSBsb3dlciB2ZXJzaW9uIG51bWJlciB0aGFuIHRoZSBzZWNvbmQsXHJcbiAqIGAxYCBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQsIDAgaWYgdGhlIGFyZ3VtZW50cyBhcmVcclxuICogZXF1YWwgYW5kIGBudWxsYCBpZiBhbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIGNvbXBhcmlzb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBhXHJcbiAqIEBwYXJhbSBiXHJcbiAqL1xuXG52YXIgY29tcGFyZVZlcnNpb25OdW1iZXJzID0gZnVuY3Rpb24gY29tcGFyZVZlcnNpb25OdW1iZXJzKGEsIGIpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYVZlckFyciA9IGEuc3BsaXQoJy4nKS5tYXAoTnVtYmVyKTtcbiAgICB2YXIgYlZlckFyciA9IGIuc3BsaXQoJy4nKS5tYXAoTnVtYmVyKTtcblxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBNYXRoLm1heChhVmVyQXJyLmxlbmd0aCwgYlZlckFyci5sZW5ndGgpOyBpbmRleCsrKSB7XG4gICAgICAvKiBJZiBvbmUgdmVyc2lvbiBudW1iZXIgaGFzIG1vcmUgZGlnaXRzIGFuZCB0aGUgb3RoZXIgZG9lcyBub3QsIGFuZCB0aGV5IGFyZSBvdGhlcndpc2UgZXF1YWwsXHJcbiAgICAgICAgIGFzc3VtZSB0aGUgbG9uZ2VyIGlzIGdyZWF0ZXIuIEUuZy4gMS4xLjEgPiAxLjEgKi9cbiAgICAgIGlmIChpbmRleCA9PT0gYVZlckFyci5sZW5ndGggfHwgYVZlckFycltpbmRleF0gPCBiVmVyQXJyW2luZGV4XSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBiVmVyQXJyLmxlbmd0aCB8fCBhVmVyQXJyW2luZGV4XSA+IGJWZXJBcnJbaW5kZXhdKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbXBhcmUgdmVyc2lvbiBzdHJpbmdzJywgZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG4vKipcclxuICogQ2hlY2sgaWYgdGhlIEZEQzMgdmVyc2lvbiBpbiBhbiBJbXBsZW1lbnRhdGlvbk1ldGFkYXRhIG9iamVjdCBpcyBncmVhdGVyIHRoYW5cclxuICogb3IgZXF1YWwgdG8gdGhlIHN1cHBsaWVkIG51bWVyaWMgc2VtdmVyIHZlcnNpb24gbnVtYmVyIHN0cmluZyAoaW4gdGhlIGZvcm0gYDEuMi4zYCkuXHJcbiAqXHJcbiAqIFJldHVybnMgYSBib29sZWFuIG9yIG51bGwgaWYgYW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tcGFyaW5nIHRoZSB2ZXJzaW9uIG51bWJlcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtZXRhZGF0YVxyXG4gKiBAcGFyYW0gdmVyc2lvblxyXG4gKi9cblxudmFyIHZlcnNpb25Jc0F0TGVhc3QgPSBmdW5jdGlvbiB2ZXJzaW9uSXNBdExlYXN0KG1ldGFkYXRhLCB2ZXJzaW9uKSB7XG4gIHZhciBjb21wYXJpc29uID0gY29tcGFyZVZlcnNpb25OdW1iZXJzKG1ldGFkYXRhLmZkYzNWZXJzaW9uLCB2ZXJzaW9uKTtcbiAgcmV0dXJuIGNvbXBhcmlzb24gPT09IG51bGwgPyBudWxsIDogY29tcGFyaXNvbiA+PSAwID8gdHJ1ZSA6IGZhbHNlO1xufTtcblxudmFyIENvbnRleHRUeXBlcztcblxuKGZ1bmN0aW9uIChDb250ZXh0VHlwZXMpIHtcbiAgQ29udGV4dFR5cGVzW1wiQ29udGFjdFwiXSA9IFwiZmRjMy5jb250YWN0XCI7XG4gIENvbnRleHRUeXBlc1tcIkNvbnRhY3RMaXN0XCJdID0gXCJmZGMzLmNvbnRhY3RMaXN0XCI7XG4gIENvbnRleHRUeXBlc1tcIkNvdW50cnlcIl0gPSBcImZkYzMuY291bnRyeVwiO1xuICBDb250ZXh0VHlwZXNbXCJJbnN0cnVtZW50XCJdID0gXCJmZGMzLmluc3RydW1lbnRcIjtcbiAgQ29udGV4dFR5cGVzW1wiT3JnYW5pemF0aW9uXCJdID0gXCJmZGMzLm9yZ2FuaXphdGlvblwiO1xuICBDb250ZXh0VHlwZXNbXCJQb3J0Zm9saW9cIl0gPSBcImZkYzMucG9ydGZvbGlvXCI7XG4gIENvbnRleHRUeXBlc1tcIlBvc2l0aW9uXCJdID0gXCJmZGMzLnBvc2l0aW9uXCI7XG59KShDb250ZXh0VHlwZXMgfHwgKENvbnRleHRUeXBlcyA9IHt9KSk7XG5cbi8vIFRvIHBhcnNlIHRoaXMgZGF0YTpcbi8vXG4vLyAgIGltcG9ydCB7IENvbnZlcnQsIENvbnRleHQsIENvbnRhY3QsIENvbnRhY3RMaXN0LCBJbnN0cnVtZW50LCBJbnN0cnVtZW50TGlzdCwgQ291bnRyeSwgT3JnYW5pemF0aW9uLCBQb3J0Zm9saW8sIFBvc2l0aW9uIH0gZnJvbSBcIi4vZmlsZVwiO1xuLy9cbi8vICAgY29uc3QgY29udGV4dCA9IENvbnZlcnQudG9Db250ZXh0KGpzb24pO1xuLy8gICBjb25zdCBjb250YWN0ID0gQ29udmVydC50b0NvbnRhY3QoanNvbik7XG4vLyAgIGNvbnN0IGNvbnRhY3RMaXN0ID0gQ29udmVydC50b0NvbnRhY3RMaXN0KGpzb24pO1xuLy8gICBjb25zdCBpbnN0cnVtZW50ID0gQ29udmVydC50b0luc3RydW1lbnQoanNvbik7XG4vLyAgIGNvbnN0IGluc3RydW1lbnRMaXN0ID0gQ29udmVydC50b0luc3RydW1lbnRMaXN0KGpzb24pO1xuLy8gICBjb25zdCBjb3VudHJ5ID0gQ29udmVydC50b0NvdW50cnkoanNvbik7XG4vLyAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IENvbnZlcnQudG9Pcmdhbml6YXRpb24oanNvbik7XG4vLyAgIGNvbnN0IHBvcnRmb2xpbyA9IENvbnZlcnQudG9Qb3J0Zm9saW8oanNvbik7XG4vLyAgIGNvbnN0IHBvc2l0aW9uID0gQ29udmVydC50b1Bvc2l0aW9uKGpzb24pO1xuLy9cbi8vIFRoZXNlIGZ1bmN0aW9ucyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBKU09OIGRvZXNuJ3Rcbi8vIG1hdGNoIHRoZSBleHBlY3RlZCBpbnRlcmZhY2UsIGV2ZW4gaWYgdGhlIEpTT04gaXMgdmFsaWQuXG4vLyBDb252ZXJ0cyBKU09OIHN0cmluZ3MgdG8vZnJvbSB5b3VyIHR5cGVzXG4vLyBhbmQgYXNzZXJ0cyB0aGUgcmVzdWx0cyBvZiBKU09OLnBhcnNlIGF0IHJ1bnRpbWVcbnZhciBDb252ZXJ0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ29udmVydCgpIHt9XG5cbiAgQ29udmVydC50b0NvbnRleHQgPSBmdW5jdGlvbiB0b0NvbnRleHQoanNvbikge1xuICAgIHJldHVybiBjYXN0KEpTT04ucGFyc2UoanNvbiksIHIoJ0NvbnRleHQnKSk7XG4gIH07XG5cbiAgQ29udmVydC5jb250ZXh0VG9Kc29uID0gZnVuY3Rpb24gY29udGV4dFRvSnNvbih2YWx1ZSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh1bmNhc3QodmFsdWUsIHIoJ0NvbnRleHQnKSksIG51bGwsIDIpO1xuICB9O1xuXG4gIENvbnZlcnQudG9Db250YWN0ID0gZnVuY3Rpb24gdG9Db250YWN0KGpzb24pIHtcbiAgICByZXR1cm4gY2FzdChKU09OLnBhcnNlKGpzb24pLCByKCdDb250YWN0JykpO1xuICB9O1xuXG4gIENvbnZlcnQuY29udGFjdFRvSnNvbiA9IGZ1bmN0aW9uIGNvbnRhY3RUb0pzb24odmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodW5jYXN0KHZhbHVlLCByKCdDb250YWN0JykpLCBudWxsLCAyKTtcbiAgfTtcblxuICBDb252ZXJ0LnRvQ29udGFjdExpc3QgPSBmdW5jdGlvbiB0b0NvbnRhY3RMaXN0KGpzb24pIHtcbiAgICByZXR1cm4gY2FzdChKU09OLnBhcnNlKGpzb24pLCByKCdDb250YWN0TGlzdCcpKTtcbiAgfTtcblxuICBDb252ZXJ0LmNvbnRhY3RMaXN0VG9Kc29uID0gZnVuY3Rpb24gY29udGFjdExpc3RUb0pzb24odmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodW5jYXN0KHZhbHVlLCByKCdDb250YWN0TGlzdCcpKSwgbnVsbCwgMik7XG4gIH07XG5cbiAgQ29udmVydC50b0luc3RydW1lbnQgPSBmdW5jdGlvbiB0b0luc3RydW1lbnQoanNvbikge1xuICAgIHJldHVybiBjYXN0KEpTT04ucGFyc2UoanNvbiksIHIoJ0luc3RydW1lbnQnKSk7XG4gIH07XG5cbiAgQ29udmVydC5pbnN0cnVtZW50VG9Kc29uID0gZnVuY3Rpb24gaW5zdHJ1bWVudFRvSnNvbih2YWx1ZSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh1bmNhc3QodmFsdWUsIHIoJ0luc3RydW1lbnQnKSksIG51bGwsIDIpO1xuICB9O1xuXG4gIENvbnZlcnQudG9JbnN0cnVtZW50TGlzdCA9IGZ1bmN0aW9uIHRvSW5zdHJ1bWVudExpc3QoanNvbikge1xuICAgIHJldHVybiBjYXN0KEpTT04ucGFyc2UoanNvbiksIHIoJ0luc3RydW1lbnRMaXN0JykpO1xuICB9O1xuXG4gIENvbnZlcnQuaW5zdHJ1bWVudExpc3RUb0pzb24gPSBmdW5jdGlvbiBpbnN0cnVtZW50TGlzdFRvSnNvbih2YWx1ZSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh1bmNhc3QodmFsdWUsIHIoJ0luc3RydW1lbnRMaXN0JykpLCBudWxsLCAyKTtcbiAgfTtcblxuICBDb252ZXJ0LnRvQ291bnRyeSA9IGZ1bmN0aW9uIHRvQ291bnRyeShqc29uKSB7XG4gICAgcmV0dXJuIGNhc3QoSlNPTi5wYXJzZShqc29uKSwgcignQ291bnRyeScpKTtcbiAgfTtcblxuICBDb252ZXJ0LmNvdW50cnlUb0pzb24gPSBmdW5jdGlvbiBjb3VudHJ5VG9Kc29uKHZhbHVlKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHVuY2FzdCh2YWx1ZSwgcignQ291bnRyeScpKSwgbnVsbCwgMik7XG4gIH07XG5cbiAgQ29udmVydC50b09yZ2FuaXphdGlvbiA9IGZ1bmN0aW9uIHRvT3JnYW5pemF0aW9uKGpzb24pIHtcbiAgICByZXR1cm4gY2FzdChKU09OLnBhcnNlKGpzb24pLCByKCdPcmdhbml6YXRpb24nKSk7XG4gIH07XG5cbiAgQ29udmVydC5vcmdhbml6YXRpb25Ub0pzb24gPSBmdW5jdGlvbiBvcmdhbml6YXRpb25Ub0pzb24odmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodW5jYXN0KHZhbHVlLCByKCdPcmdhbml6YXRpb24nKSksIG51bGwsIDIpO1xuICB9O1xuXG4gIENvbnZlcnQudG9Qb3J0Zm9saW8gPSBmdW5jdGlvbiB0b1BvcnRmb2xpbyhqc29uKSB7XG4gICAgcmV0dXJuIGNhc3QoSlNPTi5wYXJzZShqc29uKSwgcignUG9ydGZvbGlvJykpO1xuICB9O1xuXG4gIENvbnZlcnQucG9ydGZvbGlvVG9Kc29uID0gZnVuY3Rpb24gcG9ydGZvbGlvVG9Kc29uKHZhbHVlKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHVuY2FzdCh2YWx1ZSwgcignUG9ydGZvbGlvJykpLCBudWxsLCAyKTtcbiAgfTtcblxuICBDb252ZXJ0LnRvUG9zaXRpb24gPSBmdW5jdGlvbiB0b1Bvc2l0aW9uKGpzb24pIHtcbiAgICByZXR1cm4gY2FzdChKU09OLnBhcnNlKGpzb24pLCByKCdQb3NpdGlvbicpKTtcbiAgfTtcblxuICBDb252ZXJ0LnBvc2l0aW9uVG9Kc29uID0gZnVuY3Rpb24gcG9zaXRpb25Ub0pzb24odmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodW5jYXN0KHZhbHVlLCByKCdQb3NpdGlvbicpKSwgbnVsbCwgMik7XG4gIH07XG5cbiAgcmV0dXJuIENvbnZlcnQ7XG59KCk7XG5cbmZ1bmN0aW9uIGludmFsaWRWYWx1ZSh0eXAsIHZhbCwga2V5KSB7XG4gIGlmIChrZXkgPT09IHZvaWQgMCkge1xuICAgIGtleSA9ICcnO1xuICB9XG5cbiAgaWYgKGtleSkge1xuICAgIHRocm93IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3Iga2V5IFxcXCJcIiArIGtleSArIFwiXFxcIi4gRXhwZWN0ZWQgdHlwZSBcIiArIEpTT04uc3RyaW5naWZ5KHR5cCkgKyBcIiBidXQgZ290IFwiICsgSlNPTi5zdHJpbmdpZnkodmFsKSk7XG4gIH1cblxuICB0aHJvdyBFcnJvcihcIkludmFsaWQgdmFsdWUgXCIgKyBKU09OLnN0cmluZ2lmeSh2YWwpICsgXCIgZm9yIHR5cGUgXCIgKyBKU09OLnN0cmluZ2lmeSh0eXApKTtcbn1cblxuZnVuY3Rpb24ganNvblRvSlNQcm9wcyh0eXApIHtcbiAgaWYgKHR5cC5qc29uVG9KUyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIG1hcCA9IHt9O1xuICAgIHR5cC5wcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gbWFwW3AuanNvbl0gPSB7XG4gICAgICAgIGtleTogcC5qcyxcbiAgICAgICAgdHlwOiBwLnR5cFxuICAgICAgfTtcbiAgICB9KTtcbiAgICB0eXAuanNvblRvSlMgPSBtYXA7XG4gIH1cblxuICByZXR1cm4gdHlwLmpzb25Ub0pTO1xufVxuXG5mdW5jdGlvbiBqc1RvSlNPTlByb3BzKHR5cCkge1xuICBpZiAodHlwLmpzVG9KU09OID09PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgbWFwID0ge307XG4gICAgdHlwLnByb3BzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgIHJldHVybiBtYXBbcC5qc10gPSB7XG4gICAgICAgIGtleTogcC5qc29uLFxuICAgICAgICB0eXA6IHAudHlwXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHR5cC5qc1RvSlNPTiA9IG1hcDtcbiAgfVxuXG4gIHJldHVybiB0eXAuanNUb0pTT047XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybSh2YWwsIHR5cCwgZ2V0UHJvcHMsIGtleSkge1xuICBpZiAoa2V5ID09PSB2b2lkIDApIHtcbiAgICBrZXkgPSAnJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zZm9ybVByaW1pdGl2ZSh0eXAsIHZhbCkge1xuICAgIGlmICh0eXBlb2YgdHlwID09PSB0eXBlb2YgdmFsKSByZXR1cm4gdmFsO1xuICAgIHJldHVybiBpbnZhbGlkVmFsdWUodHlwLCB2YWwsIGtleSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2Zvcm1Vbmlvbih0eXBzLCB2YWwpIHtcbiAgICAvLyB2YWwgbXVzdCB2YWxpZGF0ZSBhZ2FpbnN0IG9uZSB0eXAgaW4gdHlwc1xuICAgIHZhciBsID0gdHlwcy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIF90eXAgPSB0eXBzW2ldO1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtKHZhbCwgX3R5cCwgZ2V0UHJvcHMpO1xuICAgICAgfSBjYXRjaCAoXykge31cbiAgICB9XG5cbiAgICByZXR1cm4gaW52YWxpZFZhbHVlKHR5cHMsIHZhbCk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2Zvcm1FbnVtKGNhc2VzLCB2YWwpIHtcbiAgICBpZiAoY2FzZXMuaW5kZXhPZih2YWwpICE9PSAtMSkgcmV0dXJuIHZhbDtcbiAgICByZXR1cm4gaW52YWxpZFZhbHVlKGNhc2VzLCB2YWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtQXJyYXkodHlwLCB2YWwpIHtcbiAgICAvLyB2YWwgbXVzdCBiZSBhbiBhcnJheSB3aXRoIG5vIGludmFsaWQgZWxlbWVudHNcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIGludmFsaWRWYWx1ZSgnYXJyYXknLCB2YWwpO1xuICAgIHJldHVybiB2YWwubWFwKGZ1bmN0aW9uIChlbCkge1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybShlbCwgdHlwLCBnZXRQcm9wcyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRlKHZhbCkge1xuICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBkID0gbmV3IERhdGUodmFsKTtcblxuICAgIGlmIChpc05hTihkLnZhbHVlT2YoKSkpIHtcbiAgICAgIHJldHVybiBpbnZhbGlkVmFsdWUoJ0RhdGUnLCB2YWwpO1xuICAgIH1cblxuICAgIHJldHVybiBkO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtT2JqZWN0KHByb3BzLCBhZGRpdGlvbmFsLCB2YWwpIHtcbiAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgcmV0dXJuIGludmFsaWRWYWx1ZSgnb2JqZWN0JywgdmFsKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIHByb3AgPSBwcm9wc1trZXldO1xuICAgICAgdmFyIHYgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsLCBrZXkpID8gdmFsW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgICByZXN1bHRbcHJvcC5rZXldID0gdHJhbnNmb3JtKHYsIHByb3AudHlwLCBnZXRQcm9wcywgcHJvcC5rZXkpO1xuICAgIH0pO1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wcywga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHRyYW5zZm9ybSh2YWxba2V5XSwgYWRkaXRpb25hbCwgZ2V0UHJvcHMsIGtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICh0eXAgPT09ICdhbnknKSByZXR1cm4gdmFsO1xuXG4gIGlmICh0eXAgPT09IG51bGwpIHtcbiAgICBpZiAodmFsID09PSBudWxsKSByZXR1cm4gdmFsO1xuICAgIHJldHVybiBpbnZhbGlkVmFsdWUodHlwLCB2YWwpO1xuICB9XG5cbiAgaWYgKHR5cCA9PT0gZmFsc2UpIHJldHVybiBpbnZhbGlkVmFsdWUodHlwLCB2YWwpO1xuXG4gIHdoaWxlICh0eXBlb2YgdHlwID09PSAnb2JqZWN0JyAmJiB0eXAucmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICB0eXAgPSB0eXBlTWFwW3R5cC5yZWZdO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodHlwKSkgcmV0dXJuIHRyYW5zZm9ybUVudW0odHlwLCB2YWwpO1xuXG4gIGlmICh0eXBlb2YgdHlwID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB0eXAuaGFzT3duUHJvcGVydHkoJ3VuaW9uTWVtYmVycycpID8gdHJhbnNmb3JtVW5pb24odHlwLnVuaW9uTWVtYmVycywgdmFsKSA6IHR5cC5oYXNPd25Qcm9wZXJ0eSgnYXJyYXlJdGVtcycpID8gdHJhbnNmb3JtQXJyYXkodHlwLmFycmF5SXRlbXMsIHZhbCkgOiB0eXAuaGFzT3duUHJvcGVydHkoJ3Byb3BzJykgPyB0cmFuc2Zvcm1PYmplY3QoZ2V0UHJvcHModHlwKSwgdHlwLmFkZGl0aW9uYWwsIHZhbCkgOiBpbnZhbGlkVmFsdWUodHlwLCB2YWwpO1xuICB9IC8vIE51bWJlcnMgY2FuIGJlIHBhcnNlZCBieSBEYXRlIGJ1dCBzaG91bGRuJ3QgYmUuXG5cblxuICBpZiAodHlwID09PSBEYXRlICYmIHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSByZXR1cm4gdHJhbnNmb3JtRGF0ZSh2YWwpO1xuICByZXR1cm4gdHJhbnNmb3JtUHJpbWl0aXZlKHR5cCwgdmFsKTtcbn1cblxuZnVuY3Rpb24gY2FzdCh2YWwsIHR5cCkge1xuICByZXR1cm4gdHJhbnNmb3JtKHZhbCwgdHlwLCBqc29uVG9KU1Byb3BzKTtcbn1cblxuZnVuY3Rpb24gdW5jYXN0KHZhbCwgdHlwKSB7XG4gIHJldHVybiB0cmFuc2Zvcm0odmFsLCB0eXAsIGpzVG9KU09OUHJvcHMpO1xufVxuXG5mdW5jdGlvbiBhKHR5cCkge1xuICByZXR1cm4ge1xuICAgIGFycmF5SXRlbXM6IHR5cFxuICB9O1xufVxuXG5mdW5jdGlvbiB1KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgdHlwcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICB0eXBzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB1bmlvbk1lbWJlcnM6IHR5cHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gbyhwcm9wcywgYWRkaXRpb25hbCkge1xuICByZXR1cm4ge1xuICAgIHByb3BzOiBwcm9wcyxcbiAgICBhZGRpdGlvbmFsOiBhZGRpdGlvbmFsXG4gIH07XG59XG5cbmZ1bmN0aW9uIG0oYWRkaXRpb25hbCkge1xuICByZXR1cm4ge1xuICAgIHByb3BzOiBbXSxcbiAgICBhZGRpdGlvbmFsOiBhZGRpdGlvbmFsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHIobmFtZSkge1xuICByZXR1cm4ge1xuICAgIHJlZjogbmFtZVxuICB9O1xufVxuXG52YXIgdHlwZU1hcCA9IHtcbiAgQ29udGV4dDogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnaWQnLFxuICAgIGpzOiAnaWQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAvKiNfX1BVUkVfXyovbSgnJykpXG4gIH0sIHtcbiAgICBqc29uOiAnbmFtZScsXG4gICAganM6ICduYW1lJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH0sIHtcbiAgICBqc29uOiAndHlwZScsXG4gICAganM6ICd0eXBlJyxcbiAgICB0eXA6ICcnXG4gIH1dLCAnYW55JyksXG4gIENvbnRhY3RMaXN0OiAvKiNfX1BVUkVfXyovbyhbe1xuICAgIGpzb246ICdjb250YWN0cycsXG4gICAganM6ICdjb250YWN0cycsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovYSggLyojX19QVVJFX18qL3IoJ0NvbnRhY3QnKSlcbiAgfSwge1xuICAgIGpzb246ICd0eXBlJyxcbiAgICBqczogJ3R5cGUnLFxuICAgIHR5cDogJydcbiAgfSwge1xuICAgIGpzb246ICdpZCcsXG4gICAganM6ICdpZCcsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsIC8qI19fUFVSRV9fKi9tKCcnKSlcbiAgfSwge1xuICAgIGpzb246ICduYW1lJyxcbiAgICBqczogJ25hbWUnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfV0sICdhbnknKSxcbiAgQ29udGFjdDogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnaWQnLFxuICAgIGpzOiAnaWQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3IoJ0NvbnRhY3RJRCcpXG4gIH0sIHtcbiAgICBqc29uOiAndHlwZScsXG4gICAganM6ICd0eXBlJyxcbiAgICB0eXA6ICcnXG4gIH0sIHtcbiAgICBqc29uOiAnbmFtZScsXG4gICAganM6ICduYW1lJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH1dLCAnYW55JyksXG4gIENvbnRhY3RJRDogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnZW1haWwnLFxuICAgIGpzOiAnZW1haWwnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfSwge1xuICAgIGpzb246ICdGRFNfSUQnLFxuICAgIGpzOiAnRkRTX0lEJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH1dLCAnJyksXG4gIEluc3RydW1lbnRMaXN0OiAvKiNfX1BVUkVfXyovbyhbe1xuICAgIGpzb246ICdpbnN0cnVtZW50cycsXG4gICAganM6ICdpbnN0cnVtZW50cycsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovYSggLyojX19QVVJFX18qL3IoJ0luc3RydW1lbnQnKSlcbiAgfSwge1xuICAgIGpzb246ICd0eXBlJyxcbiAgICBqczogJ3R5cGUnLFxuICAgIHR5cDogJydcbiAgfSwge1xuICAgIGpzb246ICdpZCcsXG4gICAganM6ICdpZCcsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsIC8qI19fUFVSRV9fKi9tKCcnKSlcbiAgfSwge1xuICAgIGpzb246ICduYW1lJyxcbiAgICBqczogJ25hbWUnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfV0sICdhbnknKSxcbiAgSW5zdHJ1bWVudDogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnaWQnLFxuICAgIGpzOiAnaWQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3IoJ0luc3RydW1lbnRJRCcpXG4gIH0sIHtcbiAgICBqc29uOiAndHlwZScsXG4gICAganM6ICd0eXBlJyxcbiAgICB0eXA6ICcnXG4gIH0sIHtcbiAgICBqc29uOiAnbmFtZScsXG4gICAganM6ICduYW1lJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH1dLCAnYW55JyksXG4gIEluc3RydW1lbnRJRDogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnQkJHJyxcbiAgICBqczogJ0JCRycsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9LCB7XG4gICAganNvbjogJ0NVU0lQJyxcbiAgICBqczogJ0NVU0lQJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH0sIHtcbiAgICBqc29uOiAnRkRTX0lEJyxcbiAgICBqczogJ0ZEU19JRCcsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9LCB7XG4gICAganNvbjogJ0ZJR0knLFxuICAgIGpzOiAnRklHSScsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9LCB7XG4gICAganNvbjogJ0lTSU4nLFxuICAgIGpzOiAnSVNJTicsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9LCB7XG4gICAganNvbjogJ1BFUk1JRCcsXG4gICAganM6ICdQRVJNSUQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfSwge1xuICAgIGpzb246ICdSSUMnLFxuICAgIGpzOiAnUklDJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH0sIHtcbiAgICBqc29uOiAnU0VET0wnLFxuICAgIGpzOiAnU0VET0wnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfSwge1xuICAgIGpzb246ICd0aWNrZXInLFxuICAgIGpzOiAndGlja2VyJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH1dLCAnJyksXG4gIENvdW50cnk6IC8qI19fUFVSRV9fKi9vKFt7XG4gICAganNvbjogJ2lkJyxcbiAgICBqczogJ2lkJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi9yKCdDb3VudHJ5SUQnKVxuICB9LCB7XG4gICAganNvbjogJ3R5cGUnLFxuICAgIGpzOiAndHlwZScsXG4gICAgdHlwOiAnJ1xuICB9LCB7XG4gICAganNvbjogJ25hbWUnLFxuICAgIGpzOiAnbmFtZScsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9XSwgJ2FueScpLFxuICBDb3VudHJ5SUQ6IC8qI19fUFVSRV9fKi9vKFt7XG4gICAganNvbjogJ0lTT0FMUEhBMicsXG4gICAganM6ICdJU09BTFBIQTInLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfSwge1xuICAgIGpzb246ICdJU09BTFBIQTMnLFxuICAgIGpzOiAnSVNPQUxQSEEzJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH1dLCAnJyksXG4gIE9yZ2FuaXphdGlvbjogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnaWQnLFxuICAgIGpzOiAnaWQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3IoJ09yZ2FuaXphdGlvbklEJylcbiAgfSwge1xuICAgIGpzb246ICd0eXBlJyxcbiAgICBqczogJ3R5cGUnLFxuICAgIHR5cDogJydcbiAgfSwge1xuICAgIGpzb246ICduYW1lJyxcbiAgICBqczogJ25hbWUnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfV0sICdhbnknKSxcbiAgT3JnYW5pemF0aW9uSUQ6IC8qI19fUFVSRV9fKi9vKFt7XG4gICAganNvbjogJ0ZEU19JRCcsXG4gICAganM6ICdGRFNfSUQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3UodW5kZWZpbmVkLCAnJylcbiAgfSwge1xuICAgIGpzb246ICdMRUknLFxuICAgIGpzOiAnTEVJJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgJycpXG4gIH0sIHtcbiAgICBqc29uOiAnUEVSTUlEJyxcbiAgICBqczogJ1BFUk1JRCcsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9XSwgJycpLFxuICBQb3J0Zm9saW86IC8qI19fUFVSRV9fKi9vKFt7XG4gICAganNvbjogJ3Bvc2l0aW9ucycsXG4gICAganM6ICdwb3NpdGlvbnMnLFxuICAgIHR5cDogLyojX19QVVJFX18qL2EoIC8qI19fUFVSRV9fKi9yKCdQb3NpdGlvbicpKVxuICB9LCB7XG4gICAganNvbjogJ3R5cGUnLFxuICAgIGpzOiAndHlwZScsXG4gICAgdHlwOiAnJ1xuICB9LCB7XG4gICAganNvbjogJ2lkJyxcbiAgICBqczogJ2lkJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgLyojX19QVVJFX18qL20oJycpKVxuICB9LCB7XG4gICAganNvbjogJ25hbWUnLFxuICAgIGpzOiAnbmFtZScsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9XSwgJ2FueScpLFxuICBQb3NpdGlvbjogLyojX19QVVJFX18qL28oW3tcbiAgICBqc29uOiAnaG9sZGluZycsXG4gICAganM6ICdob2xkaW5nJyxcbiAgICB0eXA6IDMuMTRcbiAgfSwge1xuICAgIGpzb246ICdpbnN0cnVtZW50JyxcbiAgICBqczogJ2luc3RydW1lbnQnLFxuICAgIHR5cDogLyojX19QVVJFX18qL3IoJ0luc3RydW1lbnQnKVxuICB9LCB7XG4gICAganNvbjogJ3R5cGUnLFxuICAgIGpzOiAndHlwZScsXG4gICAgdHlwOiAnJ1xuICB9LCB7XG4gICAganNvbjogJ2lkJyxcbiAgICBqczogJ2lkJyxcbiAgICB0eXA6IC8qI19fUFVSRV9fKi91KHVuZGVmaW5lZCwgLyojX19QVVJFX18qL20oJycpKVxuICB9LCB7XG4gICAganNvbjogJ25hbWUnLFxuICAgIGpzOiAnbmFtZScsXG4gICAgdHlwOiAvKiNfX1BVUkVfXyovdSh1bmRlZmluZWQsICcnKVxuICB9XSwgJ2FueScpXG59O1xuXG52YXIgSW50ZW50cztcblxuKGZ1bmN0aW9uIChJbnRlbnRzKSB7XG4gIEludGVudHNbXCJTdGFydENhbGxcIl0gPSBcIlN0YXJ0Q2FsbFwiO1xuICBJbnRlbnRzW1wiU3RhcnRDaGF0XCJdID0gXCJTdGFydENoYXRcIjtcbiAgSW50ZW50c1tcIlZpZXdDaGFydFwiXSA9IFwiVmlld0NoYXJ0XCI7XG4gIEludGVudHNbXCJWaWV3Q29udGFjdFwiXSA9IFwiVmlld0NvbnRhY3RcIjtcbiAgSW50ZW50c1tcIlZpZXdRdW90ZVwiXSA9IFwiVmlld1F1b3RlXCI7XG4gIEludGVudHNbXCJWaWV3TmV3c1wiXSA9IFwiVmlld05ld3NcIjtcbiAgSW50ZW50c1tcIlZpZXdJbnN0cnVtZW50XCJdID0gXCJWaWV3SW5zdHJ1bWVudFwiO1xuICBJbnRlbnRzW1wiVmlld0FuYWx5c2lzXCJdID0gXCJWaWV3QW5hbHlzaXNcIjtcbn0pKEludGVudHMgfHwgKEludGVudHMgPSB7fSkpO1xuXG5leHBvcnQgeyBDaGFubmVsRXJyb3IsIENvbnRleHRUeXBlcywgQ29udmVydCwgSW50ZW50cywgT3BlbkVycm9yLCBSZXNvbHZlRXJyb3IsIGFkZENvbnRleHRMaXN0ZW5lciwgYWRkSW50ZW50TGlzdGVuZXIsIGJyb2FkY2FzdCwgY29tcGFyZVZlcnNpb25OdW1iZXJzLCBmZGMzUmVhZHksIGZpbmRJbnRlbnQsIGZpbmRJbnRlbnRzQnlDb250ZXh0LCBnZXRDdXJyZW50Q2hhbm5lbCwgZ2V0SW5mbywgZ2V0T3JDcmVhdGVDaGFubmVsLCBnZXRTeXN0ZW1DaGFubmVscywgam9pbkNoYW5uZWwsIGxlYXZlQ3VycmVudENoYW5uZWwsIG9wZW4sIHJhaXNlSW50ZW50LCByYWlzZUludGVudEZvckNvbnRleHQsIHZlcnNpb25Jc0F0TGVhc3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZkYzMuZXNtLmpzLm1hcFxuIiwidmFyIGU9ezM4ODU6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDQ3OTQpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLkFwcGxpY2F0aW9uKHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb24tc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uQXBwbGljYXRpb24odGhpcy53aXJlLGUpfWFzeW5jIF9jcmVhdGUoZSl7cmV0dXJuIHZvaWQgMD09PWUud2FpdEZvclBhZ2VMb2FkJiYoZS53YWl0Rm9yUGFnZUxvYWQ9ITEpLHZvaWQgMD09PWUuYXV0b1Nob3cmJnZvaWQgMD09PWUuaXNQbGF0Zm9ybUNvbnRyb2xsZXImJihlLmF1dG9TaG93PSEwKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS1hcHBsaWNhdGlvblwiLGUpLHRoaXMud3JhcCh7dXVpZDplLnV1aWR9KX1jcmVhdGUoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGVcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy5fY3JlYXRlKGUpfWFzeW5jIHN0YXJ0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic3RhcnQtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLl9jcmVhdGUoZSk7cmV0dXJuIGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse3V1aWQ6ZS51dWlkfSksdH1hc3luYyBzdGFydE1hbnlNYW5pZmVzdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uc1wiLHthcHBsaWNhdGlvbnM6ZX0pLnRoZW4oKCgpPT57fSkpfWdldEN1cnJlbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY3VycmVudC1hcHBsaWNhdGlvblwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXAoe3V1aWQ6dGhpcy53aXJlLm1lLnV1aWR9KX1nZXRDdXJyZW50U3luYygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LWFwcGxpY2F0aW9uLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy53cmFwU3luYyh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWFzeW5jIHN0YXJ0RnJvbU1hbmlmZXN0KGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1zdGFydC1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5fY3JlYXRlRnJvbU1hbmlmZXN0KGUpO3JldHVybiBhd2FpdCBuLl9ydW4odCksbn1jcmVhdGVGcm9tTWFuaWZlc3QoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGVGcm9tTWFuaWZlc3QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3RcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGUtZnJvbS1tYW5pZmVzdFwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSl9X2NyZWF0ZUZyb21NYW5pZmVzdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9Pntjb25zdCB0PWUuZGF0YS5wbGF0Zm9ybT9lLmRhdGEucGxhdGZvcm0udXVpZDplLmRhdGEuc3RhcnR1cF9hcHAudXVpZDtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOnR9KX0pKS50aGVuKCh0PT4odC5fbWFuaWZlc3RVcmw9ZSx0KSkpfX10LmRlZmF1bHQ9c30sNDc5NDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5BcHBsaWNhdGlvbj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk3KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLFwiYXBwbGljYXRpb25cIix0LnV1aWQpLHRoaXMuaWRlbnRpdHk9dCx0aGlzLndpbmRvdz1uZXcgci5fV2luZG93KHRoaXMud2lyZSx7dXVpZDp0aGlzLmlkZW50aXR5LnV1aWQsbmFtZTp0aGlzLmlkZW50aXR5LnV1aWR9KX13aW5kb3dMaXN0RnJvbUlkZW50aXR5TGlzdChlKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2goKGU9Pnt0LnB1c2gobmV3IHIuX1dpbmRvdyh0aGlzLndpcmUse3V1aWQ6ZS51dWlkLG5hbWU6ZS5uYW1lfSkpfSkpLHR9aXNSdW5uaW5nKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaXMtYXBwbGljYXRpb24tcnVubmluZ1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIHF1aXQoZT0hMSl7YXdhaXQgdGhpcy5fY2xvc2UoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkZXN0cm95LWFwcGxpY2F0aW9uXCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pfV9jbG9zZShlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS1hcHBsaWNhdGlvblwiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1jbG9zZShlPSExKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogQXBwbGljYXRpb24uY2xvc2UgaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIEFwcGxpY2F0aW9uLnF1aXRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jbG9zZVwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX2Nsb3NlKGUpfWdldENoaWxkV2luZG93cygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jaGlsZC13aW5kb3dzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+e2NvbnN0IHQ9W107cmV0dXJuIGUuZGF0YS5mb3JFYWNoKChlPT57dC5wdXNoKHt1dWlkOnRoaXMuaWRlbnRpdHkudXVpZCxuYW1lOmV9KX0pKSx0aGlzLndpbmRvd0xpc3RGcm9tSWRlbnRpdHlMaXN0KHQpfSkpfWdldE1hbmlmZXN0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLW1hbmlmZXN0XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50VXVpZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRTaG9ydGN1dHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc2hvcnRjdXRzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0Vmlld3MoKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXZpZXdzXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGUuZGF0YS5tYXAoKGU9Pm5ldyBvLlZpZXcodGhpcy53aXJlLGUpKSl9Z2V0Wm9vbUxldmVsKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLXpvb20tbGV2ZWxcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1nZXQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKHRoaXMud2luZG93KX1yZWdpc3RlclVzZXIoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWdpc3Rlci11c2VyXCIse3VzZXJOYW1lOmUsYXBwTmFtZTp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZW1vdmVUcmF5SWNvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlbW92ZS10cmF5LWljb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1yZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzdGFydC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXJ1bigpe3JldHVybiBjb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiBXYXJuaW5nOiBBcHBsaWNhdGlvbi5ydW4gaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGZpbi5BcHBsaWNhdGlvbi5zdGFydFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLXJ1blwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX3J1bigpfV9ydW4oZT17fSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse21hbmlmZXN0VXJsOnRoaXMuX21hbmlmZXN0VXJsLG9wdHM6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9c2NoZWR1bGVSZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVsYXVuY2gtb24tY2xvc2VcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZW5kQXBwbGljYXRpb25Mb2coKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1hcHBsaWNhdGlvbi1sb2dcIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZS5kYXRhfWFzeW5jIHNldEp1bXBMaXN0KGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWp1bXAtbGlzdFwiLHtjb25maWc6ZSwuLi50aGlzLmlkZW50aXR5fSl9c2V0VHJheUljb24oZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXRyYXktaWNvblwiLHtlbmFibGVkSWNvbjplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zZXRTaG9ydGN1dHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXNob3J0Y3V0c1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNldFNob3J0Y3V0UXVlcnlQYXJhbXMoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtc2hvcnRjdXQtcXVlcnktYXJnc1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pfXNldFpvb21MZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtYXBwbGljYXRpb24tem9vbS1sZXZlbFwiLHtsZXZlbDplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZXRBcHBMb2dVc2VybmFtZShlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1hcHAtbG9nLXVzZXJuYW1lXCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSl9Z2V0VHJheUljb25JbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXRyYXktaWNvbi1pbmZvXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9dGVybWluYXRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidGVybWluYXRlLWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9d2FpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndhaXQtZm9yLWh1bmctYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1nZXRJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRQcm9jZXNzSW5mbygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXByb2Nlc3MtaW5mb1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlfWFzeW5jIHNldEZpbGVEb3dubG9hZExvY2F0aW9uKGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWZpbGUtZG93bmxvYWQtbG9jYXRpb25cIix7ZG93bmxvYWRMb2NhdGlvbjplLC4uLnRoaXMuaWRlbnRpdHl9KX19dC5BcHBsaWNhdGlvbj1zfSw3MjY0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMzg4NSk7cihuKDQ3OTQpLHQpLHQuZGVmYXVsdD1vLmRlZmF1bHR9LDk2NTk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUmVwbHk9dC5FbWl0dGVyQmFzZT10LkJhc2U9dm9pZCAwO2NvbnN0IHM9bigzNDQyKSxhPW4oODA2OCk7Y2xhc3MgY3tjb25zdHJ1Y3RvcihlKXt0aGlzLmlzTm9kZUVudmlyb25tZW50PSgpPT5cIk5vZGVFbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUsdGhpcy5pc09wZW5GaW5FbnZpcm9ubWVudD0oKT0+XCJPcGVuRmluRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lLHRoaXMud2lyZT1lfWdldCBmaW4oKXtyZXR1cm4gYS5nZXRGaW4odGhpcy53aXJlKX1nZXQgbWUoKXtyZXR1cm4gdGhpcy53aXJlLm1lfX10LkJhc2U9Yyx0LkVtaXR0ZXJCYXNlPWNsYXNzIGV4dGVuZHMgY3tjb25zdHJ1Y3RvcihlLHQsLi4ubil7c3VwZXIoZSksdGhpcy50b3BpYz10LGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmV2ZW50TmFtZXM9KCk9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkuZXZlbnROYW1lcygpOltdLHRoaXMuZW1pdD0oZSx0LC4uLm4pPT4hIXRoaXMuaGFzRW1pdHRlcigpJiZ0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmVtaXQoZSx0LC4uLm4pLHRoaXMuaGFzRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5oYXMobyh0aGlzLGkpKSx0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5nZXRPckNyZWF0ZShvKHRoaXMsaSkpLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdLHRoaXMubGlzdGVuZXJDb3VudD1lPT50aGlzLmhhc0VtaXR0ZXIoKT90aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmxpc3RlbmVyQ291bnQoZSk6MCx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30sbixpKT0+e2NvbnN0IHI9ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfSxvPXRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCk7bihvKTt0cnl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdWJzY3JpYmUtdG8tZGVza3RvcC1ldmVudFwiLHIpfWNhdGNoKGUpe3Rocm93IGkobyksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChvKSxlfX0sdGhpcy5kZXJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30pPT57aWYodGhpcy5oYXNFbWl0dGVyKCkpe2NvbnN0IG49ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfTtyZXR1cm4gYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZS10by1kZXNrdG9wLWV2ZW50XCIsbikuY2F0Y2goKCgpPT5udWxsKSksdGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9LHRoaXMub249YXN5bmMoZSx0LG4pPT4oYXdhaXQgdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoZSxuLChuPT57bi5vbihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5hZGRMaXN0ZW5lcj10aGlzLm9uLHRoaXMub25jZT1hc3luYyhlLHQsbik9Pntjb25zdCBpPSgpPT50aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUpO3JldHVybiBhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLm9uY2UoZSxpKSxuLm9uY2UoZSx0KX0pLChuPT57bi5yZW1vdmVMaXN0ZW5lcihlLGkpLG4ucmVtb3ZlTGlzdGVuZXIoZSx0KX0pKSx0aGlzfSx0aGlzLnByZXBlbmRMaXN0ZW5lcj1hc3luYyhlLHQsbik9Pihhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLnByZXBlbmRMaXN0ZW5lcihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5wcmVwZW5kT25jZUxpc3RlbmVyPWFzeW5jKGUsdCxuKT0+e2NvbnN0IGk9KCk9PnRoaXMuZGVyZWdpc3RlckV2ZW50TGlzdGVuZXIoZSk7cmV0dXJuIGF3YWl0IHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbiwobj0+e24ucHJlcGVuZE9uY2VMaXN0ZW5lcihlLHQpLG4ub25jZShlLGkpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCksbi5yZW1vdmVMaXN0ZW5lcihlLGkpfSkpLHRoaXN9LHRoaXMucmVtb3ZlTGlzdGVuZXI9YXN5bmMoZSx0LG4pPT57Y29uc3QgaT1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbik7cmV0dXJuIGkmJihpLnJlbW92ZUxpc3RlbmVyKGUsdCksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChpKSksdGhpc30sdGhpcy5kZXJlZ2lzdGVyQWxsTGlzdGVuZXJzPWFzeW5jIGU9Pntjb25zdCB0PXsuLi50aGlzLmlkZW50aXR5LHR5cGU6ZSx0b3BpYzp0aGlzLnRvcGljfTtpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLG49ZS5saXN0ZW5lckNvdW50KHQudHlwZSksaT1bXTtmb3IobGV0IGU9MDtlPG47ZSsrKWkucHVzaCh0aGlzLndpcmUuc2VuZEFjdGlvbihcInVuc3Vic2NyaWJlLXRvLWRlc2t0b3AtZXZlbnRcIix0KS5jYXRjaCgoKCk9Pm51bGwpKSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKGkpLGV9fSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycz1hc3luYyBlPT57Y29uc3QgdD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJBbGxMaXN0ZW5lcnMoZSk7dCYmKHQucmVtb3ZlQWxsTGlzdGVuZXJzKGUpLHRoaXMuZGVsZXRlRW1pdHRlcklmTm90aGluZ1JlZ2lzdGVyZWQodCkpfTtpZihlKWF3YWl0IHQoZSk7ZWxzZSBpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmV2ZW50TmFtZXMoKTthd2FpdCBzLnByb21pc2VNYXAoZSx0KX1yZXR1cm4gdGhpc30scih0aGlzLGksW3QsLi4ubl0pLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdfWRlbGV0ZUVtaXR0ZXJJZk5vdGhpbmdSZWdpc3RlcmVkKGUpezA9PT1lLmV2ZW50TmFtZXMoKS5sZW5ndGgmJnRoaXMud2lyZS5ldmVudEFnZ3JlZ2F0b3IuZGVsZXRlKG8odGhpcyxpKSl9fSxpPW5ldyBXZWFrTWFwLHQuUmVwbHk9Y2xhc3N7fX0sMzQyNzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkJhc2V7d3JpdGVUZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZS10ZXh0XCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXJlYWQtdGV4dFwiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXdyaXRlSHRtbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtaHRtbFwiLGUpLnRoZW4oKCgpPT57fSkpfXJlYWRIdG1sKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWh0bWxcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZVJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtcnRmXCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtcmVhZC1ydGZcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGVcIixlKS50aGVuKCgoKT0+e30pKX1nZXRBdmFpbGFibGVGb3JtYXRzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWZvcm1hdHNcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX19dC5kZWZhdWx0PXJ9LDc4MTM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRW1pdHRlck1hcD12b2lkIDA7Y29uc3QgaT1uKDY0NjUpO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIEJ1ZmZlci5mcm9tKGUpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfXQuRW1pdHRlck1hcD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuc3RvcmFnZT1uZXcgTWFwfWhhc2hLZXlzKGUpe3JldHVybiBlLm1hcChyKS5qb2luKFwiL1wiKX1nZXRPckNyZWF0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5oYXModCl8fHRoaXMuc3RvcmFnZS5zZXQodCxuZXcgaS5FdmVudEVtaXR0ZXIpLHRoaXMuc3RvcmFnZS5nZXQodCl9aGFzKGUpe3JldHVybiB0aGlzLnN0b3JhZ2UuaGFzKHRoaXMuaGFzaEtleXMoZSkpfWRlbGV0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5kZWxldGUodCl9fX0sMjczNDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDc4MTMpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJNYXB7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZGlzcGF0Y2hFdmVudD1lPT57aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJwcm9jZXNzLWRlc2t0b3AtZXZlbnRcIj09PWUuYWN0aW9ufShlKSl7Y29uc3R7cGF5bG9hZDp0fT1lLG49ZnVuY3Rpb24oZSl7Y29uc3R7dG9waWM6dH09ZTtpZihcImZyYW1lXCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19aWYoXCJ3aW5kb3dcIj09PXQpe2NvbnN0e3V1aWQ6bixuYW1lOml9PWU7cmV0dXJuW3QsbixpXX1pZihcImFwcGxpY2F0aW9uXCI9PT10KXtjb25zdHt1dWlkOm59PWU7cmV0dXJuW3Qsbl19aWYoXCJ2aWV3XCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19cmV0dXJuW3RdfSh0KTtpZih0aGlzLmhhcyhuKSlyZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShuKS5lbWl0KHQudHlwZSx0KSwhMH1yZXR1cm4hMX19fXQuZGVmYXVsdD1yfSw3MTY4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDgyOTgpO2NsYXNzIG8gZXh0ZW5kcyBpLkJhc2V7d3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleHRlcm5hbC1hcHBsaWNhdGlvbi13cmFwXCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSkpfXdyYXBTeW5jKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4dGVybmFsLWFwcGxpY2F0aW9uLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSl9fXQuZGVmYXVsdD1vfSw4Mjk4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkV4dGVybmFsQXBwbGljYXRpb249dm9pZCAwO2NvbnN0IGk9big5NjU5KTtjbGFzcyByIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsXCJleHRlcm5hbC1hcHBsaWNhdGlvblwiLHQudXVpZCksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZXh0ZXJuYWwtYXBwbGljYXRpb24taW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfX10LkV4dGVybmFsQXBwbGljYXRpb249cn0sOTAyMTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDcxNjgpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDgyOTgpLHQpfSw2NTQ1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oNjQ2NSkscj1uKDM2NDEpLG89big0OTk3KSxzPW4oNzI2NCksYT1uKDgzNDcpLGM9bigzNDI3KSxkPW4oOTAyMSksaD1uKDY3MjApLGw9big5MjExKSx1PW4oNDE2OSkscD1uKDYwOSksdz1uKDk2NDEpLHk9big4MDY4KSxmPW4oODcwNiksZz1uKDcxNTMpO2NsYXNzIG0gZXh0ZW5kcyBpLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHkucmVnaXN0ZXJGaW4oZSx0aGlzKSx0aGlzLndpcmU9ZSx0aGlzLlN5c3RlbT1uZXcgci5kZWZhdWx0KGUpLHRoaXMuV2luZG93PW5ldyBvLmRlZmF1bHQoZSksdGhpcy5BcHBsaWNhdGlvbj1uZXcgcy5kZWZhdWx0KGUpLHRoaXMuSW50ZXJBcHBsaWNhdGlvbkJ1cz1uZXcgYS5kZWZhdWx0KGUpLHRoaXMuQ2xpcGJvYXJkPW5ldyBjLmRlZmF1bHQoZSksdGhpcy5FeHRlcm5hbEFwcGxpY2F0aW9uPW5ldyBkLmRlZmF1bHQoZSksdGhpcy5GcmFtZT1uZXcgaC5kZWZhdWx0KGUpLHRoaXMuR2xvYmFsSG90a2V5PW5ldyBsLmRlZmF1bHQoZSksdGhpcy5QbGF0Zm9ybT1uZXcgcC5kZWZhdWx0KGUsdGhpcy5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwpLHRoaXMuVmlldz1uZXcgdS5kZWZhdWx0KGUpLHRoaXMuSW50ZXJvcD1uZXcgZi5kZWZhdWx0KGUpLHRoaXMuU25hcHNob3RTb3VyY2U9bmV3IGcuZGVmYXVsdChlKSx0aGlzLm1lPXcuZ2V0TWUoZSksZS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e3RoaXMuZW1pdChcImRpc2Nvbm5lY3RlZFwiKX0pKX19dC5kZWZhdWx0PW19LDE3Nzg6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDgxNjEpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9d3JhcFN5bmMoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmcmFtZS13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9Z2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSkpfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZnJhbWUtZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSl9fXQuZGVmYXVsdD1zfSw4MTYxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Ll9GcmFtZT12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSxcImZyYW1lXCIsdC51dWlkLHQubmFtZSksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZnJhbWUtaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFBhcmVudFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9fXQuX0ZyYW1lPXJ9LDY3MjA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigxNzc4KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig4MTYxKSx0KX0sOTIxMTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJnbG9iYWwtaG90a2V5XCIpfWFzeW5jIHJlZ2lzdGVyKGUsdCl7YXdhaXQgdGhpcy5vbihlLHQpLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1yZWdpc3RlclwiLHtob3RrZXk6ZX0pfWFzeW5jIHVucmVnaXN0ZXIoZSl7YXdhaXQgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnbG9iYWwtaG90a2V5LXVucmVnaXN0ZXJcIix7aG90a2V5OmV9KX1hc3luYyB1bnJlZ2lzdGVyQWxsKCl7YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5ldmVudE5hbWVzKCkuZmlsdGVyKChlPT4hKFwicmVnaXN0ZXJlZFwiPT09ZXx8XCJ1bnJlZ2lzdGVyZWRcIj09PWUpKSkubWFwKChlPT50aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKSkpKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdsb2JhbC1ob3RrZXktdW5yZWdpc3Rlci1hbGxcIix7fSl9YXN5bmMgaXNSZWdpc3RlcmVkKGUpe2NvbnN0e3BheWxvYWQ6e2RhdGE6dH19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1pcy1yZWdpc3RlcmVkXCIse2hvdGtleTplfSk7cmV0dXJuIHR9fXQuZGVmYXVsdD1yfSw3NTM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5DaGFubmVsQmFzZT10LlByb3RlY3RlZEl0ZW1zPXZvaWQgMDtjb25zdCBuPWU9Pih0LG4saSk9Pntjb25zdCByPWUodCxuLGkpO3JldHVybiB2b2lkIDA9PT1yP246cn07dC5Qcm90ZWN0ZWRJdGVtcz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucHJvdmlkZXJJZGVudGl0eT1lLHRoaXMud2lyZT10fX07Y2xhc3MgaXtjb25zdHJ1Y3Rvcigpe3RoaXMuc3Vic2NyaXB0aW9ucz1uZXcgTWFwfXN0YXRpYyBkZWZhdWx0QWN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihgTm8gYWN0aW9uIHJlZ2lzdGVyZWQgYXQgdGFyZ2V0IGZvciAke2V9YCl9YXN5bmMgcHJvY2Vzc0FjdGlvbihlLHQsbil7dHJ5e2NvbnN0IHI9dGhpcy5zdWJzY3JpcHRpb25zLmhhcyhlKT90aGlzLnN1YnNjcmlwdGlvbnMuZ2V0KGUpOih0LG4pPT57dmFyIHI7cmV0dXJuKG51bGwhPT0ocj10aGlzLmRlZmF1bHRBY3Rpb24pJiZ2b2lkIDAhPT1yP3I6aS5kZWZhdWx0QWN0aW9uKShlLHQsbil9LG89dGhpcy5wcmVBY3Rpb24/YXdhaXQgdGhpcy5wcmVBY3Rpb24oZSx0LG4pOnQscz1hd2FpdCByKG8sbik7cmV0dXJuIHRoaXMucG9zdEFjdGlvbj9hd2FpdCB0aGlzLnBvc3RBY3Rpb24oZSxzLG4pOnN9Y2F0Y2godCl7aWYodGhpcy5lcnJvck1pZGRsZXdhcmUpcmV0dXJuIHRoaXMuZXJyb3JNaWRkbGV3YXJlKGUsdCxuKTt0aHJvdyB0fX1iZWZvcmVBY3Rpb24oZSl7aWYodGhpcy5wcmVBY3Rpb24pdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSByZWdpc3RlcmVkIGJlZm9yZUFjdGlvbiBtaWRkbGV3YXJlXCIpO3RoaXMucHJlQWN0aW9uPW4oZSl9b25FcnJvcihlKXtpZih0aGlzLmVycm9yTWlkZGxld2FyZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgZXJyb3IgbWlkZGxld2FyZVwiKTt0aGlzLmVycm9yTWlkZGxld2FyZT1lfWFmdGVyQWN0aW9uKGUpe2lmKHRoaXMucG9zdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgYWZ0ZXJBY3Rpb24gbWlkZGxld2FyZVwiKTt0aGlzLnBvc3RBY3Rpb249bihlKX1yZW1vdmUoZSl7dGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShlKX1zZXREZWZhdWx0QWN0aW9uKGUpe2lmKHRoaXMuZGVmYXVsdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJkZWZhdWx0IGFjdGlvbiBjYW4gb25seSBiZSBzZXQgb25jZVwiKTt0aGlzLmRlZmF1bHRBY3Rpb249ZX1yZWdpc3RlcihlLHQpe2lmKHRoaXMuc3Vic2NyaXB0aW9ucy5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdWJzY3JpcHRpb24gYWxyZWFkeSByZWdpc3RlcmVkIGZvciBhY3Rpb246ICR7ZX0uIFVuc3Vic2NyaWJlIGJlZm9yZSBhZGRpbmcgbmV3IHN1YnNjcmlwdGlvbmApO3JldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KGUsdCksITB9fXQuQ2hhbm5lbEJhc2U9aX0sODM3ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LGE9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGM9big3NTM5KSxkPW5ldyBNYXA7Y2xhc3MgaCBleHRlbmRzIGMuQ2hhbm5lbEJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksaS5zZXQodGhpcyx2b2lkIDApLHIuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLnByb2Nlc3NBY3Rpb249KGUsdCxuKT0+c3VwZXIucHJvY2Vzc0FjdGlvbihlLHQsbiksby5zZXQodGhpcywoKCk9PntkLmRlbGV0ZSh0aGlzLmVuZHBvaW50SWQpLGEodGhpcyxyKS5jbG9zZSgpfSkpLHModGhpcyxpLG5ldyBjLlByb3RlY3RlZEl0ZW1zKGUsdCkpLHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSx0aGlzLmVuZHBvaW50SWQ9ZS5lbmRwb2ludElkLHModGhpcyxyLG4pLGQuc2V0KHRoaXMuZW5kcG9pbnRJZCx0aGlzKSxuLnJlY2VpdmUodGhpcy5wcm9jZXNzQWN0aW9uKX1zdGF0aWMgY2xvc2VDaGFubmVsQnlFbmRwb2ludElkKGUpe2NvbnN0IHQ9ZC5nZXQoZSk7dCYmYSh0LG8pLmNhbGwodCl9c3RhdGljIGhhbmRsZVByb3ZpZGVyRGlzY29ubmVjdChlLHQpe2UuZGlzY29ubmVjdExpc3RlbmVyKHQpLGEoZSxvKS5jYWxsKGUpfWdldCBwcm92aWRlcklkZW50aXR5KCl7cmV0dXJuIGEodGhpcyxpKS5wcm92aWRlcklkZW50aXR5fWFzeW5jIGRpc3BhdGNoKGUsdCl7aWYoYSh0aGlzLHIpLmlzRW5kcG9pbnRDb25uZWN0ZWQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCkpcmV0dXJuIGEodGhpcyxyKS5zZW5kKHRoaXMucHJvdmlkZXJJZGVudGl0eS5jaGFubmVsSWQsZSx0KTt0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2xpZW50IHlvdSBhcmUgdHJ5aW5nIHRvIGRpc3BhdGNoIGZyb20gaXMgZGlzY29ubmVjdGVkIGZyb20gdGhlIHRhcmdldCBwcm92aWRlci5cIil9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPXQ9Pnt0cnl7ZSh0KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHdoaWxlIGNhbGxpbmcgdGhlIG9uRGlzY29ubmVjdGlvbiBjYWxsYmFjazogJHtlLm1lc3NhZ2V9YCl9ZmluYWxseXt0aGlzLmRpc2Nvbm5lY3RMaXN0ZW5lcj0oKT0+e319fX1hc3luYyBkaXNjb25uZWN0KCl7Y29uc3QgZT1hKHRoaXMsaSkse2NoYW5uZWxOYW1lOnQsdXVpZDpuLG5hbWU6cn09ZS5wcm92aWRlcklkZW50aXR5O2F3YWl0IGUud2lyZS5zZW5kQWN0aW9uKFwiZGlzY29ubmVjdC1mcm9tLWNoYW5uZWxcIix7Y2hhbm5lbE5hbWU6dCx1dWlkOm4sbmFtZTpyLGVuZHBvaW50SWQ6dGhpcy5lbmRwb2ludElkfSksYSh0aGlzLG8pLmNhbGwodGhpcyl9fXQuZGVmYXVsdD1oLGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwfSw2NzExOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29ubmVjdGlvbk1hbmFnZXI9dm9pZCAwO2NvbnN0IGE9bigzOTE3KSxjPW4oOTY1OSksZD1uKDEwNDYpLGg9bigzODcwKSxsPW4oNTY5KSx1PW4oMjk0MikscD1uKDM3NDkpLHc9bigzMDM3KSx5PW4oNzExMyk7Y2xhc3MgZiBleHRlbmRzIGMuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcD1lPT57dGhpcy5wcm92aWRlck1hcC5kZWxldGUoZSl9LHRoaXMub25tZXNzYWdlPWU9PlwicHJvY2Vzcy1jaGFubmVsLWNvbm5lY3Rpb25cIj09PWUuYWN0aW9uJiYodGhpcy5wcm9jZXNzQ2hhbm5lbENvbm5lY3Rpb24oZSksITApLHRoaXMucHJvdmlkZXJNYXA9bmV3IE1hcCx0aGlzLnByb3RvY29sTWFuYWdlcj1uZXcgdy5Qcm90b2NvbE1hbmFnZXIodGhpcy5pc05vZGVFbnZpcm9ubWVudCgpP1tcImNsYXNzaWNcIl06W1wicnRjXCIsXCJjbGFzc2ljXCJdKSxvKHRoaXMsaSxuZXcgcC5NZXNzYWdlUmVjZWl2ZXIoZSkpLG8odGhpcyxyLG5ldyBsLlJUQ0lDRU1hbmFnZXIoZSkpLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKX1zdGF0aWMgZ2V0UHJvdG9jb2xPcHRpb25zRnJvbVN0cmluZ3MoZSl7cmV0dXJuIGUubWFwKChlPT57c3dpdGNoKGUpe2Nhc2VcInJ0Y1wiOnJldHVybiBoLlJUQ0luZm87Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBkLkNsYXNzaWNJbmZvO2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSl9Y3JlYXRlUHJvdmlkZXIoZSx0KXtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNyZWF0ZSxlfHx7fSkscj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRQcm92aWRlclByb3RvY29scyhudWxsPT1uP3ZvaWQgMDpuLnByb3RvY29scyksbz1yLm1hcCgoZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjpyZXR1cm4gbmV3IGguUlRDU3RyYXRlZ3k7Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBuZXcgZC5DbGFzc2ljU3RyYXRlZ3kodGhpcy53aXJlLHModGhpcyxpKSx0LmNoYW5uZWxJZCx0KTtkZWZhdWx0OnJldHVybiBhLmV4aGF1c3RpdmVDaGVjayhlLFtcInJ0Y1wiLFwiY2xhc3NpY1wiXSl9fSkpO2xldCBjO2lmKDI9PT1vLmxlbmd0aCl7Y29uc3RbZSx0XT1vO2M9eS5kZWZhdWx0LmNvbWJpbmUoZSx0KX1lbHNle2lmKDEhPT1vLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gY29tYmluZSBzdHJhdGVnaWVzXCIpO1tjXT1vfWNvbnN0IGw9bmV3IHUuQ2hhbm5lbFByb3ZpZGVyKHQsdGhpcy53aXJlLGMpLHA9dC5jaGFubmVsSWQ7cmV0dXJuIHRoaXMucHJvdmlkZXJNYXAuc2V0KHAse3Byb3ZpZGVyOmwsc3RyYXRlZ3k6YyxzdXBwb3J0ZWRQcm90b2NvbHM6Zi5nZXRQcm90b2NvbE9wdGlvbnNGcm9tU3RyaW5ncyhyKX0pLHUuQ2hhbm5lbFByb3ZpZGVyLnNldFByb3ZpZGVyUmVtb3ZhbChsLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcC5iaW5kKHRoaXMpKSxsfWFzeW5jIGNyZWF0ZUNsaWVudE9mZmVyKGUpe2NvbnN0IHQ9dGhpcy5wcm90b2NvbE1hbmFnZXIuZ2V0Q2xpZW50UHJvdG9jb2xzKG51bGw9PWU/dm9pZCAwOmUucHJvdG9jb2xzKTtsZXQgbjtyZXR1cm57b2ZmZXI6e3N1cHBvcnRlZFByb3RvY29sczphd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjp7Y29uc3R7cnRjQ2xpZW50OmUsY2hhbm5lbHM6dCxvZmZlcjppLHJ0Y0Nvbm5lY3Rpb25JZDpvLGNoYW5uZWxzT3BlbmVkOmF9PWF3YWl0IHModGhpcyxyKS5zdGFydENsaWVudE9mZmVyKCk7cmV0dXJuIG49e3J0Y0NsaWVudDplLGNoYW5uZWxzOnQsY2hhbm5lbHNPcGVuZWQ6YX0se3R5cGU6XCJydGNcIix2ZXJzaW9uOmguUlRDSW5mby52ZXJzaW9uLHBheWxvYWQ6e29mZmVyOmkscnRjQ29ubmVjdGlvbklkOm99fX1jYXNlXCJjbGFzc2ljXCI6cmV0dXJue3R5cGU6XCJjbGFzc2ljXCIsdmVyc2lvbjpkLkNsYXNzaWNJbmZvLnZlcnNpb259O2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSkpLG1heFByb3RvY29sczoyfSxydGM6bn19YXN5bmMgY3JlYXRlQ2xpZW50U3RyYXRlZ3koZSx0KXt2YXIgbjt0LmVuZHBvaW50SWR8fCh0LmVuZHBvaW50SWQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKSxzKHRoaXMsaSkuY2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24odC5jaGFubmVsSWQpKTtjb25zdCBvPW51bGwhPT0obj10LmFuc3dlcikmJnZvaWQgMCE9PW4/bjp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XX0sYT0oYXdhaXQgUHJvbWlzZS5hbGwoby5zdXBwb3J0ZWRQcm90b2NvbHMubWFwKChhc3luYyBuPT5cInJ0Y1wiPT09bi50eXBlJiZlPyhhd2FpdCBzKHRoaXMscikuZmluaXNoQ2xpZW50T2ZmZXIoZS5ydGNDbGllbnQsbi5wYXlsb2FkLmFuc3dlcixlLmNoYW5uZWxzT3BlbmVkKSxuZXcgaC5SVENTdHJhdGVneSk6XCJjbGFzc2ljXCI9PT1uLnR5cGU/bmV3IGQuQ2xhc3NpY1N0cmF0ZWd5KHRoaXMud2lyZSxzKHRoaXMsaSksdC5lbmRwb2ludElkLHQpOm51bGwpKSkpLmZpbHRlcigoZT0+bnVsbCE9PWUpKTtsZXQgYztpZihlJiYhYS5zb21lKChlPT5lIGluc3RhbmNlb2YgaC5SVENTdHJhdGVneSkpJiZlJiZlLnJ0Y0NsaWVudC5jbG9zZSgpLGEubGVuZ3RoPj0yKWM9eS5kZWZhdWx0LmNvbWJpbmUoYVswXSxhWzFdKTtlbHNle2lmKCFhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wYXRpYmxlIHByb3RvY29sc1wiKTtbY109YX1jb25zdCBsPXtlbmRwb2ludElkZW50aXR5OnQscnRjOmV9O3JldHVybiBjLmFkZEVuZHBvaW50KHQuY2hhbm5lbElkLGwpLGN9YXN5bmMgcHJvY2Vzc0NoYW5uZWxDb25uZWN0aW9uKGUpe2NvbnN0e2NsaWVudElkZW50aXR5OnQscHJvdmlkZXJJZGVudGl0eTpuLGFja1RvU2VuZGVyOmkscGF5bG9hZDpvLG9mZmVyOmF9PWUucGF5bG9hZDt0LmVuZHBvaW50SWQ/dC5pc0xvY2FsRW5kcG9pbnRJZD0hMToodC5lbmRwb2ludElkPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksdC5pc0xvY2FsRW5kcG9pbnRJZD0hMCk7Y29uc3QgYz1uLmNoYW5uZWxJZCxsPXRoaXMucHJvdmlkZXJNYXAuZ2V0KGMpO2lmKCFsKXJldHVybiBpLnBheWxvYWQuc3VjY2Vzcz0hMSxpLnBheWxvYWQucmVhc29uPWBDaGFubmVsIFwiJHtuLmNoYW5uZWxOYW1lfVwiIGhhcyBiZWVuIGRlc3Ryb3llZC5gLHRoaXMud2lyZS5zZW5kUmF3KGkpO2NvbnN0e3Byb3ZpZGVyOnAsc3RyYXRlZ3k6dyxzdXBwb3J0ZWRQcm90b2NvbHM6eX09bDt0cnl7aWYoIShwIGluc3RhbmNlb2YgdS5DaGFubmVsUHJvdmlkZXIpKXRocm93IEVycm9yKFwiQ2Fubm90IGNvbm5lY3QgdG8gYSBjaGFubmVsIGNsaWVudFwiKTtjb25zdCBlPW51bGwhPWE/YTp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XSxtYXhQcm90b2NvbHM6MX0sbj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRDb21wYXRpYmxlUHJvdG9jb2xzKHksZSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRoaXMgcHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBhbnkgb2YgdGhlIG9mZmVyZWQgcHJvdG9jb2xzLlwiKTtjb25zdCBjPWF3YWl0IHAucHJvY2Vzc0Nvbm5lY3Rpb24odCxvKTtpLnBheWxvYWQucGF5bG9hZD1pLnBheWxvYWQucGF5bG9hZHx8e307bGV0IGw9e3N1cHBvcnRlZFByb3RvY29sczpbXSxlbmRwb2ludFBheWxvYWRQcm9taXNlOlByb21pc2UucmVzb2x2ZSh7ZW5kcG9pbnRJZGVudGl0eTp0fSl9O3JldHVybiBsPWF3YWl0IG4ucmVkdWNlKChhc3luYyhlLHQpPT57Y29uc3Qgbj1hd2FpdCBlO2lmKFwicnRjXCI9PT10LnR5cGUpe2NvbnN0e2Fuc3dlcjplLHJ0Y0NsaWVudDppLGNoYW5uZWxzOm99PWF3YWl0IHModGhpcyxyKS5jcmVhdGVQcm92aWRlckFuc3dlcih0LnBheWxvYWQucnRjQ29ubmVjdGlvbklkLHQucGF5bG9hZC5vZmZlcik7bi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcInJ0Y1wiLHZlcnNpb246aC5SVENJbmZvLnZlcnNpb24scGF5bG9hZDp7YW5zd2VyOmV9fSksbi5lbmRwb2ludFBheWxvYWRQcm9taXNlPW4uZW5kcG9pbnRQYXlsb2FkUHJvbWlzZS50aGVuKChlPT5vLnRoZW4oKHQ9Pih7Li4uZSxydGM6e3J0Y0NsaWVudDppLGNoYW5uZWxzOnR9fSkpKSkpfWVsc2Ugbi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOmQuQ2xhc3NpY0luZm8udmVyc2lvbn0pO3JldHVybiBufSksUHJvbWlzZS5yZXNvbHZlKGwpKSxsLmVuZHBvaW50UGF5bG9hZFByb21pc2UudGhlbigoZT0+dy5hZGRFbmRwb2ludCh0LmVuZHBvaW50SWQsZSkpKSxpLnBheWxvYWQucGF5bG9hZC5yZXN1bHQ9YyxpLnBheWxvYWQucGF5bG9hZC5hbnN3ZXI9bCx0aGlzLndpcmUuc2VuZFJhdyhpKX1jYXRjaChlKXtyZXR1cm4gaS5wYXlsb2FkLnN1Y2Nlc3M9ITEsaS5wYXlsb2FkLnJlYXNvbj1lLm1lc3NhZ2UsdGhpcy53aXJlLnNlbmRSYXcoaSl9fX10LkNvbm5lY3Rpb25NYW5hZ2VyPWYsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3NzIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWw9dm9pZCAwO2NvbnN0IHM9big4Mzc4KSxhPW4oMjk0MiksYz1uKDk2NTkpLGQ9big2NzExKSxoPSgpPT57fTtjbGFzcyBsIGV4dGVuZHMgYy5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLFwiY2hhbm5lbFwiKSxpLnNldCh0aGlzLHZvaWQgMCkscih0aGlzLGksbmV3IGQuQ29ubmVjdGlvbk1hbmFnZXIoZSkpfWFzeW5jIGdldEFsbENoYW5uZWxzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1jaGFubmVsc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBvbkNoYW5uZWxDb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJjb25uZWN0ZWRcIixlKX1hc3luYyBvbkNoYW5uZWxEaXNjb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIixlKX1hc3luYyBjb25uZWN0KGUsdCl7aWYoIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGEgY2hhbm5lbE5hbWUgc3RyaW5nIHRvIGNvbm5lY3QgdG8gYSBjaGFubmVsLlwiKTtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNvbm5lY3QsdHx8e30pO2xldCByPWgsYT1oO2NvbnN0IGM9bmV3IFByb21pc2UoKHQ9PntyPXQsYT1pPT57ZT09PWkuY2hhbm5lbE5hbWUmJih0aGlzLnJlbW92ZUxpc3RlbmVyKFwiY29ubmVjdGVkXCIsYSksdGhpcy5jb25uZWN0KGUsbikudGhlbigoZT0+e3QoZSl9KSkpfSx0aGlzLm9uKFwiY29ubmVjdGVkXCIsYSl9KSk7dHJ5e2NvbnN0e29mZmVyOnQscnRjOmN9PWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRPZmZlcihuKSxkPWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY29ubmVjdC10by1jaGFubmVsXCIse2NoYW5uZWxOYW1lOmUsLi4ubixvZmZlcjp0fSkse3BheWxvYWQ6e2RhdGE6aH19PWQ7ciYmcigpLHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixhKTtjb25zdCBsPWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRTdHJhdGVneShjLGgpLHU9bmV3IHMuZGVmYXVsdChoLHRoaXMud2lyZSxsKTtyZXR1cm4gbC5vbkVuZHBvaW50RGlzY29ubmVjdChoLmNoYW5uZWxJZCwoYXN5bmMoKT0+e3RyeXthd2FpdCB1LmRpc2Nvbm5lY3QoKX1jYXRjaChlKXtjb25zb2xlLndhcm4oYFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBkaXNjb25uZWN0IGZvciBjbGllbnQgd2l0aCB1dWlkOiAke2gudXVpZH0gLyBuYW1lOiAke2gubmFtZX0gLyBlbmRwb2ludElkOiAke2guZW5kcG9pbnRJZH0uYCl9ZmluYWxseXtzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsaCl9fSkpLHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsdCl9KSksdX1jYXRjaCh0KXtjb25zdCBpPVwiaW50ZXJuYWwtbmFja1wiO2lmKHt3YWl0OiEwLC4uLm59LndhaXQmJnQubWVzc2FnZSYmdC5tZXNzYWdlLmluY2x1ZGVzKGkpKXJldHVybiBjb25zb2xlLndhcm4oYENoYW5uZWwgbm90IGZvdW5kIGZvciBjaGFubmVsTmFtZTogJHtlfSwgd2FpdGluZyBmb3IgY2hhbm5lbCBjb25uZWN0aW9uLmApLGM7dGhyb3cgdC5tZXNzYWdlPT09aT9uZXcgRXJyb3IoYE5vIGNoYW5uZWwgZm91bmQgZm9yIGNoYW5uZWxOYW1lOiAke2V9YCk6bmV3IEVycm9yKHQpfX1hc3luYyBjcmVhdGUoZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIGNoYW5uZWxOYW1lIHRvIGNyZWF0ZSBhIGNoYW5uZWxcIik7Y29uc3R7cGF5bG9hZDp7ZGF0YTpufX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtY2hhbm5lbFwiLHtjaGFubmVsTmFtZTplfSkscj1vKHRoaXMsaSkuY3JlYXRlUHJvdmlkZXIodCxuKTtyZXR1cm4gdGhpcy5vbihcImNsaWVudC1kaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZhLkNoYW5uZWxQcm92aWRlci5oYW5kbGVDbGllbnREaXNjb25uZWN0aW9uKHIsdCl9KSkscn19dC5DaGFubmVsPWwsaT1uZXcgV2Vha01hcH0sMzc0OTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5NZXNzYWdlUmVjZWl2ZXI9dm9pZCAwO2NvbnN0IGk9big4Mzc4KSxyPW4oOTY1OSk7Y2xhc3MgbyBleHRlbmRzIHIuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm9ubWVzc2FnZT1lPT5cInByb2Nlc3MtY2hhbm5lbC1tZXNzYWdlXCI9PT1lLmFjdGlvbiYmKHRoaXMucHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpLCEwKSx0aGlzLmVuZHBvaW50TWFwPW5ldyBNYXAsdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQ9bmV3IE1hcCxlLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSl9YXN5bmMgcHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpe3ZhciB0LG47Y29uc3R7c2VuZGVySWRlbnRpdHk6aSxwcm92aWRlcklkZW50aXR5OnIsYWN0aW9uOm8sYWNrVG9TZW5kZXI6cyxwYXlsb2FkOmEsaW50ZW5kZWRUYXJnZXRJZGVudGl0eTpjfT1lLnBheWxvYWQsZD1udWxsIT09KG49bnVsbCE9PSh0PWMuY2hhbm5lbElkKSYmdm9pZCAwIT09dD90OmMuZW5kcG9pbnRJZCkmJnZvaWQgMCE9PW4/bjp0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoci5jaGFubmVsSWQpLGg9dGhpcy5lbmRwb2ludE1hcC5nZXQoZCk7aWYoIWgpcmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249YENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHt0aGlzLndpcmUubWUudXVpZH0gLyBuYW1lOiAke3RoaXMud2lyZS5tZS5uYW1lfSAvIGVuZHBvaW50SWQ6ICR7ZH0gbm8gbG9uZ2VyIGNvbm5lY3RlZC5gLHRoaXMud2lyZS5zZW5kUmF3KHMpO3RyeXtjb25zdCBlPWF3YWl0IGgobyxhLGkpO3JldHVybiBzLnBheWxvYWQucGF5bG9hZD1zLnBheWxvYWQucGF5bG9hZHx8e30scy5wYXlsb2FkLnBheWxvYWQucmVzdWx0PWUsdGhpcy53aXJlLnNlbmRSYXcocyl9Y2F0Y2goZSl7cmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249ZS5tZXNzYWdlLHRoaXMud2lyZS5zZW5kUmF3KHMpfX1hZGRFbmRwb2ludChlLHQsbil7dGhpcy5lbmRwb2ludE1hcC5zZXQobixlKSx0IT09biYmdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQuc2V0KHQsbil9cmVtb3ZlRW5kcG9pbnQoZSx0KXt0aGlzLmVuZHBvaW50TWFwLmRlbGV0ZSh0KSx0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk9PT10JiZ0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5kZWxldGUoZSl9Y2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24oZSl7Y29uc3QgdD10aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk7dCYmKGkuZGVmYXVsdC5jbG9zZUNoYW5uZWxCeUVuZHBvaW50SWQodCksY29uc29sZS53YXJuKFwiWW91IGhhdmUgY3JlYXRlZCBhIHNlY29uZCBjb25uZWN0aW9uIHRvIGFuIG9sZGVyIHByb3ZpZGVyLiBGaXJzdCBjb25uZWN0aW9uIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgY2xpZW50TWFwXCIpLGNvbnNvbGUud2FybihcIklmIHRoZSBwcm92aWRlciBjYWxscyBwdWJsaXNoKCksIHlvdSBtYXkgcmVjZWl2ZSBtdWx0aXBsZSBtZXNzYWdlcy5cIikpfX10Lk1lc3NhZ2VSZWNlaXZlcj1vfSwxMDQ2OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNsYXNzaWNJbmZvPXQuQ2xhc3NpY1N0cmF0ZWd5PXZvaWQgMCx0LkNsYXNzaWNTdHJhdGVneT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQscyxhKXt0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LHRoaXMuZW5kcG9pbnRJZD1zLHRoaXMucHJvdmlkZXJJZGVudGl0eT1hLG4uc2V0KHRoaXMsdm9pZCAwKSxpLnNldCh0aGlzLG5ldyBNYXApLHRoaXMuc2VuZD1hc3luYyhlLHQscik9Pntjb25zdCBzPW8odGhpcyxpKS5nZXQoZSk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9jYXRlIHJvdXRpbmcgaW5mbyBmb3IgZW5kcG9pbnQgJHtlfWApO2NvbnN0IGE9ey4uLnN9O3JldHVybiBhLmlzTG9jYWxFbmRwb2ludElkJiZkZWxldGUgYS5lbmRwb2ludElkLGRlbGV0ZSBhLmlzTG9jYWxFbmRwb2ludElkLChhd2FpdCBvKHRoaXMsbikuc2VuZEFjdGlvbihcInNlbmQtY2hhbm5lbC1tZXNzYWdlXCIsey4uLmEscHJvdmlkZXJJZGVudGl0eTp0aGlzLnByb3ZpZGVySWRlbnRpdHksYWN0aW9uOnQscGF5bG9hZDpyfSkuY2F0Y2goKGU9Pnt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX0pKSkucGF5bG9hZC5kYXRhLnJlc3VsdH0sdGhpcy5jbG9zZT1hc3luYygpPT57dGhpcy5tZXNzYWdlUmVjZWl2ZXIucmVtb3ZlRW5kcG9pbnQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpLHIodGhpcyxpLG5ldyBNYXApfSxyKHRoaXMsbixlKX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe31yZWNlaXZlKGUpe3RoaXMubWVzc2FnZVJlY2VpdmVyLmFkZEVuZHBvaW50KGUsdGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7byh0aGlzLGkpLmRlbGV0ZShlKX1pc0VuZHBvaW50Q29ubmVjdGVkKGUpe3JldHVybiBvKHRoaXMsaSkuaGFzKGUpfWFkZEVuZHBvaW50KGUsdCl7byh0aGlzLGkpLnNldChlLHQuZW5kcG9pbnRJZGVudGl0eSl9aXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXt2YXIgdCxuO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludElkZW50aXR5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5lbmRwb2ludElkKXx8XCJzdHJpbmdcIj09dHlwZW9mKG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50SWRlbnRpdHkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNoYW5uZWxJZCl9fSxuPW5ldyBXZWFrTWFwLGk9bmV3IFdlYWtNYXAsdC5DbGFzc2ljSW5mbz17dmVyc2lvbjo1LG1pbmltdW1WZXJzaW9uOjAsdHlwZTpcImNsYXNzaWNcIn19LDcxMTM6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjbGFzcyBue2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcmltYXJ5PWUsdGhpcy5zZWNvbmRhcnk9dH1zdGF0aWMgY29tYmluZShlLHQpe3JldHVybiBuZXcgbihlLHQpfW9uRW5kcG9pbnREaXNjb25uZWN0KGUsdCl7dGhpcy5wcmltYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5zZWNvbmRhcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKXx8dCgpfSkpLHRoaXMuc2Vjb25kYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHQoKX0pKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe3JldHVybiB0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXx8dGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKX1hc3luYyBjbG9zZUVuZHBvaW50KGUpe2F3YWl0IHRoaXMucHJpbWFyeS5jbG9zZUVuZHBvaW50KGUpLGF3YWl0IHRoaXMuc2Vjb25kYXJ5LmNsb3NlRW5kcG9pbnQoZSl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gdGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHRoaXMuc2Vjb25kYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl9YXN5bmMgYWRkRW5kcG9pbnQoZSx0KXt0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5wcmltYXJ5LmFkZEVuZHBvaW50KGUsdCksdGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5zZWNvbmRhcnkuYWRkRW5kcG9pbnQoZSx0KX1yZWNlaXZlKGUpe3RoaXMucHJpbWFyeS5yZWNlaXZlKGUpLHRoaXMuc2Vjb25kYXJ5LnJlY2VpdmUoZSl9c2VuZChlLHQsbil7cmV0dXJuIHRoaXMucHJpbWFyeS5pc0VuZHBvaW50Q29ubmVjdGVkKGUpP3RoaXMucHJpbWFyeS5zZW5kKGUsdCxuKTp0aGlzLnNlY29uZGFyeS5zZW5kKGUsdCxuKX1hc3luYyBjbG9zZSgpe2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLnByaW1hcnkuY2xvc2UoKSx0aGlzLnNlY29uZGFyeS5jbG9zZSgpXSl9fXQuZGVmYXVsdD1ufSwzMDM3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Qcm90b2NvbE1hbmFnZXI9dm9pZCAwLHQuUHJvdG9jb2xNYW5hZ2VyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXI9ZSx0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM9W1wiY2xhc3NpY1wiXSx0aGlzLkRlZmF1bHRQcm92aWRlclByb3RvY29scz1bXCJjbGFzc2ljXCJdLHRoaXMuZ2V0Q2xpZW50UHJvdG9jb2xzPWU9Pntjb25zdCB0PWU/dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5maWx0ZXIoKHQ9PmUuaW5jbHVkZXModCkpKTp0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRQcm92aWRlclByb3RvY29scz1lPT57Y29uc3QgdD1lP3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuZmlsdGVyKCh0PT5lLmluY2x1ZGVzKHQpKSk6dGhpcy5EZWZhdWx0UHJvdmlkZXJQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRDb21wYXRpYmxlUHJvdG9jb2xzPShlLHQpPT50LnN1cHBvcnRlZFByb3RvY29scy5maWx0ZXIoKHQ9PmUuc29tZSgoZT0+e3ZhciBuO3JldHVybiBlLnR5cGU9PT10LnR5cGUmJnQudmVyc2lvbj49ZS5taW5pbXVtVmVyc2lvbiYmZS52ZXJzaW9uPj0obnVsbCE9PShuPXQubWluaW11bVZlcnNpb24pJiZ2b2lkIDAhPT1uP246MCl9KSkpKS5zbGljZSgwLHQubWF4UHJvdG9jb2xzKX19fSw4Nzc2OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDRW5kcG9pbnQ9dm9pZCAwO2NvbnN0IGE9bigyMzY2KTt0LlJUQ0VuZHBvaW50PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5ydGM9ZSx0aGlzLmVuZHBvaW50SWRlbnRpdHk9dCx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsaS5zZXQodGhpcyxudWxsKSxyLnNldCh0aGlzLHZvaWQgMCksdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyPWU9PntcImNvbm5lY3RlZFwiIT09dGhpcy5ydGMucnRjQ2xpZW50LmNvbm5lY3Rpb25TdGF0ZSYmKHRoaXMucnRjLnJ0Y0NsaWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyKSx0aGlzLmNsb3NlKCksbyh0aGlzLHIpJiZvKHRoaXMscikuY2FsbCh0aGlzKSl9LHRoaXMuc2VuZD1hc3luYyhlLHQpPT57Y29uc3Qgbj1gbWVzc2FnZS0ke01hdGgucmFuZG9tKCl9YCxpPW5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMucmVzcG9uc2VNYXAuc2V0KG4se3Jlc29sdmU6ZSxyZWplY3Q6dH0pfSkpO3JldHVybiB0aGlzLnJ0Yy5jaGFubmVscy5yZXF1ZXN0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbjplLHBheWxvYWQ6dCxtZXNzYWdlSWQ6bn0pKSxpfSx0aGlzLmNsb3NlPSgpPT57dGhpcy5yZXNwb25zZU1hcC5mb3JFYWNoKChlPT5lLnJlamVjdChcIkNvbm5lY3Rpb24gaGFzIGNsb3NlZC5cIikpKSx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5jbG9zZSgpLHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmNsb3NlKCksdGhpcy5ydGMucnRjQ2xpZW50LmNsb3NlKCl9LHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGU9Pnt2YXIgdDtjb25zdHttZXNzYWdlSWQ6bixwYXlsb2FkOmksc3VjY2VzczpyLGVycm9yOm99PUpTT04ucGFyc2UoZS5kYXRhKSx7cmVzb2x2ZTpzLHJlamVjdDphfT1udWxsIT09KHQ9dGhpcy5yZXNwb25zZU1hcC5nZXQobikpJiZ2b2lkIDAhPT10P3Q6e307cyYmYT8odGhpcy5yZXNwb25zZU1hcC5kZWxldGUobikscj9zKGkpOmEobykpOihjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCBmaW5kIGlkIGluIHJlc3BvbnNlTWFwLlwiKSxjb25zb2xlLmxvZyhlKSl9KSksdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLChhc3luYyBlPT57Y29uc3R7bWVzc2FnZUlkOm4sYWN0aW9uOnIscGF5bG9hZDpzfT1KU09OLnBhcnNlKGUuZGF0YSk7aWYobyh0aGlzLGkpKXRyeXtjb25zdCBlPWF3YWl0IG8odGhpcyxpKS5jYWxsKHRoaXMscixzLHQpO3RoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHBheWxvYWQ6ZSxzdWNjZXNzOiEwfSkpfWNhdGNoKGUpe1wib3BlblwiPT09dGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UucmVhZHlTdGF0ZSYmdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2Uuc2VuZChKU09OLnN0cmluZ2lmeSh7bWVzc2FnZUlkOm4sZXJyb3I6YS5lcnJvclRvUE9KTyhlKSxzdWNjZXNzOiExfSkpfWVsc2VcIm9wZW5cIj09PXRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnJlYWR5U3RhdGUmJnRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHN1Y2Nlc3M6ITEsZXJyb3I6XCJDb25uZWN0aW9uIG5vdCByZWFkeS5cIn0pKX0pKSx0aGlzLnJ0Yy5ydGNDbGllbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuY29ubmVjdGlvblN0YXRlQ2hhbmdlSGFuZGxlciksT2JqZWN0LnZhbHVlcyh0aGlzLnJ0Yy5jaGFubmVscykuZm9yRWFjaCgoZT0+e2Uub25jbG9zZT1lPT57Wy4uLnRoaXMucmVzcG9uc2VNYXAudmFsdWVzKCldLmZvckVhY2goKGU9PmUucmVqZWN0KG5ldyBFcnJvcihcIlJUQ0RhdGFDaGFubmVsIGNsb3NlZCB1bmV4cGVjdGVkbHksIHRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgbWVzc2FnZSBzaXplLiBOb3RlOiBSVEMgQ2hhbm5lbHMgaGF2ZSBhIG1lc3NhZ2Ugc2l6ZSBsaW1pdCBvZiB+MjU1a0IuXCIpKSkpLHRoaXMuY2xvc2UoKSxvKHRoaXMscikmJm8odGhpcyxyKS5jYWxsKHRoaXMpfX0pKX1vbkRpc2Nvbm5lY3QoZSl7aWYobyh0aGlzLHIpKXRocm93IG5ldyBFcnJvcihcIlJUQ0VuZHBvaW50IGRpc2Nvbm5lY3RMaXN0ZW5lciBjYW5ub3QgYmUgc2V0IHR3aWNlLlwiKTtzKHRoaXMscixlKX1yZWNlaXZlKGUpe2lmKG8odGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBFbmRwb2ludC5cIik7cyh0aGlzLGksZSl9Z2V0IGNvbm5lY3RlZCgpe3JldHVyblwiY29ubmVjdGVkXCI9PT10aGlzLnJ0Yy5ydGNDbGllbnQuY29ubmVjdGlvblN0YXRlfX0saT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw1Njk6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDSUNFTWFuYWdlcj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJjaGFubmVsXCIpLHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZD1lPT5uZXcgUHJvbWlzZSgoKHQsbik9PntpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSl0KCk7ZWxzZSBpZihcImNvbm5lY3RpbmdcIj09PWUucmVhZHlTdGF0ZSl7Y29uc3Qgbj0oKT0+e2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKSx0KCl9O2UuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKX1lbHNlIG4obmV3IEVycm9yKFwiVGhpcyBDaGFubmVsIGhhcyBhbHJlYWR5IGNsb3NlZFwiKSl9KSl9c3RhdGljIGNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShlLHQpe2xldCBuO2NvbnN0IGk9bmV3IFByb21pc2UoKGU9PntuPWV9KSkscj1pPT57Y29uc3Qgbz0oKT0+e2kuY2hhbm5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLG4oaS5jaGFubmVsKX07aS5jaGFubmVsLmxhYmVsPT09ZSYmKGkuY2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRhdGFjaGFubmVsXCIscikpfTtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyKFwiZGF0YWNoYW5uZWxcIixyKSxpfWFzeW5jIGxpc3RlbkZvclByb3ZpZGVySWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpLHQse3RpbWVzdGFtcDpEYXRlLm5vdygpfSl9YXN5bmMgcmFpc2VQcm92aWRlckljZShlLHQpe2F3YWl0IHRoaXMud2lyZS5lbnZpcm9ubWVudC5yYWlzZUV2ZW50KHRoaXMuY3JlYXRlUm91dGVTdHJpbmcodGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSksdCl9YXN5bmMgbGlzdGVuRm9yQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSx0LHt0aW1lc3RhbXA6RGF0ZS5ub3coKX0pfWFzeW5jIHJhaXNlQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LnJhaXNlRXZlbnQodGhpcy5jcmVhdGVSb3V0ZVN0cmluZyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdCl9Y2xlYW51cEljZUxpc3RlbmVycyhlKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnModGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSl9Y3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpe3JldHVybmBpY2UtY2xpZW50LSR7ZX1gfWNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpe3JldHVybmBpY2UtcHJvdmlkZXItJHtlfWB9Y3JlYXRlUm91dGVTdHJpbmcoZSl7cmV0dXJuYGNoYW5uZWwvJHtlfWB9Y3JlYXRlUnRjUGVlcigpe3JldHVybiB0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0UnRjUGVlcigpfWFzeW5jIHN0YXJ0Q2xpZW50T2ZmZXIoKXtjb25zdCBlPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0PXRoaXMuY3JlYXRlUnRjUGVlcigpO3QuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLChhc3luYyB0PT57dmFyIG47dC5jYW5kaWRhdGUmJmF3YWl0IHRoaXMucmFpc2VDbGllbnRJY2UoZSx7Y2FuZGlkYXRlOm51bGw9PT0obj10LmNhbmRpZGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4udG9KU09OKCl9KX0pKSxhd2FpdCB0aGlzLmxpc3RlbkZvclByb3ZpZGVySWNlKGUsKGFzeW5jIGU9Pnthd2FpdCB0LmFkZEljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSl9KSk7Y29uc3Qgbj17cmVxdWVzdDp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVxdWVzdFwiKSxyZXNwb25zZTp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVzcG9uc2VcIil9LGk9YXdhaXQgdC5jcmVhdGVPZmZlcigpO2F3YWl0IHQuc2V0TG9jYWxEZXNjcmlwdGlvbihpKTtjb25zdCByPVByb21pc2UuYWxsKFtuLnJlcXVlc3Qsbi5yZXNwb25zZV0ubWFwKHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZCkpLnRoZW4oKCgpPT57fSkpO3JldHVybntydGNDbGllbnQ6dCxjaGFubmVsczpuLG9mZmVyOmkscnRjQ29ubmVjdGlvbklkOmUsY2hhbm5lbHNPcGVuZWQ6cn19YXN5bmMgZmluaXNoQ2xpZW50T2ZmZXIoZSx0LG4pe3JldHVybiBhd2FpdCBlLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpLGF3YWl0IG4sITB9YXN5bmMgY3JlYXRlUHJvdmlkZXJBbnN3ZXIoZSx0KXtjb25zdCBuPXRoaXMuY3JlYXRlUnRjUGVlcigpLGk9ci5jcmVhdGVEYXRhQ2hhbm5lbFByb21pc2UoXCJyZXF1ZXN0XCIsbiksbz1yLmNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShcInJlc3BvbnNlXCIsbik7bi5hZGRFdmVudExpc3RlbmVyKFwiaWNlY2FuZGlkYXRlXCIsKGFzeW5jIHQ9Pnt2YXIgbjt0LmNhbmRpZGF0ZSYmYXdhaXQgdGhpcy5yYWlzZVByb3ZpZGVySWNlKGUse2NhbmRpZGF0ZTpudWxsPT09KG49dC5jYW5kaWRhdGUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnRvSlNPTigpfSl9KSksYXdhaXQgdGhpcy5saXN0ZW5Gb3JDbGllbnRJY2UoZSwoYXN5bmMgZT0+e2F3YWl0IG4uYWRkSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKX0pKSxhd2FpdCBuLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpO2NvbnN0IHM9YXdhaXQgbi5jcmVhdGVBbnN3ZXIoKTthd2FpdCBuLnNldExvY2FsRGVzY3JpcHRpb24ocyk7Y29uc3QgYT1Qcm9taXNlLmFsbChbaSxvXSkudGhlbigoKFt0LG5dKT0+KHRoaXMuY2xlYW51cEljZUxpc3RlbmVycyhlKSx7cmVxdWVzdDp0LHJlc3BvbnNlOm59KSkpO3JldHVybntydGNDbGllbnQ6bixhbnN3ZXI6cyxjaGFubmVsczphfX19dC5SVENJQ0VNYW5hZ2VyPXJ9LDM4NzA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxzPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfSxhPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJUQ0luZm89dC5SVENTdHJhdGVneT12b2lkIDA7Y29uc3QgYz1uKDg3NzYpO3QuUlRDU3RyYXRlZ3k9Y2xhc3N7Y29uc3RydWN0b3IoKXtpLnNldCh0aGlzLG51bGwpLHIuc2V0KHRoaXMsbmV3IE1hcCksby5zZXQodGhpcywhMCksdGhpcy5zZW5kPWFzeW5jKGUsdCxuKT0+dGhpcy5nZXRFbmRwb2ludEJ5SWQoZSkuc2VuZCh0LG4pLHRoaXMuY2xvc2U9YXN5bmMoKT0+e3ModGhpcyxvKSYmKHModGhpcyxyKS5mb3JFYWNoKChlPT5lLmNsb3NlKCkpKSxhKHRoaXMscixuZXcgTWFwKSksYSh0aGlzLG8sITEpfX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe3RoaXMuZ2V0RW5kcG9pbnRCeUlkKGUpLm9uRGlzY29ubmVjdCh0KX1yZWNlaXZlKGUpe2lmKHModGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBTdHJhdGVneVwiKTthKHRoaXMsaSxlKSxzKHRoaXMscikuZm9yRWFjaCgoZT0+ZS5yZWNlaXZlKHModGhpcyxpKSkpKX1nZXRFbmRwb2ludEJ5SWQoZSl7Y29uc3QgdD1zKHRoaXMscikuZ2V0KGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggZW5kcG9pbnQgaWQgJHtlfSBpcyBub3QgY29ubmVjdGVkYCk7cmV0dXJuIHR9Z2V0IGNvbm5lY3RlZCgpe3JldHVybiBzKHRoaXMsbyl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gcyh0aGlzLHIpLmhhcyhlKX1hZGRFbmRwb2ludChlLHQpe2lmKCFzKHRoaXMsbykpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiQWRkaW5nIGVuZHBvaW50IHRvIGRpc2Nvbm5lY3RlZCBSVEMgU3RyYXRlZ3lcIik7Y29uc3Qgbj1uZXcgYy5SVENFbmRwb2ludCh0LnJ0Yyx0LmVuZHBvaW50SWRlbnRpdHkpO3ModGhpcyxpKSYmbi5yZWNlaXZlKHModGhpcyxpKSkscyh0aGlzLHIpLnNldChlLG4pfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7cyh0aGlzLHIpLmRlbGV0ZShlKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe2NvbnN0IHQ9ZT0+XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lO3JldHVybiB0KGUpJiZ0KGUuZW5kcG9pbnRJZGVudGl0eSkmJnQoZS5ydGMpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5lbmRwb2ludElkZW50aXR5LmVuZHBvaW50SWR9fSxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcCx0LlJUQ0luZm89e3ZlcnNpb246MSxtaW5pbXVtVmVyc2lvbjowLHR5cGU6XCJydGNcIn19LDI5NDI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWxQcm92aWRlcj12b2lkIDA7Y29uc3Qgbz1uKDc1MzkpLHM9bigyMzAwKTtsZXQgYT0oKCk9Pnt2YXIgZSx0LG4sYSxjO2NsYXNzIGQgZXh0ZW5kcyBvLkNoYW5uZWxCYXNle2NvbnN0cnVjdG9yKGgsbCx1KXtzdXBlcigpLGUuc2V0KHRoaXMsdm9pZCAwKSx0LnNldCh0aGlzLHZvaWQgMCksbi5zZXQodGhpcyx2b2lkIDApLGEuc2V0KHRoaXMsKHQ9Pntjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLmVuZHBvaW50SWQhPT10LmVuZHBvaW50SWQpKTtyKHRoaXMsbikuY2xvc2VFbmRwb2ludCh0LmVuZHBvaW50SWQpLGkodGhpcyxlLG8pfSkpLHRoaXMucHJvY2Vzc0FjdGlvbj1hc3luYyhlLHQsbik9PihkLmNsaWVudElzTXVsdGlSdW50aW1lKG4pJiYhcy5ydW50aW1lVXVpZE1lZXRzTWluaW11bVJ1bnRpbWVWZXJzaW9uKG4ucnVudGltZVV1aWQsXCIxOC44Ny41Ni4wXCIpP3RoaXMuaGFuZGxlTXVsdGlSdW50aW1lTGVnYWN5Q2xpZW50KG4pOnRoaXMuY2hlY2tGb3JDbGllbnRDb25uZWN0aW9uKG4pLHN1cGVyLnByb2Nlc3NBY3Rpb24oZSx0LG4pKSxjLnNldCh0aGlzLCgoKT0+e3IodGhpcyxuKS5jbG9zZSgpO2NvbnN0IGU9ZC5yZW1vdmFsTWFwLmdldCh0aGlzKTtlJiZlKCl9KSksaSh0aGlzLHQsbmV3IG8uUHJvdGVjdGVkSXRlbXMoaCxsKSksdGhpcy5jb25uZWN0TGlzdGVuZXI9KCk9Pnt9LHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSxpKHRoaXMsZSxbXSksaSh0aGlzLG4sdSksdS5yZWNlaXZlKHRoaXMucHJvY2Vzc0FjdGlvbil9Z2V0IGNvbm5lY3Rpb25zKCl7cmV0dXJuWy4uLnIodGhpcyxlKV19c3RhdGljIGhhbmRsZUNsaWVudERpc2Nvbm5lY3Rpb24oZSx0KXtjb25zdCBuPWUuY29ubmVjdGlvbnMuZmluZCgoZT0+ZS5lbmRwb2ludElkPT09dC5lbmRwb2ludElkKSk7bj9yKGUsYSkuY2FsbChlLG4pOmUuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLnV1aWQ9PT10LnV1aWQmJmUubmFtZT09PXQubmFtZSkpLmZvckVhY2gocihlLGEpKSxlLmRpc2Nvbm5lY3RMaXN0ZW5lcih0KX1zdGF0aWMgc2V0UHJvdmlkZXJSZW1vdmFsKGUsdCl7ZC5yZW1vdmFsTWFwLnNldChlLHQpfWRpc3BhdGNoKGUsdCxpKXt2YXIgbztjb25zdCBzPW51bGwhPT0obz1lLmVuZHBvaW50SWQpJiZ2b2lkIDAhPT1vP286dGhpcy5nZXRFbmRwb2ludElkRm9yT3BlbkZpbklkKGUsdCk7cmV0dXJuIHMmJnIodGhpcyxuKS5pc0VuZHBvaW50Q29ubmVjdGVkKHMpP3IodGhpcyxuKS5zZW5kKHMsdCxpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHtlLnV1aWR9IC8gbmFtZTogJHtlLm5hbWV9IC8gZW5kcG9pbnRJZDogJHtzfSBubyBsb25nZXIgY29ubmVjdGVkLmApKX1hc3luYyBwcm9jZXNzQ29ubmVjdGlvbih0LG4pe3JldHVybiByKHRoaXMsZSkucHVzaCh0KSx0aGlzLmNvbm5lY3RMaXN0ZW5lcih0LG4pfXB1Ymxpc2goZSx0KXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5tYXAoKGk9PnIodGhpcyxuKS5zZW5kKGkuZW5kcG9pbnRJZCxlLHQpKSl9b25Db25uZWN0aW9uKGUpe3RoaXMuY29ubmVjdExpc3RlbmVyPWV9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPWV9YXN5bmMgZGVzdHJveSgpe2NvbnN0IG49cih0aGlzLHQpLHtjaGFubmVsTmFtZTpvfT1uLnByb3ZpZGVySWRlbnRpdHk7aSh0aGlzLGUsW10pLGF3YWl0IG4ud2lyZS5zZW5kQWN0aW9uKFwiZGVzdHJveS1jaGFubmVsXCIse2NoYW5uZWxOYW1lOm99KSxyKHRoaXMsYykuY2FsbCh0aGlzKX1jaGVja0ZvckNsaWVudENvbm5lY3Rpb24oZSl7aWYoIXRoaXMuaXNDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuXFxuICAgICAgICAgICAgICAgICAgICBDbGllbnQgSWRlbnRpdHk6IHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWlzQ2xpZW50Q29ubmVjdGVkKGUpe3JldHVybiBkLmNsaWVudElkZW50aXR5SW5jbHVkZXNFbmRwb2ludElkKGUpP3RoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC5lbmRwb2ludElkPT09ZS5lbmRwb2ludElkJiZ0LnV1aWQ9PT1lLnV1aWQmJnQubmFtZT09PWUubmFtZSkpOnRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl9aXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl7cmV0dXJuIHRoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKX1oYW5kbGVNdWx0aVJ1bnRpbWVMZWdhY3lDbGllbnQoZSl7aWYoIXRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuIENsaWVudCBJZGVudGl0eTpcXG4gICAgICAgICAgICAgICAgICAgIHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWdldEVuZHBvaW50SWRGb3JPcGVuRmluSWQoZSxuKXt2YXIgaTtjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKCh0PT50Lm5hbWU9PT1lLm5hbWUmJnQudXVpZD09PWUudXVpZCkpO2lmKG8ubGVuZ3RoPj0yKXtjb25zdCBpPXIodGhpcyx0KSx7dXVpZDpvLG5hbWU6c309ZSxhPW51bGw9PWk/dm9pZCAwOmkucHJvdmlkZXJJZGVudGl0eS51dWlkLGM9bnVsbD09aT92b2lkIDA6aS5wcm92aWRlcklkZW50aXR5Lm5hbWU7Y29uc29sZS53YXJuKGBXQVJOSU5HOiBEaXNwYXRjaCBjYWxsIG1heSBoYXZlIHVuaW50ZW5kZWQgcmVzdWx0cy4gVGhlIFwidG9cIiBhcmd1bWVudCBvZiB5b3VyIGRpc3BhdGNoIGNhbGwgaXMgbWlzc2luZyB0aGVcXG4gICAgICAgICAgICAgICAgXCJlbmRwb2ludElkXCIgcGFyYW1ldGVyLiBUaGUgaWRlbnRpdHkgeW91IGFyZSBkaXNwYXRjaGluZyB0byAoe3V1aWQ6ICR7b30sIG5hbWU6ICR7c319KVxcbiAgICAgICAgICAgICAgICBoYXMgbXVsdGlwbGUgY2hhbm5lbENsaWVudHMgZm9yIHRoaXMgY2hhbm5lbC4gWW91ciBkaXNwYXRjaGVkIGFjdGlvbjogKCR7bn0pIGZyb20gdGhlIHByb3ZpZGVyOlxcbiAgICAgICAgICAgICAgICAoe3V1aWQ6ICR7YX0sIG5hbWU6ICR7Y319KSB3aWxsIG9ubHkgYmUgcHJvY2Vzc2VkIGJ5IHRoZSBtb3N0IHJlY2VudGx5LWNyZWF0ZWQgY2xpZW50LmApfXJldHVybiBudWxsPT09KGk9by5wb3AoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SWRlbnRpdHlJbmNsdWRlc0VuZHBvaW50SWQoZSl7cmV0dXJuIHZvaWQgMCE9PWUuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SXNNdWx0aVJ1bnRpbWUoZSl7cmV0dXJuIHZvaWQgMCE9PWUucnVudGltZVV1aWR9fXJldHVybiBlPW5ldyBXZWFrTWFwLHQ9bmV3IFdlYWtNYXAsbj1uZXcgV2Vha01hcCxhPW5ldyBXZWFrTWFwLGM9bmV3IFdlYWtNYXAsZC5yZW1vdmFsTWFwPW5ldyBXZWFrTWFwLGR9KSgpO3QuQ2hhbm5lbFByb3ZpZGVyPWF9LDgzNDc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJBcHBQYXlsb2FkPXZvaWQgMDtjb25zdCBpPW4oNjQ2NSkscj1uKDk2NTkpLG89bigzMTI3KSxzPW4oNzcyMiksYT1uKDQ5OTkpO2NsYXNzIGMgZXh0ZW5kcyByLkJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5ldmVudHM9e3N1YnNjcmliZXJBZGRlZDpcInN1YnNjcmliZXItYWRkZWRcIixzdWJzY3JpYmVyUmVtb3ZlZDpcInN1YnNjcmliZXItcmVtb3ZlZFwifSx0aGlzLnJlZkNvdW50ZXI9bmV3IG8uZGVmYXVsdCx0aGlzLkNoYW5uZWw9bmV3IHMuQ2hhbm5lbChlKSx0aGlzLmVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKSx0aGlzLm9uPXRoaXMuZW1pdHRlci5vbi5iaW5kKHRoaXMuZW1pdHRlciksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnM9dGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycy5iaW5kKHRoaXMuZW1pdHRlcil9cHVibGlzaChlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInB1Ymxpc2gtbWVzc2FnZVwiLHt0b3BpYzplLG1lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNlbmQoZSx0LG4pe2NvbnN0IGk9YS52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKGkpdGhyb3cgbmV3IEVycm9yKGkpO2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1tZXNzYWdlXCIse2Rlc3RpbmF0aW9uVXVpZDplLnV1aWQsZGVzdGluYXRpb25XaW5kb3dOYW1lOmUubmFtZSx0b3BpYzp0LG1lc3NhZ2U6bixzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pfXN1YnNjcmliZShlLHQsbil7Y29uc3QgaT10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsZS5uYW1lfHxcIipcIix0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLm9uKGksbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uRmlyc3QoaSwoKCk9PnRoaXMud2lyZS5zZW5kQWN0aW9uKFwic3Vic2NyaWJlXCIse3NvdXJjZVV1aWQ6ZS51dWlkLHNvdXJjZVdpbmRvd05hbWU6ZS5uYW1lfHxcIipcIix0b3BpYzp0LGRlc3RpbmF0aW9uV2luZG93TmFtZTp0aGlzLm1lLm5hbWV9KSksKCgpPT5Qcm9taXNlLnJlc29sdmUoKSkpfXVuc3Vic2NyaWJlKGUsdCxuKXtjb25zdCBpPWUubmFtZXx8XCIqXCIscj10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsaSx0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLnJlbW92ZUxpc3RlbmVyKHIsbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uTGFzdChyLCgoKT0+dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZVwiLHtzb3VyY2VVdWlkOmUudXVpZCxzb3VyY2VXaW5kb3dOYW1lOmksdG9waWM6dCxkZXN0aW5hdGlvbldpbmRvd05hbWU6dGhpcy5tZS5uYW1lfSkpLCgoKT0+bmV3IFByb21pc2UoKGU9PmUpKS50aGVuKCgoKT0+e30pKSkpfXByb2Nlc3NNZXNzYWdlKGUpe2NvbnN0e3BheWxvYWQ6e21lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOm4sc291cmNlVXVpZDppLHRvcGljOnJ9fT1lLG89W3RoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGksbixyKSx0aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShpLFwiKlwiLHIpLHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KFwiKlwiLFwiKlwiLHIpXSxzPXt1dWlkOmksbmFtZTpufTtvLmZvckVhY2goKGU9Pnt0aGlzLmVtaXR0ZXIuZW1pdChlLHQscyl9KSl9ZW1pdFN1YnNjcml2ZXJFdmVudChlLHQpe2NvbnN0e3BheWxvYWQ6e3RhcmdldE5hbWU6bix1dWlkOmksdG9waWM6cn19PXQsbz17bmFtZTpuLHV1aWQ6aSx0b3BpYzpyfTt0aGlzLmVtaXR0ZXIuZW1pdChlLG8pfWNyZWF0ZVN1YnNjcmlwdGlvbktleShlLHQsbil7Y29uc3QgaT10fHxcIipcIjtpZighKGUmJmkmJm4pKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgdXVpZCwgbmFtZSwgb3IgdG9waWMgc3RyaW5nXCIpO3JldHVybiBmdW5jdGlvbiguLi5lKXtyZXR1cm4gZS5tYXAoKGU9PkJ1ZmZlci5mcm9tKGAke2V9YCkudG9TdHJpbmcoXCJiYXNlNjRcIikpKS5qb2luKFwiL1wiKX0oZSxpLG4pfW9ubWVzc2FnZShlKXtjb25zdHthY3Rpb246dH09ZTtzd2l0Y2godCl7Y2FzZVwicHJvY2Vzcy1tZXNzYWdlXCI6dGhpcy5wcm9jZXNzTWVzc2FnZShlKTticmVhaztjYXNlIHRoaXMuZXZlbnRzLnN1YnNjcmliZXJBZGRlZDp0aGlzLmVtaXRTdWJzY3JpdmVyRXZlbnQodGhpcy5ldmVudHMuc3Vic2NyaWJlckFkZGVkLGUpO2JyZWFrO2Nhc2UgdGhpcy5ldmVudHMuc3Vic2NyaWJlclJlbW92ZWQ6dGhpcy5lbWl0U3Vic2NyaXZlckV2ZW50KHRoaXMuZXZlbnRzLnN1YnNjcmliZXJSZW1vdmVkLGUpfXJldHVybiEwfX10LmRlZmF1bHQ9Yyx0LkludGVyQXBwUGF5bG9hZD1jbGFzc3t9fSwyOTc3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDIwNTcpLG89big3MTM4KSxzPShlLC4uLnQpPT5uZXcgZSguLi50KTtjbGFzcyBhIGV4dGVuZHMgaS5CYXNle2FzeW5jIGluaXQoZSx0PXMpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1pbml0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShgaW50ZXJvcC1icm9rZXItJHtlfWApLGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRJbmZvKCk7cmV0dXJuIHQoci5JbnRlcm9wQnJva2VyLHRoaXMud2lyZSxuLGkuaW5pdGlhbE9wdGlvbnMuaW50ZXJvcEJyb2tlckNvbmZpZ3VyYXRpb258fHt9KX1jb25uZWN0U3luYyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY29ubmVjdC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLkludGVyb3BDbGllbnQodGhpcy53aXJlLGUsdCl9fXQuZGVmYXVsdD1hfSwyMDU3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkludGVyb3BCcm9rZXI9dm9pZCAwO2NvbnN0IGk9big5NjU5KSxyPW4oNzExNSksbz1uKDE3ODcpO2xldCBzPVt7aWQ6XCJncmVlblwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjMDBDQzg4XCIsbmFtZTpcImdyZWVuXCJ9fSx7aWQ6XCJwdXJwbGVcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiIzhDNjFGRlwiLG5hbWU6XCJwdXJwbGVcIn19LHtpZDpcIm9yYW5nZVwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjRkY4QzRDXCIsbmFtZTpcIm9yYW5nZVwifX0se2lkOlwicmVkXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjVFNjBcIixuYW1lOlwicmVkXCJ9fSx7aWQ6XCJwaW5rXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjhGQjhcIixuYW1lOlwicGlua1wifX0se2lkOlwieWVsbG93XCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNFOUZGOEZcIixuYW1lOlwieWVsbG93XCJ9fV07Y2xhc3MgYSBleHRlbmRzIGkuQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSksdGhpcy5jaGFubmVsPXQsdGhpcy5pbnRlcm9wQ2xpZW50cz1uZXcgTWFwLHRoaXMuY29udGV4dEdyb3Vwc0J5SWQ9bmV3IE1hcCxuLmNvbnRleHRHcm91cHMmJihzPW4uY29udGV4dEdyb3VwcyksdGhpcy5pbnRlbnRDbGllbnRNYXA9bmV3IE1hcCx0aGlzLmxhc3RDb250ZXh0TWFwPW5ldyBNYXAsdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5zZXRDb250ZXh0R3JvdXBNYXAoKSx0aGlzLndpcmVDaGFubmVsKHQpfXNldENvbnRleHQoe2NvbnRleHQ6ZX0sdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIW58fCFuLmNvbnRleHRHcm91cElkKXRocm93IG4/bmV3IEVycm9yKFwiWW91IG11c3Qgam9pbiBhIGNvbnRleHQgZ3JvdXAgYmVmb3JlIHlvdSBjYW4gc2V0IGNvbnRleHQuXCIpOm5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIENsaWVudCBTdGF0ZSBNYXBgKTt7Y29uc3R7Y29udGV4dEdyb3VwSWQ6dH09bjtpZighdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModCkpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgaGFzIGEgY29udGV4dCBncm91cCB0aGF0IGlzbid0IGluIHRoZSBjb250ZXh0IGdyb3VwIG1hcHBpbmc6ICR7dH0uYCk7Y29uc3QgaT1hLmNoZWNrQ29udGV4dEludGVncml0eShlKTtpZighMT09PWkuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7aS5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGUpfWApO2NvbnN0IHI9dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQodCksbz1lLnR5cGU7ci5zZXQobyxlKSx0aGlzLmxhc3RDb250ZXh0TWFwLnNldCh0LG8pLEFycmF5LmZyb20odGhpcy5pbnRlcm9wQ2xpZW50cy52YWx1ZXMoKSkuZmlsdGVyKChlPT5lLmNvbnRleHRHcm91cElkPT09dCkpLmZvckVhY2goKHQ9Pntmb3IoY29uc3RbLG5db2YgdC5jb250ZXh0SGFuZGxlcnMpYS5pc0NvbnRleHRUeXBlQ29tcGF0aWJsZShvLG4uY29udGV4dFR5cGUpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQuY2xpZW50SWRlbnRpdHksbi5oYW5kbGVySWQsZSl9KSl9fWdldEN1cnJlbnRDb250ZXh0KGUsdCl7dmFyIG47dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY3VycmVudC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IGk9dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighKG51bGw9PWk/dm9pZCAwOmkuY29udGV4dEdyb3VwSWQpKXRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGJlIGEgbWVtYmVyIG9mIGEgY29udGV4dCBncm91cCB0byBjYWxsIGdldEN1cnJlbnRDb250ZXh0XCIpO2NvbnN0e2NvbnRleHRHcm91cElkOnJ9PWksbz10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChyKSxzPXRoaXMubGFzdENvbnRleHRNYXAuZ2V0KHIpLGE9bnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuY29udGV4dFR5cGUpJiZ2b2lkIDAhPT1uP246cztyZXR1cm4gbyYmYT9vLmdldChhKTp2b2lkIDB9YXN5bmMgam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZSx0YXJnZXQ6dH0sbil7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1qb2luLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksdCl7YS5oYXNFbmRwb2ludElkKHQpJiZhd2FpdCB0aGlzLmFkZENsaWVudFRvQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSx0KTtjb25zdCBuPXRoaXMuY2hhbm5lbC5jb25uZWN0aW9ucy5maWx0ZXIoKGU9PmUudXVpZD09PXQudXVpZCYmZS5uYW1lPT09dC5uYW1lKSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgR2l2ZW4gSWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfSBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm9wIEJyb2tlci5gKTtuLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oYE1vcmUgdGhhbiBvbmUgY29ubmVjdGlvbiBmb3VuZCBmb3IgaWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfWApO2NvbnN0IGk9W107Zm9yKGNvbnN0IHQgb2YgbilpLnB1c2godGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sdCkpO2F3YWl0IFByb21pc2UuYWxsKGkpfWVsc2UgYXdhaXQgdGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sbil9YXN5bmMgYWRkQ2xpZW50VG9Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmV9LHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItYWRkLWNsaWVudC10by1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighbil0aHJvdyBuZXcgRXJyb3IoYENsaWVudCB3aXRoIElkZW50aXR5OiAke3QudXVpZH0gJHt0Lm5hbWV9IG5vdCBpbiBDbGllbnQgU3RhdGUgTWFwYCk7aWYoIXRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSkpdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0aW5nIHRvIGpvaW4gYSBjb250ZXh0IGdyb3VwIHRoYXQgZG9lcyBub3QgZXhpc3Q6ICR7ZX0uIFlvdSBtYXkgb25seSBqb2luIGV4aXN0aW5nIGNvbnRleHQgZ3JvdXBzLmApO2lmKG4uY29udGV4dEdyb3VwSWQhPT1lKXtuLmNvbnRleHRHcm91cElkPWUsYXdhaXQgYS5zZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKHQsZSk7Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChlKTtmb3IoY29uc3RbLGVdb2Ygbi5jb250ZXh0SGFuZGxlcnMpe2NvbnN0e2NvbnRleHRUeXBlOm4saGFuZGxlcklkOnJ9PWU7aWYodm9pZCAwPT09bilpLmZvckVhY2goKChlLG4pPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcih0LHIsZSl9KSk7ZWxzZSBpZihpLmhhcyhuKSl7Y29uc3QgZT1pLmdldChuKTtlJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQscixlKX19fX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKHt0YXJnZXQ6ZX0sdCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1yZW1vdmUtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLGUpe2EuaGFzRW5kcG9pbnRJZChlKSYmYXdhaXQgdGhpcy5yZW1vdmVDbGllbnRGcm9tQ29udGV4dEdyb3VwKGUpO2NvbnN0IHQ9dGhpcy5jaGFubmVsLmNvbm5lY3Rpb25zLmZpbHRlcigodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKTtpZighdC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBObyBjb25uZWN0aW9uIGZvdW5kIGZvciBnaXZlbiBJZGVudGl0eSAke2UudXVpZH0gJHtlLm5hbWV9YCk7dC5sZW5ndGg+MSYmY29uc29sZS53YXJuKGBNb3JlIHRoYW4gb25lIGNvbm5lY3Rpb24gZm91bmQgZm9yIGlkZW50aXR5ICR7ZS51dWlkfSAke2UubmFtZX1gKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIHQpbi5wdXNoKHRoaXMucmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKSk7YXdhaXQgUHJvbWlzZS5hbGwobil9ZWxzZSBhd2FpdCB0aGlzLnJlbW92ZUNsaWVudEZyb21Db250ZXh0R3JvdXAodCl9YXN5bmMgcmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXJlbW92ZS1jbGllbnQtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9dGhpcy5nZXRDbGllbnRTdGF0ZShlKTt0JiYodC5jb250ZXh0R3JvdXBJZD12b2lkIDApLGF3YWl0IGEuc2V0Q3VycmVudENvbnRleHRHcm91cEluQ2xpZW50T3B0aW9ucyhlLG51bGwpfWdldENvbnRleHRHcm91cHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY29udGV4dC1ncm91cHNcIikuY2F0Y2goKGU9Pnt9KSkscy5tYXAoKGU9Pih7Li4uZX0pKSl9Z2V0SW5mb0ZvckNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0pe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWdldC1pbmZvLWZvci1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLHRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSl9Z2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksQXJyYXkuZnJvbSh0aGlzLmludGVyb3BDbGllbnRzLnZhbHVlcygpKS5maWx0ZXIoKHQ9PnQuY29udGV4dEdyb3VwSWQ9PT1lKSkubWFwKChlPT5lLmNsaWVudElkZW50aXR5KSl9YXN5bmMgaGFuZGxlRmlyZWRJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmZpcmVJbnRlbnRcIixcImZkYzMucmFpc2VJbnRlbnRcIixcIkludGVyb3BCcm9rZXIuaGFuZGxlRmlyZWRJbnRlbnRcIix0KTt0aHJvdyBjb25zb2xlLndhcm4obiksbmV3IEVycm9yKG8uQlJPS0VSX0VSUk9SUy5maXJlSW50ZW50KX1hc3luYyBzZXRJbnRlbnRUYXJnZXQoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXNldC1pbnRlbnQtdGFyZ2V0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSksaT1gaW50ZW50LWhhbmRsZXItJHtlLm5hbWV9YDtpZihuKXtjb25zdCB0PW4uZ2V0KGkpO2lmKHQpe2lmKHQucGVuZGluZ0ludGVudHMucHVzaChlKSx0LmNsaWVudElkZW50aXR5JiZ0LmlzUmVhZHkpe2NvbnN0e2NsaWVudElkZW50aXR5OmUscGVuZGluZ0ludGVudHM6bn09dDt0cnl7Y29uc3Qgcj1uW24ubGVuZ3RoLTFdO2F3YWl0IHRoaXMuY2hhbm5lbC5kaXNwYXRjaChlLGksciksdC5wZW5kaW5nSW50ZW50cz1bXX1jYXRjaChuKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlciBmb3IgY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCksdC5pc1JlYWR5PSExfX19ZWxzZSBuLnNldChpLHtpc1JlYWR5OiExLHBlbmRpbmdJbnRlbnRzOltlXX0pfWVsc2V7dGhpcy5pbnRlbnRDbGllbnRNYXAuc2V0KHQubmFtZSxuZXcgTWFwKTtjb25zdCBuPXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldCh0Lm5hbWUpO24mJm4uc2V0KGkse2lzUmVhZHk6ITEscGVuZGluZ0ludGVudHM6W2VdfSl9fWFzeW5jIGhhbmRsZUluZm9Gb3JJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRcIixcImZkYzMuZmluZEludGVudFwiLFwiSW50ZXJvcEJyb2tlci5oYW5kbGVJbmZvRm9ySW50ZW50XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudCl9YXN5bmMgaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsXCJmZGMzLmZpbmRJbnRlbnRzQnlDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQpfWFzeW5jIGhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZmlyZUludGVudEZvckNvbnRleHRcIixcImZkYzMucmFpc2VJbnRlbnRGb3JDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dFwiLHQpO3Rocm93IGNvbnNvbGUud2FybihuKSxuZXcgRXJyb3Ioby5CUk9LRVJfRVJST1JTLmZpcmVJbnRlbnRGb3JDb250ZXh0KX1kZWNvcmF0ZVNuYXBzaG90KGUpe3JldHVybnsuLi5lLGludGVyb3BTbmFwc2hvdERldGFpbHM6e2NvbnRleHRHcm91cFN0YXRlczp0aGlzLmdldENvbnRleHRHcm91cFN0YXRlcygpfX19YXBwbHlTbmFwc2hvdChlLHQpe3ZhciBuO2NvbnN0IGk9bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuaW50ZXJvcFNuYXBzaG90RGV0YWlscyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY29udGV4dEdyb3VwU3RhdGVzO2kmJigobnVsbD09dD92b2lkIDA6dC5jbG9zZUV4aXN0aW5nV2luZG93cyl8fHRoaXMudXBkYXRlRXhpc3RpbmdDbGllbnRzKGkpLHRoaXMucmVoeWRyYXRlQ29udGV4dEdyb3VwU3RhdGVzKGkpKX11cGRhdGVFeGlzdGluZ0NsaWVudHMoZSl7dGhpcy5pbnRlcm9wQ2xpZW50cy5mb3JFYWNoKCh0PT57Y29uc3R7Y2xpZW50SWRlbnRpdHk6bixjb250ZXh0R3JvdXBJZDppLGNvbnRleHRIYW5kbGVyczpyfT10O2lmKGkpe2NvbnN0IHQ9ZVtpXTtmb3IoY29uc3RbLGVdb2YgT2JqZWN0LmVudHJpZXModCkpci5mb3JFYWNoKCh0PT57Y29uc3R7aGFuZGxlcklkOmksY29udGV4dFR5cGU6cn09dDthLmlzQ29udGV4dFR5cGVDb21wYXRpYmxlKGUudHlwZSxyKSYmdGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLGksZSl9KSl9fSkpfWdldENvbnRleHRHcm91cFN0YXRlcygpe3JldHVybiBhLnRvT2JqZWN0KHRoaXMuY29udGV4dEdyb3Vwc0J5SWQpfXJlaHlkcmF0ZUNvbnRleHRHcm91cFN0YXRlcyhlKXtjb25zdCB0PU9iamVjdC5lbnRyaWVzKGUpO2Zvcihjb25zdFtlLG5db2YgdCl7Y29uc3QgdD1PYmplY3QuZW50cmllcyhuKTtmb3IoY29uc3RbbixpXW9mIHQpdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXMoZSk/dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoZSkuc2V0KG4saSk6Y29uc29sZS53YXJuKGBBdHRlbXB0aW5nIHRvIHNldCBhIGNvbnRleHQgZ3JvdXAgdGhhdCBpc24ndCBpbiB0aGUgY29udGV4dCBncm91cCBtYXBwaW5nLiBTa2lwcGluZyBjb250ZXh0IGdyb3VwIHJlaHlkcmF0aW9uIGZvcjogJHtlfWApfX1jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQoe2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LG4pe2NvbnN0IGk9e2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LHI9dGhpcy5nZXRDbGllbnRTdGF0ZShuKTtpZihudWxsPT1yfHxyLmNvbnRleHRIYW5kbGVycy5zZXQodCxpKSxyJiZyLmNvbnRleHRHcm91cElkKXtjb25zdHtjb250ZXh0R3JvdXBJZDppfT1yLG89dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoaSk7aWYodm9pZCAwPT09ZSlvLmZvckVhY2goKChlLGkpPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLHQsZSl9KSk7ZWxzZSBpZihvLmhhcyhlKSl7Y29uc3QgaT1vLmdldChlKTtpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKG4sdCxpKX19fWFzeW5jIGludGVudEhhbmRsZXJSZWdpc3RlcmVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm59PWUsaT10aGlzLmludGVudENsaWVudE1hcC5nZXQodC5uYW1lKSxyPW51bGw9PWk/dm9pZCAwOmkuZ2V0KG4pO2lmKGkpaWYocil7Y29uc3R7cGVuZGluZ0ludGVudHM6ZX09cjtyLmNsaWVudElkZW50aXR5PXQsci5pc1JlYWR5PSEwO3RyeXtpZihlLmxlbmd0aD4wKXtjb25zdCBpPWVbZS5sZW5ndGgtMV07YXdhaXQgdGhpcy5jaGFubmVsLmRpc3BhdGNoKHQsbixpKSxyLnBlbmRpbmdJbnRlbnRzPVtdfX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlcjogJHtufSBmb3IgY2xpZW50ICR7dC51dWlkfS8ke3QubmFtZX0vJHt0LmVuZHBvaW50SWR9YCl9fWVsc2UgaS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSk7ZWxzZXt0aGlzLmludGVudENsaWVudE1hcC5zZXQodC5uYW1lLG5ldyBNYXApO2NvbnN0IGU9dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSk7ZSYmZS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSl9fWludm9rZUNvbnRleHRIYW5kbGVyKGUsdCxuKXt0aGlzLmNoYW5uZWwuZGlzcGF0Y2goZSx0LG4pLmNhdGNoKChpPT57Y29uc29sZS5lcnJvcihgRXJyb3IgaW52b2tpbmcgY29udGV4dCBoYW5kbGVyICR7dH0gZm9yIGNvbnRleHQgdHlwZSAke24udHlwZX0gaW4gY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCxpKX0pKX1yZW1vdmVDb250ZXh0SGFuZGxlcih7aGFuZGxlcklkOmV9LHQpe2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtuJiZuLmNvbnRleHRIYW5kbGVycy5kZWxldGUoZSl9aGFuZGxlSm9pblNlc3Npb25Db250ZXh0R3JvdXAoe3Nlc3Npb25Db250ZXh0R3JvdXBJZDplfSx0KXt0cnl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGpvaW4gc2Vzc2lvbiBjb250ZXh0IGdyb3VwOiBtdXN0IHNwZWNpZnkgZ3JvdXAgaWQuXCIpO2NvbnN0IG49dGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmdldChlKTtpZihuKW4ucmVnaXN0ZXJOZXdDbGllbnQodCk7ZWxzZXtjb25zdCBuPW5ldyByLmRlZmF1bHQodGhpcy5jaGFubmVsLGUpO24ucmVnaXN0ZXJOZXdDbGllbnQodCksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLnNldChlLG4pfXJldHVybntoYXNDb25mbGljdDp0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyhlKX19Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGUpfX1nZXRDbGllbnRTdGF0ZShlKXtyZXR1cm4gdGhpcy5pbnRlcm9wQ2xpZW50cy5nZXQoZS5lbmRwb2ludElkKX1zdGF0aWMgdG9PYmplY3QoZSl7Y29uc3QgdD1PYmplY3QuZnJvbUVudHJpZXMoZSksbj17fTtyZXR1cm4gT2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoKFtlLHRdKT0+e2NvbnN0IGk9T2JqZWN0LmZyb21FbnRyaWVzKHQpO25bZV09aX0pKSxufXN0YXRpYyBjaGVja0NvbnRleHRJbnRlZ3JpdHkoZSl7aWYoIWUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiTm8gY29udGV4dCBzdXBwbGllZFwifTtpZihcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IG11c3QgYmUgYW4gT2JqZWN0XCJ9O2lmKCFlLnR5cGUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBtdXN0IGhhdmUgYSB0eXBlIHByb3BlcnR5XCJ9O2lmKGUuaWQmJlwib2JqZWN0XCIhPXR5cGVvZiBlLmlkKXJldHVybntpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgaWQgbXVzdCBiZSBhbiBPYmplY3QgcG9wdWxhdGVkIHdpdGgga2V5LXZhbHVlIGlkZW50aWZpZXJzIChpZiBzZXQpXCJ9O2lmKGUuaWQpe2NvbnN0e2lkOnR9PWUsbj1PYmplY3Qua2V5cyh0KTtsZXQgaT0hMTtpZighbi5sZW5ndGgpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGtleS12YWx1ZSBpZGVudGlmaWVyXCJ9O2lmKG4uZm9yRWFjaCgoZT0+e1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgdFtlXXx8KGk9ITApfSkpLGkpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBrZXktdmFsdWUgaWRlbnRpZmllcnMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wifX1yZXR1cm4gZS5uYW1lJiZcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lP3tpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgbmFtZSBtdXN0IGJlIG9mIHN0cmluZyB0eXBlIChpZiBzZXQpXCJ9Ontpc1ZhbGlkOiEwfX1zdGF0aWMgaGFzRW5kcG9pbnRJZChlKXtyZXR1cm4gdm9pZCAwIT09ZS5lbmRwb2ludElkfXN0YXRpYyBpc0NvbnRleHRUeXBlQ29tcGF0aWJsZShlLHQpe3JldHVybiB2b2lkIDA9PT10fHxlPT09dH1zZXRDb250ZXh0R3JvdXBNYXAoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdldENvbnRleHRHcm91cHMoKSl0aGlzLmNvbnRleHRHcm91cHNCeUlkLnNldChlLmlkLG5ldyBNYXApfXN0YXRpYyBhc3luYyBzZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKGUsdCl7Y29uc3Qgbj1hd2FpdCBmaW4uU3lzdGVtLmdldEVudGl0eUluZm8oZS51dWlkLGUubmFtZSk7bGV0IGk7XCJ2aWV3XCI9PT1uLmVudGl0eVR5cGU/aT1hd2FpdCBmaW4uVmlldy53cmFwKGUpOlwid2luZG93XCI9PT1uLmVudGl0eVR5cGUmJihpPWF3YWl0IGZpbi5XaW5kb3cud3JhcChlKSksaT9hd2FpdCBpLnVwZGF0ZU9wdGlvbnMoe2ludGVyb3A6e2N1cnJlbnRDb250ZXh0R3JvdXA6dH19KTpjb25zb2xlLndhcm4oYFNldHRpbmcgQ3VycmVudCBDb250ZXh0IEdyb3VwOiBFbnRpdHkgd2l0aCBpZGVudGl0eSAke2UudXVpZH0sICR7ZS5uYW1lfSBpcyBub3QgYSB3aW5kb3cgb3Igdmlldy4gSXQgaXMgYSAke24uZW50aXR5VHlwZX0gaW5zdGVhZC5gKX13aXJlQ2hhbm5lbChlKXtlLm9uQ29ubmVjdGlvbigoKGUsdCk9PntpZighdGhpcy5pc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCkpdGhyb3cgbmV3IEVycm9yKGBDb25uZWN0aW9uIG5vdCBhdXRob3JpemVkIGZvciAke2UudXVpZH0sICR7ZS5uYW1lfWApO2lmKCFlLmVuZHBvaW50SWQpdGhyb3cgbmV3IEVycm9yKFwiVmVyc2lvbiB0b28gb2xkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBJbnRlcm9wLiBQbGVhc2UgdXBncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYSBtb3JlIHJlY2VudCB2ZXJzaW9uLlwiKTtjb25zdCBuPXtjb250ZXh0R3JvdXBJZDp2b2lkIDAsY29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZX07KG51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCkmJnRoaXMuY29udGV4dEdyb3Vwc0J5SWQuaGFzKHQuY3VycmVudENvbnRleHRHcm91cCkmJihuLmNvbnRleHRHcm91cElkPW51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCksdGhpcy5pbnRlcm9wQ2xpZW50cy5zZXQoZS5lbmRwb2ludElkLG4pfSkpLGUub25EaXNjb25uZWN0aW9uKChlPT57dGhpcy5pbnRlcm9wQ2xpZW50cy5kZWxldGUoZS5lbmRwb2ludElkKTtjb25zdCB0PXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldChlLm5hbWUpO3QmJmUudXVpZD09PWZpbi5tZS5pZGVudGl0eS51dWlkJiZ0LmZvckVhY2goKGU9PntlLmlzUmVhZHk9ITF9KSksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmZvckVhY2goKHQ9Pnt0Lm9uRGlzY29ubmVjdGlvbihlKX0pKX0pKSxlLmJlZm9yZUFjdGlvbigoKGUsdCxuKT0+e2lmKCF0aGlzLmlzQWN0aW9uQXV0aG9yaXplZChlLHQsbikpdGhyb3cgbmV3IEVycm9yKGBBY3Rpb24gKCR7ZX0pIG5vdCBhdXRob3JpemVkIGZvciAke24udXVpZH0sICR7bi5uYW1lfWApO2NvbnNvbGUubG9nKGUsdCxuKX0pKSxlLmFmdGVyQWN0aW9uKGNvbnNvbGUubG9nKSxlLnJlZ2lzdGVyKFwic2V0Q29udGV4dFwiLHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZmlyZUludGVudFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImdldEN1cnJlbnRDb250ZXh0XCIsdGhpcy5nZXRDdXJyZW50Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudFwiLHRoaXMuaGFuZGxlSW5mb0ZvckludGVudC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHRcIix0aGlzLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnRGb3JDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRDb250ZXh0R3JvdXBzXCIsdGhpcy5nZXRDb250ZXh0R3JvdXBzLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJqb2luQ29udGV4dEdyb3VwXCIsdGhpcy5qb2luQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIsdGhpcy5yZW1vdmVGcm9tQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXBcIix0aGlzLmdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckNvbnRleHRHcm91cFwiLHRoaXMuZ2V0SW5mb0ZvckNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImludGVudEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5pbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwicmVtb3ZlQ29udGV4dEhhbmRsZXJcIix0aGlzLnJlbW92ZUNvbnRleHRIYW5kbGVyLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJzZXNzaW9uQ29udGV4dEdyb3VwOmNyZWF0ZUlmTmVlZGVkXCIsdGhpcy5oYW5kbGVKb2luU2Vzc2lvbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKX1hc3luYyBpc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtY29ubmVjdGlvbi1hdXRob3JpemVkXCIpLmNhdGNoKChlPT57fSkpLCEwfWFzeW5jIGlzQWN0aW9uQXV0aG9yaXplZChlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtYWN0aW9uLWF1dGhvcml6ZWRcIikuY2F0Y2goKGU9Pnt9KSksITB9fXQuSW50ZXJvcEJyb2tlcj1hfSw3MTM4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJvcENsaWVudD12b2lkIDA7Y29uc3QgYT1uKDk2NTkpLGM9big4MjIpLGQ9bigxNzg3KTtjbGFzcyBoIGV4dGVuZHMgYS5CYXNle2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLG8odGhpcyxyLG5ldyBNYXApLG8odGhpcyxpLHRoaXMud2lyZS5lbnZpcm9ubWVudC53aGVuUmVhZHkoKS50aGVuKCgoKT0+dGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoYGludGVyb3AtYnJva2VyLSR7dH1gLHtwYXlsb2FkOm59KSkpKX1hc3luYyBzZXRDb250ZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXNldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwic2V0Q29udGV4dFwiLHtjb250ZXh0OmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtYWRkLWNvbnRleHQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKTtsZXQgcjt0PyhyPWBpbnZva2VDb250ZXh0SGFuZGxlci0ke3R9LSR7ZC5nZW5lcmF0ZUlkKCl9YCxjb25zb2xlLndhcm4oYFdhcm5pbmc6IEJ5IHByb3ZpZGluZyBhIGNvbnRleHRUeXBlICgke3R9KSwgeW91IGFyZSB1c2luZyB0aGUgZXhwZXJpbWVudGFsIGFkZENvbnRleHRIYW5kbGVyLiBUbyBhdm9pZCBpc3N1ZXMsIG1ha2Ugc3VyZSB5b3UgYXJlIGFkZGluZyB5b3VyIGNvbnRleHQgaGFuZGxlcnMgYXQgdGhlIHRvcCBsZXZlbCBpbiB5b3VyIGFwcGxpY2F0aW9uLmApKTpyPVwiaW52b2tlQ29udGV4dEhhbmRsZXJcIjtjb25zdCBvPWQud3JhcENvbnRleHRIYW5kbGVyKGUscik7cmV0dXJuIG4ucmVnaXN0ZXIocixvKSxhd2FpdCBuLmRpc3BhdGNoKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIse2hhbmRsZXJJZDpyLGNvbnRleHRUeXBlOnR9KSx7dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpLGF3YWl0IG4uZGlzcGF0Y2goXCJyZW1vdmVDb250ZXh0SGFuZGxlclwiLHtoYW5kbGVySWQ6cn0pfX19YXN5bmMgZ2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1jb250ZXh0LWdyb3Vwc1wiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldENvbnRleHRHcm91cHNcIil9YXN5bmMgam9pbkNvbnRleHRHcm91cChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtam9pbi1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIGNvbnRleHRHcm91cElkIHNwZWNpZmllZCBmb3Igam9pbkNvbnRleHRHcm91cC5cIik7cmV0dXJuIG4uZGlzcGF0Y2goXCJqb2luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmUsdGFyZ2V0OnR9KX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXJlbW92ZS1mcm9tLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIse3RhcmdldDplfSl9YXN5bmMgZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAuXCIpO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmV9KX1hc3luYyBnZXRJbmZvRm9yQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRJbmZvRm9yQ29udGV4dEdyb3VwLlwiKTtyZXR1cm4gdC5kaXNwYXRjaChcImdldEluZm9Gb3JDb250ZXh0R3JvdXBcIix7Y29udGV4dEdyb3VwSWQ6ZX0pfWFzeW5jIGZpcmVJbnRlbnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50XCIsZSl9YXN5bmMgcmVnaXN0ZXJJbnRlbnRIYW5kbGVyKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1yZWdpc3Rlci1pbnRlbnQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSxyPWBpbnRlbnQtaGFuZGxlci0ke3R9YCxvPXRoaXMud3JhcEludGVudEhhbmRsZXIoZSxyKTt0cnl7YXdhaXQgbi5yZWdpc3RlcihyLG8pLGF3YWl0IG4uZGlzcGF0Y2goXCJpbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZFwiLHtoYW5kbGVySWQ6cn0pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZWdpc3RlciBpbnRlbnQgaGFuZGxlclwiKX1yZXR1cm57dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpfX19YXN5bmMgZ2V0Q3VycmVudENvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWN1cnJlbnQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEN1cnJlbnRDb250ZXh0XCIse2NvbnRleHRUeXBlOmV9KX1hc3luYyBnZXRJbmZvRm9ySW50ZW50KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1pbmZvLWZvci1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJnZXRJbmZvRm9ySW50ZW50XCIsZSl9YXN5bmMgZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWludGVudHMtYnktY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsZSl9YXN5bmMgZmlyZUludGVudEZvckNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnQtZm9yLWNvbnRleHRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLGUpfWFzeW5jIGpvaW5TZXNzaW9uQ29udGV4dEdyb3VwKGUpe3RyeXtjb25zdCB0PXModGhpcyxyKS5nZXQoZSk7aWYodClyZXR1cm4gdC5nZXRVc2VySW5zdGFuY2UoKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSx7aGFzQ29uZmxpY3Q6b309YXdhaXQgbi5kaXNwYXRjaChcInNlc3Npb25Db250ZXh0R3JvdXA6Y3JlYXRlSWZOZWVkZWRcIix7c2Vzc2lvbkNvbnRleHRHcm91cElkOmV9KTtvJiZjb25zb2xlLndhcm4oYEEgKG5vbi1zZXNzaW9uKSBjb250ZXh0IGdyb3VwIHdpdGggdGhlIG5hbWUgXCIke2V9XCIgYWxyZWFkeSBleGlzdHMuIElmIHlvdSBhcmUgdHJ5aW5nIHRvIGpvaW4gYSBDb250ZXh0IEdyb3VwLCBjYWxsIGpvaW5Db250ZXh0R3JvdXAgaW5zdGVhZC5gKTtjb25zdCBhPW5ldyBjLmRlZmF1bHQodGhpcy53aXJlLHModGhpcyxpKSxlKTtyZXR1cm4gcyh0aGlzLHIpLnNldChlLGEpLGEuZ2V0VXNlckluc3RhbmNlKCl9Y2F0Y2godCl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIHRyeWluZyB0byBjcmVhdGUgU2Vzc2lvbiBDb250ZXh0IEdyb3VwIHdpdGggaWQgXCIke2V9XCI6ICR7dH1gKSx0fX13cmFwSW50ZW50SGFuZGxlcihlLHQpe3JldHVybiBhc3luYyBuPT57dHJ5e2F3YWl0IGUobil9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIGJ5IGhhbmRsZXIgJHt0fTogJHtlfWApLGV9fX19dC5JbnRlcm9wQ2xpZW50PWgsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3MTE1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oODcwNik7dC5kZWZhdWx0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcm92aWRlcj1lLHRoaXMuaWQ9dCx0aGlzLmxhc3RDb250ZXh0PXZvaWQgMCx0aGlzLmNvbnRleHRHcm91cE1hcD1uZXcgTWFwLHRoaXMuY2xpZW50cz1uZXcgTWFwLHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKX1yZWdpc3Rlckxpc3RlbmVycygpe3RoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6Z2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLmdldEN1cnJlbnRDb250ZXh0LmJpbmQodGhpcykpLHRoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6c2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLnNldENvbnRleHQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyQWRkZWQtJHt0aGlzLmlkfWAsdGhpcy5oYW5kbGVyQWRkZWQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyUmVtb3ZlZC0ke3RoaXMuaWR9YCx0aGlzLmhhbmRsZXJSZW1vdmVkLmJpbmQodGhpcykpfWdldEN1cnJlbnRDb250ZXh0KGUpe3JldHVybiBlLnR5cGU/dGhpcy5jb250ZXh0R3JvdXBNYXAuZ2V0KGUudHlwZSk6dGhpcy5sYXN0Q29udGV4dH1zZXRDb250ZXh0KGUsdCl7Y29uc3R7Y29udGV4dDpufT1lLHI9aS5JbnRlcm9wQnJva2VyLmNoZWNrQ29udGV4dEludGVncml0eShuKTtpZighMT09PXIuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7ci5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2lmKCF0aGlzLmdldENsaWVudFN0YXRlKHQpKXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIFNlc3Npb24gQ2xpZW50IFN0YXRlIE1hcGApO3RoaXMuY29udGV4dEdyb3VwTWFwLnNldChuLnR5cGUsbiksdGhpcy5sYXN0Q29udGV4dD1uLEFycmF5LmZyb20odGhpcy5jbGllbnRzLnZhbHVlcygpKS5mb3JFYWNoKChlPT57dmFyIHQ7bnVsbD09PSh0PWUuY29udGV4dEhhbmRsZXJzLmdldChuLnR5cGUpKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKCh0PT57dGhpcy5wcm92aWRlci5kaXNwYXRjaChlLmNsaWVudElkZW50aXR5LHQsbil9KSksZS5nbG9iYWxIYW5kbGVyJiZ0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKGUuY2xpZW50SWRlbnRpdHksZS5nbG9iYWxIYW5kbGVyLG4pfSkpfWdldENsaWVudFN0YXRlKGUpe3JldHVybiB0aGlzLmNsaWVudHMuZ2V0KGUuZW5kcG9pbnRJZCl9aGFuZGxlckFkZGVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm4sY29udGV4dFR5cGU6aX09ZSxyPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgd2l0aCBJZGVudGl0eTogJHt0LnV1aWR9ICR7dC5uYW1lfSBub3QgaW4gQ2xpZW50IFN0YXRlIE1hcGApO2lmKGkpe2NvbnN0IGU9ci5jb250ZXh0SGFuZGxlcnMuZ2V0KGkpfHxbXTtyLmNvbnRleHRIYW5kbGVycy5zZXQoaSxbLi4uZSxuXSk7Y29uc3Qgbz10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoaSk7byYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4sbyl9ZWxzZSByLmdsb2JhbEhhbmRsZXI9bixbLi4udGhpcy5jb250ZXh0R3JvdXBNYXAua2V5cygpXS5mb3JFYWNoKChlPT57Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoZSk7aSYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4saSl9KSl9aGFuZGxlclJlbW92ZWQoZSx0KXtjb25zdHtoYW5kbGVySWQ6bn09ZSxpPXRoaXMuY2xpZW50cy5nZXQodC5lbmRwb2ludElkKTtpPyhBcnJheS5mcm9tKGkuY29udGV4dEhhbmRsZXJzKS5mb3JFYWNoKCgoWyxlXSk9Pntjb25zdCB0PWUuaW5kZXhPZihuKTt0Pi0xJiZlLnNwbGljZSh0LDEpfSkpLGkuZ2xvYmFsSGFuZGxlcj09PW4mJihpLmdsb2JhbEhhbmRsZXI9dm9pZCAwKSk6Y29uc29sZS53YXJuKGBUcnlpbmcgdG8gcmVtb3ZlIGEgaGFuZGxlciBmcm9tIGEgY2xpZW50IHRoYXQgaXNuJ3QgbWFwcGVkLiBoYW5kbGVySWQ6ICR7bn0uIGNsaWVudElkZW50aXR5OiAke3R9YCl9cmVnaXN0ZXJOZXdDbGllbnQoZSl7aWYoIXRoaXMuY2xpZW50cy5oYXMoZS5lbmRwb2ludElkKSl7Y29uc3QgdD17Y29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZSxnbG9iYWxIYW5kbGVyOnZvaWQgMH07dGhpcy5jbGllbnRzLnNldChlLmVuZHBvaW50SWQsdCl9fW9uRGlzY29ubmVjdGlvbihlKXt0aGlzLmNsaWVudHMuZGVsZXRlKGUuZW5kcG9pbnRJZCl9fX0sODIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBzPW4oOTY1OSksYT1uKDE3ODcpO2NsYXNzIGMgZXh0ZW5kcyBzLkJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUpLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmlkPW4scih0aGlzLGksdCl9YXN5bmMgc2V0Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpzZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCxjb250ZXh0OmV9KX1hc3luYyBnZXRDdXJyZW50Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1nZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpnZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCx0eXBlOmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1zZXNzaW9uLWNvbnRleHQtZ3JvdXAtYWRkLWhhbmRsZXJcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCBvKHRoaXMsaSk7bGV0IHI7cmV0dXJuIHI9dD9gc2Vzc2lvbkNvbnRleHRIYW5kbGVyOmludm9rZS0ke3RoaXMuaWR9LSR7dH0tJHthLmdlbmVyYXRlSWQoKX1gOmBzZXNzaW9uQ29udGV4dEhhbmRsZXI6aW52b2tlLSR7dGhpcy5pZH1gLG4ucmVnaXN0ZXIocixhLndyYXBDb250ZXh0SGFuZGxlcihlLHIpKSxuLmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJBZGRlZC0ke3RoaXMuaWR9YCx7aGFuZGxlcklkOnIsY29udGV4dFR5cGU6dH0pLHt1bnN1YnNjcmliZTphd2FpdCB0aGlzLmNyZWF0ZVVuc3Vic2NyaWJlQ2Iocil9fWFzeW5jIGNyZWF0ZVVuc3Vic2NyaWJlQ2IoZSl7Y29uc3QgdD1hd2FpdCBvKHRoaXMsaSk7cmV0dXJuIGFzeW5jKCk9Pnt0LnJlbW92ZShlKSxhd2FpdCB0LmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJSZW1vdmVkLSR7dGhpcy5pZH1gLHtoYW5kbGVySWQ6ZX0pfX1nZXRVc2VySW5zdGFuY2UoKXtyZXR1cm57aWQ6dGhpcy5pZCxzZXRDb250ZXh0OmEud3JhcEluVHJ5Q2F0Y2godGhpcy5zZXRDb250ZXh0LmJpbmQodGhpcyksXCJGYWlsZWQgdG8gc2V0IGNvbnRleHQ6IFwiKSxnZXRDdXJyZW50Q29udGV4dDphLndyYXBJblRyeUNhdGNoKHRoaXMuZ2V0Q3VycmVudENvbnRleHQuYmluZCh0aGlzKSxcIkZhaWxlZCB0byBnZXQgY29udGV4dDogXCIpLGFkZENvbnRleHRIYW5kbGVyOmEud3JhcEluVHJ5Q2F0Y2godGhpcy5hZGRDb250ZXh0SGFuZGxlci5iaW5kKHRoaXMpLFwiRmFpbGVkIHRvIGFkZCBjb250ZXh0IGhhbmRsZXI6IFwiKX19fXQuZGVmYXVsdD1jLGk9bmV3IFdlYWtNYXB9LDg3MDY6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyOTc3KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig3MTM4KSx0KSxyKG4oMjA1NyksdCl9LDE3ODc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkJST0tFUl9FUlJPUlM9dC5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZz10LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcj10LndyYXBDb250ZXh0SGFuZGxlcj10LndyYXBJblRyeUNhdGNoPXQuZ2VuZXJhdGVJZD12b2lkIDAsdC5nZW5lcmF0ZUlkPSgpPT5gJHtNYXRoLnJhbmRvbSgpfSR7RGF0ZS5ub3coKX1gLHQud3JhcEluVHJ5Q2F0Y2g9KGUsdCk9PiguLi5uKT0+e3RyeXtyZXR1cm4gZSguLi5uKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoKHR8fFwiXCIpK2UpfX0sdC53cmFwQ29udGV4dEhhbmRsZXI9KGUsdCk9PmFzeW5jIG49Pnt0cnl7YXdhaXQgZShuKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKGBFcnJvciB0aHJvd24gYnkgaGFuZGxlciAke3R9IGZvciBjb250ZXh0IHR5cGUgJHtuLnR5cGV9OiAke2V9YCksZX19LHQuZ2VuZXJhdGVPdmVycmlkZUVycm9yPShlLHQpPT5gWW91IGhhdmUgdHJpZWQgdG8gdG8gdXNlICR7ZX0gYnV0ICR7dH0gaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gaW4gdGhlIEludGVyb3AgQnJva2VyLiBQbGVhc2Ugb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbi4gUmVmZXIgdG8gb3VyIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mby5gLHQuZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmc9KGUsdCxuLGkpPT57Y29uc3R7dXVpZDpyLG5hbWU6b309aTtyZXR1cm5gRW50aXR5IHdpdGggaWRlbnRpdHk6ICR7cn0vJHtvfSBoYXMgY2FsbGVkICR7ZX0gb3IgJHt0fSBidXQgJHtufSBoYXMgbm90IGJlZW4gb3ZlcnJpZGRlbi5gfSx0LkJST0tFUl9FUlJPUlM9e2ZpcmVJbnRlbnQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJmaXJlSW50ZW50XCIsXCJoYW5kbGVGaXJlZEludGVudFwiKSxmaXJlSW50ZW50Rm9yQ29udGV4dDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImZpcmVJbnRlbnRGb3JDb250ZXh0XCIsXCJoYW5kbGVGaXJlZEludGVudEZvckNvbnRleHRcIiksZ2V0SW5mb0ZvckludGVudDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImdldEluZm9Gb3JJbnRlbnRcIixcImhhbmRsZUluZm9Gb3JJbnRlbnRcIiksZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dFwiLFwiaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHRcIil9fSw5NjQxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1lPXQuZ2V0QmFzZU1lPXZvaWQgMDtjb25zdCBpPW4oNDE2OSkscj1uKDY3MjApLG89big0OTk3KTtmdW5jdGlvbiBzKGUsdCxuKXtyZXR1cm57aXNWaWV3Olwidmlld1wiPT09ZSxpc1dpbmRvdzpcIndpbmRvd1wiPT09ZSxpc0ZyYW1lOlwiaWZyYW1lXCI9PT1lLGlzRXh0ZXJuYWw6XCJleHRlcm5hbCBjb25uZWN0aW9uXCI9PT1lLHV1aWQ6dCxuYW1lOm4sZW50aXR5VHlwZTplfX10LmdldEJhc2VNZT1zLHQuZ2V0TWU9ZnVuY3Rpb24oZSl7Y29uc3R7dXVpZDp0LG5hbWU6bixlbnRpdHlUeXBlOmF9PWUubWUsYz17c2V0Q29udGV4dCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxhZGRDb250ZXh0SGFuZGxlcigpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxnZXRDb250ZXh0R3JvdXBzKCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9LGpvaW5Db250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm9wIEFQSSBoYXMgbm90IGJlZW4gaW5zdGFudGlhdGVkLiBFaXRoZXIgY29ubmVjdGlvbiBoYXMgZmFpbGVkIG9yIHlvdSBoYXZlIG5vdCBkZWNsYXJlZCBpbnRlcm9wIGluIHlvdXIgY29uZmlnLlwiKX0scmVtb3ZlRnJvbUNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm9wIEFQSSBoYXMgbm90IGJlZW4gaW5zdGFudGlhdGVkLiBFaXRoZXIgY29ubmVjdGlvbiBoYXMgZmFpbGVkIG9yIHlvdSBoYXZlIG5vdCBkZWNsYXJlZCBpbnRlcm9wIGluIHlvdXIgY29uZmlnLlwiKX0sZ2V0SW5mb0ZvckNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfX07c3dpdGNoKGEpe2Nhc2VcInZpZXdcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgaS5WaWV3KGUse3V1aWQ6dCxuYW1lOm59KSxzKGEsdCxuKSx7aW50ZXJvcDpjfSk7Y2FzZVwid2luZG93XCI6cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IG8uX1dpbmRvdyhlLHt1dWlkOnQsbmFtZTpufSkscyhhLHQsbikse2ludGVyb3A6Y30pO2Nhc2VcImlmcmFtZVwiOnJldHVybiBPYmplY3QuYXNzaWduKG5ldyByLl9GcmFtZShlLHt1dWlkOnQsbmFtZTpufSkscyhhLHQsbikse2ludGVyb3A6Y30pO2RlZmF1bHQ6cmV0dXJuey4uLnMoYSx0LG4pfX19fSw3MjgzOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDYzOTQpLG89big5ODcyKTtjbGFzcyBzIGV4dGVuZHMgaS5CYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy5fY2hhbm5lbD10LHRoaXMuX2luaXRpYWxpemVyPSguLi5lKT0+dGhpcy53aXJlLmVudmlyb25tZW50LmdldFByb3ZpZGVySW5pdGlhbGl6ZXIoKS50aGVuKCh0PT50KHRoaXMud2lyZS5lbnZpcm9ubWVudCkoLi4uZSkpKSx0aGlzLkxheW91dD1uZXcgci5MYXlvdXRNb2R1bGUodGhpcy53aXJlKX1hc3luYyBpbml0KGUpe2NvbnN0IHQ9bnVsbD09ZT92b2lkIDA6ZS5vdmVycmlkZUNhbGxiYWNrLG49YXdhaXQgdGhpcy5maW4uSW50ZXJvcC5pbml0KHRoaXMuZmluLm1lLnV1aWQsbnVsbD09ZT92b2lkIDA6ZS5pbnRlcm9wT3ZlcnJpZGUpO3JldHVybiB3aW5kb3cuaW50ZXJvcEJyb2tlcj1uLHRoaXMuX2luaXRpYWxpemVyKHQsbil9YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS13cmFwXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLlBsYXRmb3JtKHt1dWlkOmUudXVpZH0sdGhpcy5fY2hhbm5lbCl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0td3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLlBsYXRmb3JtKHt1dWlkOmUudXVpZH0sdGhpcy5fY2hhbm5lbCl9YXN5bmMgZ2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcCh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXBTeW5jKHt1dWlkOnRoaXMud2lyZS5tZS51dWlkfSl9c3RhcnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc3RhcnRcIikuY2F0Y2goKGU9Pnt9KSksbmV3IFByb21pc2UoKGFzeW5jKHQsbik9Pnt0cnl7Y29uc3R7dXVpZDpufT1lLGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uX2NyZWF0ZSh7Li4uZSxpc1BsYXRmb3JtQ29udHJvbGxlcjohMH0pO2kub25jZShcInBsYXRmb3JtLWFwaS1yZWFkeVwiLCgoKT0+dCh0aGlzLndyYXBTeW5jKHt1dWlkOm59KSkpKSxpLl9ydW4oe3V1aWQ6bn0pfWNhdGNoKGUpe24oZSl9fSkpfXN0YXJ0RnJvbU1hbmlmZXN0KGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc3RhcnQtZnJvbS1tYW5pZmVzdFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgUHJvbWlzZSgoYXN5bmMobixpKT0+e3RyeXtjb25zdCBpPWF3YWl0IHRoaXMuZmluLkFwcGxpY2F0aW9uLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSk7aS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT5uKHRoaXMud3JhcFN5bmMoe3V1aWQ6aS5pZGVudGl0eS51dWlkfSkpKSksaS5fcnVuKHQpfWNhdGNoKGUpe2koZSl9fSkpfX10LmRlZmF1bHQ9c30sOTg3MjpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5QbGF0Zm9ybT12b2lkIDA7Y29uc3Qgbz1uKDk2NTkpLHM9big0OTk5KSxhPW5ldyBNYXA7Y2xhc3MgYyBleHRlbmRzIG8uRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcih0LndpcmUsXCJhcHBsaWNhdGlvblwiLGUudXVpZCksdGhpcy5nZXRDbGllbnQ9ZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWNsaWVudFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ZXx8dGhpcy5pZGVudGl0eSx7dXVpZDpufT10O2lmKCFhLmhhcyhuKSl7Y29uc3QgZT1yKHRoaXMsaSkuY2FsbCh0aGlzLG4pO2Euc2V0KG4sZSl9cmV0dXJuIGEuZ2V0KG4pfSxpLnNldCh0aGlzLChhc3luYyBlPT57dHJ5e2NvbnN0IHQ9YGN1c3RvbS1mcmFtZS0ke2V9YCxuPWF3YWl0IHRoaXMuX2NoYW5uZWwuY29ubmVjdCh0LHt3YWl0OiExfSk7cmV0dXJuIG4ub25EaXNjb25uZWN0aW9uKCgoKT0+e2EuZGVsZXRlKGUpfSkpLG59Y2F0Y2godCl7dGhyb3cgYS5kZWxldGUoZSksbmV3IEVycm9yKFwiVGhlIHRhcmdldGVkIFBsYXRmb3JtIGlzIG5vdCBjdXJyZW50bHkgcnVubmluZy4gTGlzdGVuIGZvciBhcHBsaWNhdGlvbi1zdGFydGVkIGV2ZW50IGZvciB0aGUgZ2l2ZW4gVXVpZC5cIil9fSkpLHRoaXMubGF1bmNoTGVnYWN5TWFuaWZlc3Q9dGhpcy5sYXVuY2hDb250ZW50TWFuaWZlc3Q7Y29uc3Qgbj1zLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYobil0aHJvdyBuZXcgRXJyb3Iobik7dGhpcy5fY2hhbm5lbD10LHRoaXMuaWRlbnRpdHk9e3V1aWQ6ZS51dWlkfSx0aGlzLkxheW91dD10aGlzLmZpbi5QbGF0Zm9ybS5MYXlvdXQsdGhpcy5BcHBsaWNhdGlvbj10aGlzLmZpbi5BcHBsaWNhdGlvbi53cmFwU3luYyh0aGlzLmlkZW50aXR5KX1hc3luYyBjcmVhdGVWaWV3KGUsdCxuKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWNyZWF0ZS12aWV3XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgaT1hd2FpdCB0aGlzLmdldENsaWVudCgpLHI9YXdhaXQgaS5kaXNwYXRjaChcImNyZWF0ZS12aWV3XCIse3RhcmdldDp0LG9wdHM6ZSx0YXJnZXRWaWV3Om59KTtpZighcnx8cy52YWxpZGF0ZUlkZW50aXR5KHIuaWRlbnRpdHkpKXRocm93IG5ldyBFcnJvcihgV2hlbiBvdmVyd3JpdGluZyB0aGUgY3JlYXRlVmlldyBjYWxsLCBwbGVhc2UgcmV0dXJuIGFuIG9iamVjdCB0aGF0IGhhcyBhIHZhbGlkICdpZGVudGl0eScgcHJvcGVydHk6ICR7SlNPTi5zdHJpbmdpZnkocil9YCk7cmV0dXJuIHRoaXMuZmluLlZpZXcud3JhcFN5bmMoci5pZGVudGl0eSl9YXN5bmMgY3JlYXRlV2luZG93KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY3JlYXRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKTtlLnJlYXNvbnx8KGUucmVhc29uPVwiYXBpLWNhbGxcIik7Y29uc3Qgbj1hd2FpdCB0LmRpc3BhdGNoKFwiY3JlYXRlLXZpZXctY29udGFpbmVyXCIsZSk7aWYoIW58fHMudmFsaWRhdGVJZGVudGl0eShuLmlkZW50aXR5KSl0aHJvdyBuZXcgRXJyb3IoYFdoZW4gb3ZlcndyaXRpbmcgdGhlIGNyZWF0ZVdpbmRvdyBjYWxsLCBwbGVhc2UgcmV0dXJuIGFuIG9iamVjdCB0aGF0IGhhcyBhIHZhbGlkICdpZGVudGl0eScgcHJvcGVydHk6ICR7SlNPTi5zdHJpbmdpZnkobil9YCk7Y29uc3R7aWRlbnRpdHk6aX09bixyPXRoaXMuZmluLldpbmRvdy53cmFwU3luYyhpKTtyZXR1cm4gci5uYW1lPWkubmFtZSxyLnV1aWQ9aS51dWlkLHJ9YXN5bmMgcXVpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXF1aXRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJxdWl0XCIpfWFzeW5jIGNsb3NlVmlldyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWNsb3NlLXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7YXdhaXQgdC5kaXNwYXRjaChcImNsb3NlLXZpZXdcIix7dmlldzplfSl9YXN5bmMgcmVwYXJlbnRWaWV3KGUsdCl7dmFyIG47Y29uc29sZS53YXJuKFwiUGxhdGZvcm0ucmVwYXJlbnRWaWV3IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUGxhdGZvcm0uY3JlYXRlVmlld1wiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXJlcGFyZW50LXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBpPXsuLi5lLHV1aWQ6bnVsbCE9PShuPWUudXVpZCkmJnZvaWQgMCE9PW4/bjp0aGlzLmlkZW50aXR5LnV1aWR9LHI9YXdhaXQgdGhpcy5maW4uVmlldy53cmFwKGkpLG89YXdhaXQgci5nZXRPcHRpb25zKCk7cmV0dXJuIHRoaXMuY3JlYXRlVmlldyhvLHQpfWFzeW5jIGdldFNuYXBzaG90KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LXNuYXBzaG90XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkpLmRpc3BhdGNoKFwiZ2V0LXNuYXBzaG90XCIpfWFzeW5jIGFwcGx5U25hcHNob3QoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWFwcGx5LXNuYXBzaG90XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1cIlJlcXVlc3RlZCBzbmFwc2hvdCBtdXN0IGJlIGEgdmFsaWQgU25hcHNob3Qgb2JqZWN0LCBvciBhIHVybCBvciBmaWxlcGF0aCB0byBzdWNoIGFuIG9iamVjdC5cIjtsZXQgaTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0cnl7aT0oYXdhaXQgdGhpcy5fY2hhbm5lbC53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pKS5wYXlsb2FkLmRhdGF9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGAke259OiAke2V9YCl9ZWxzZSBpPWU7aWYoIWkud2luZG93cyl0aHJvdyBuZXcgRXJyb3Iobik7Y29uc3Qgcj1hd2FpdCB0aGlzLmdldENsaWVudCgpO3JldHVybiBhd2FpdCByLmRpc3BhdGNoKFwiYXBwbHktc25hcHNob3RcIix7c25hcHNob3Q6aSxvcHRpb25zOnR9KSx0aGlzfWFzeW5jIGZldGNoTWFuaWZlc3QoZSl7cmV0dXJuKGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkpLmRpc3BhdGNoKFwicGxhdGZvcm0tZmV0Y2gtbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pfWFzeW5jIGxhdW5jaENvbnRlbnRNYW5pZmVzdChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWxhdW5jaC1jb250ZW50LW1hbmlmZXN0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpLG49YXdhaXQgdGhpcy5mZXRjaE1hbmlmZXN0KGUpO3JldHVybiB0LmRpc3BhdGNoKFwibGF1bmNoLWludG8tcGxhdGZvcm1cIix7bWFuaWZlc3Q6bn0pLHRoaXN9YXN5bmMgc2V0V2luZG93Q29udGV4dChlPXt9LHQpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc2V0LXdpbmRvdy1jb250ZXh0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksIWUpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgYSBzZXJpYWxpemFibGUgb2JqZWN0IG9yIHN0cmluZyB0byBzZXQgdGhlIGNvbnRleHQuXCIpO2NvbnN0IG49YXdhaXQgdGhpcy5nZXRDbGllbnQoKSx7ZW50aXR5VHlwZTppfT10P2F3YWl0IHRoaXMuZmluLlN5c3RlbS5nZXRFbnRpdHlJbmZvKHQudXVpZCx0Lm5hbWUpOnRoaXMuZmluLm1lO2F3YWl0IG4uZGlzcGF0Y2goXCJzZXQtd2luZG93LWNvbnRleHRcIix7Y29udGV4dDplLGVudGl0eVR5cGU6aSx0YXJnZXQ6dHx8e3V1aWQ6dGhpcy5maW4ubWUudXVpZCxuYW1lOnRoaXMuZmluLm1lLm5hbWV9fSl9YXN5bmMgZ2V0V2luZG93Q29udGV4dChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWdldC13aW5kb3ctY29udGV4dFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKSx7ZW50aXR5VHlwZTpufT1lP2F3YWl0IHRoaXMuZmluLlN5c3RlbS5nZXRFbnRpdHlJbmZvKGUudXVpZCxlLm5hbWUpOnRoaXMuZmluLm1lO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0LXdpbmRvdy1jb250ZXh0XCIse3RhcmdldDplfHx7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dGhpcy5maW4ubWUubmFtZX0sZW50aXR5VHlwZTpufSl9fXQuUGxhdGZvcm09YyxpPW5ldyBXZWFrTWFwfSw0Mzg2OihlLHQpPT57ZnVuY3Rpb24gbihlKXtzd2l0Y2goZSl7Y2FzZVwiY29sdW1uc1wiOmNhc2VcImdyaWRcIjpjYXNlXCJyb3dzXCI6Y2FzZVwidGFic1wiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXNWYWxpZFByZXNldFR5cGU9dm9pZCAwLHQuaXNWYWxpZFByZXNldFR5cGU9bix0LmRlZmF1bHQ9e2lzVmFsaWRQcmVzZXRUeXBlOm59fSw2MDk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89big3MjgzKTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig5ODcyKSx0KX0sNDIxMDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5MYXlvdXRNb2R1bGU9dm9pZCAwO2NvbnN0IHM9big4MTExKSxhPW4oOTY1OSk7Y2xhc3MgYyBleHRlbmRzIGEuQmFzZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksaS5zZXQodGhpcyx2b2lkIDApLHRoaXMuaW5pdD1hc3luYyhlPXt9KT0+e2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWluaXRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIkxheW91dC5pbml0IGNhbiBvbmx5IGJlIGNhbGxlZCBmcm9tIGEgV2luZG93IGNvbnRleHQuXCIpO2lmKHIodGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJMYXlvdXQgZm9yIHRoaXMgd2luZG93IGFscmVhZHkgaW5pdGlhbGl6ZWQsIHBsZWFzZSB1c2UgTGF5b3V0LnJlcGxhY2UgY2FsbCB0byByZXBsYWNlIHRoZSBsYXlvdXQuXCIpO2NvbnN0IHQ9YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LmdldE1hbmFnZXJDb25zdHJ1Y3RvcigpO28odGhpcyxpLG5ldyB0KTtsZXR7bGF5b3V0Om4sY29udGFpbmVySWQ6c309ZTtuJiZjb25zb2xlLndhcm4oXCJXZSByZWNvbW1lbmQgdXNpbmcgYSBsYXlvdXQgaW4gd2luZG93IG9wdGlvbnMuXFxuICAgICAgICAgICAgICAgIFRoaXMgbGF5b3V0IGhhcyBub3QgYmVlbiBzYW5pdGl6ZWQgYW5kIHVuZXhwZWN0ZWQgYmVoYXZpb3IgY2FuIG9jY3VyLlwiKSxuPW58fChhd2FpdCB0aGlzLmZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKS5nZXRPcHRpb25zKCkpLmxheW91dCxzPXN8fFwibGF5b3V0LWNvbnRhaW5lclwiO2NvbnN0IGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocyk7cmV0dXJuIGF3YWl0IHIodGhpcyxpKS5pbml0TWFuYWdlcigpLGF3YWl0IHIodGhpcyxpKS5jcmVhdGVMYXlvdXQobixhKSxPYmplY3QuYXNzaWduKHRoaXMuZ2V0Q3VycmVudFN5bmMoKSx7bGF5b3V0TWFuYWdlcjpyKHRoaXMsaSl9KX19YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtd3JhcFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgcy5MYXlvdXQoZSx0aGlzLndpcmUpfXdyYXBTeW5jKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksbmV3IHMuTGF5b3V0KGUsdGhpcy53aXJlKX1hc3luYyBnZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHQuICBPbmx5IFdpbmRvd3MgY2FuIGhhdmUgYSBMYXlvdXQuXCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMuZmluLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWdldC1jdXJyZW50LXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHQuICBPbmx5IFdpbmRvd3MgY2FuIGhhdmUgYSBMYXlvdXQuXCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMuZmluLm1lO3JldHVybiB0aGlzLndyYXBTeW5jKHt1dWlkOmUsbmFtZTp0fSl9fXQuTGF5b3V0TW9kdWxlPWMsaT1uZXcgV2Vha01hcH0sODExMTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5MYXlvdXQ9dm9pZCAwO2NvbnN0IGk9big0OTk5KSxyPW4oNDM4Niksbz1uKDk2NTkpO2NsYXNzIHMgZXh0ZW5kcyBvLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcih0KSx0aGlzLnJlcGxhY2U9YXN5bmMgZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LXJlcGxhY2VcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpO2F3YWl0IHQuZGlzcGF0Y2goXCJyZXBsYWNlLWxheW91dFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eSxvcHRzOntsYXlvdXQ6ZX19KX0sdGhpcy5yZXBsYWNlVmlldz1hc3luYyhlLHQpPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtcmVwbGFjZS12aWV3XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKTthd2FpdCBuLmRpc3BhdGNoKFwicmVwbGFjZS12aWV3XCIse3RhcmdldDp0aGlzLmlkZW50aXR5LG9wdHM6e3ZpZXdUb1JlcGxhY2U6ZSxuZXdWaWV3OnR9fSl9LHRoaXMuYXBwbHlQcmVzZXQ9YXN5bmMgZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWFwcGx5LXByZXNldFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMucGxhdGZvcm0uZ2V0Q2xpZW50KCkse3ByZXNldFR5cGU6bn09ZTtpZighbnx8IXIuaXNWYWxpZFByZXNldFR5cGUobikpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGFwcGx5IHByZXNldCBsYXlvdXQsIHBsZWFzZSBpbmNsdWRlIGFuIGFwcGxpY2FibGUgcHJlc2V0VHlwZSBwcm9wZXJ0eSBpbiB0aGUgUHJlc2V0TGF5b3V0T3B0aW9ucy5cIik7YXdhaXQgdC5kaXNwYXRjaChcImFwcGx5LXByZXNldC1sYXlvdXRcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHksb3B0czp7cHJlc2V0VHlwZTpufX0pfTtjb25zdCBuPWkudmFsaWRhdGVJZGVudGl0eShlKTtpZihuKXRocm93IG5ldyBFcnJvcihuKTt0aGlzLmlkZW50aXR5PWUsdGhpcy5wbGF0Zm9ybT10aGlzLmZpbi5QbGF0Zm9ybS53cmFwU3luYyh7dXVpZDplLnV1aWR9KSxlLnV1aWQ9PT10aGlzLmZpbi5tZS51dWlkJiZlLm5hbWU9PT10aGlzLmZpbi5tZS5uYW1lJiYodGhpcy5pbml0PXRoaXMuZmluLlBsYXRmb3JtLkxheW91dC5pbml0KX1hc3luYyBnZXRDb25maWcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWNvbmZpZ1wiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJnZXQtZnJhbWUtc25hcHNob3RcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHl9KX19dC5MYXlvdXQ9c30sNjM5NDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSkscihuKDQyMTApLHQpLHIobig4MTExKSx0KX0sMTc0NjooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9bigyODc4KSxvPW4oNjIxNSk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyBpbml0KGUpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWluaXRcIikuY2F0Y2goKGU9Pnt9KSksXCJvYmplY3RcIiE9dHlwZW9mIGV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuZ2V0U25hcHNob3R8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuYXBwbHlTbmFwc2hvdCl0aHJvdyBuZXcgRXJyb3IoXCJ5b3UgbXVzdCBwYXNzIGluIGEgdmFsaWQgU25hcHNob3RQcm92aWRlclwiKTtjb25zdCB0PWF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jcmVhdGUoby5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lKGZpbi5tZS5pZGVudGl0eSkpO3QucmVnaXN0ZXIoXCJnZXQtc25hcHNob3RcIiwoYXN5bmMoKT0+KHtzbmFwc2hvdDphd2FpdCBlLmdldFNuYXBzaG90KCl9KSkpLHQucmVnaXN0ZXIoXCJhcHBseS1zbmFwc2hvdFwiLCgoe3NuYXBzaG90OnR9KT0+ZS5hcHBseVNuYXBzaG90KHQpKSl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgci5TbmFwc2hvdFNvdXJjZSh0aGlzLndpcmUsZSl9YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2Utd3JhcFwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXBTeW5jKGUpfX10LmRlZmF1bHQ9c30sMjg3ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHMsYSxjPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxkPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlNuYXBzaG90U291cmNlPXZvaWQgMDtjb25zdCBoPW4oOTY1OSksbD1uKDYyMTUpLHU9bmV3IE1hcDtjbGFzcyBwIGV4dGVuZHMgaC5CYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksaS5zZXQodGhpcyx2b2lkIDApLHIuc2V0KHRoaXMsKCgpPT4odS5oYXModGhpcy5pZGVudGl0eS51dWlkKXx8dS5zZXQodGhpcy5pZGVudGl0eS51dWlkLHtldmVudEZpcmVkOm51bGwsY2xpZW50UHJvbWlzZTpudWxsfSksdS5nZXQodGhpcy5pZGVudGl0eS51dWlkKSkpKSxvLnNldCh0aGlzLCgoKT0+KGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2V8fChkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlPWQodGhpcyxzKS5jYWxsKHRoaXMpKSxkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlKSkpLHMuc2V0KHRoaXMsKGFzeW5jKCk9Pntjb25zdCBlPWwuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZSh0aGlzLmlkZW50aXR5KTt0cnl7ZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZHx8YXdhaXQgZCh0aGlzLGEpLmNhbGwodGhpcyk7Y29uc3QgdD1hd2FpdCB0aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHt3YWl0OiExfSk7cmV0dXJuIHQub25EaXNjb25uZWN0aW9uKCgoKT0+e2QodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9bnVsbCxkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkPW51bGx9KSksdH1jYXRjaChlKXt0aHJvdyBkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlPW51bGwsbmV3IEVycm9yKFwiVGhlIHRhcmdldGVkIFNuYXBzaG90U291cmNlIGlzIG5vdCBjdXJyZW50bHkgaW5pdGlhbGl6ZWQuIEF3YWl0IHRoaXMgb2JqZWN0J3MgcmVhZHkoKSBtZXRob2QuXCIpfX0pKSxhLnNldCh0aGlzLChhc3luYygpPT57Y29uc3QgZT1sLmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWUodGhpcy5pZGVudGl0eSk7bGV0IHQsbjtjb25zdCBpPW5ldyBQcm9taXNlKCgoZSxpKT0+e3Q9ZSxuPWl9KSk7ZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZD1pO2NvbnN0IG89YXN5bmMgaT0+e3RyeXtpLmNoYW5uZWxOYW1lPT09ZSYmKHQoKSxhd2FpdCB0aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixvKSl9Y2F0Y2goZSl7bihlKX19O2F3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5vbihcImNvbm5lY3RlZFwiLG8pfSkpLGModGhpcyxpLHQpfWdldCBpZGVudGl0eSgpe3JldHVybiBkKHRoaXMsaSl9YXN5bmMgcmVhZHkoKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS1yZWFkeVwiKS5jYXRjaCgoZT0+e30pKTt0cnl7YXdhaXQgZCh0aGlzLG8pLmNhbGwodGhpcyl9Y2F0Y2goZSl7YXdhaXQgZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZH19YXN5bmMgZ2V0U25hcHNob3QoKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS1nZXQtc25hcHNob3RcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgZT1hd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKSx0PWF3YWl0IGUuZGlzcGF0Y2goXCJnZXQtc25hcHNob3RcIik7cmV0dXJuKGF3YWl0IHQpLnNuYXBzaG90fWFzeW5jIGFwcGx5U25hcHNob3QoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWFwcGx5LXNuYXBzaG90XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKSkuZGlzcGF0Y2goXCJhcHBseS1zbmFwc2hvdFwiLHtzbmFwc2hvdDplfSl9fXQuU25hcHNob3RTb3VyY2U9cCxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcCxzPW5ldyBXZWFrTWFwLGE9bmV3IFdlYWtNYXB9LDcxNTM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigxNzQ2KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobigyODc4KSx0KX0sNjIxNTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZT12b2lkIDAsdC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lPWU9PmBzbmFwc2hvdC1zb3VyY2UtcHJvdmlkZXItJHtlLnV1aWR9YH0sMzY0MTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big1MDA3KSxvPW4oNDk5Nyk7Y2xhc3MgcyBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxcInN5c3RlbVwiKX1zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4saSk9Pntjb25zdCByPVwiZXh0ZXJuYWwtcHJvY2Vzcy1leGl0ZWRcIjtsZXQgcyxhLGMsZDtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lmxpc3RlbmVyJiYoYz1lPT57Y29uc3Qgbj1lfHx7fTthPXt0b3BpYzpcImV4aXRlZFwiLHV1aWQ6bi5wcm9jZXNzVXVpZHx8XCJcIixleGl0Q29kZTpuLmV4aXRDb2RlfHwwfSxzPT09ZS5wcm9jZXNzVXVpZCYmKHQubGlzdGVuZXIoYSksZC5yZW1vdmVMaXN0ZW5lcihyLGMpKX0sdGhpcy53aXJlLm1lLm5hbWV8fCh0aGlzLndpcmUubWUubmFtZT10aGlzLndpcmUubWUudXVpZCksZD1uZXcgby5fV2luZG93KHRoaXMud2lyZSx0aGlzLndpcmUubWUpLGQub24ocixjKSksdGhpcy53aXJlLnNlbmRBY3Rpb24oZSx0KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT57cz1lLmRhdGEudXVpZCxuKGUuZGF0YSksYSYmcz09PWEudXVpZCYmKHQubGlzdGVuZXIoYSksZC5yZW1vdmVMaXN0ZW5lcihyLGMpKX0pKS5jYXRjaCgoZT0+e2QmJmQucmVtb3ZlTGlzdGVuZXIocixjKSxpKGUpfSkpfSkpfWdldFZlcnNpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmVyc2lvblwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1jbGVhckNhY2hlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsZWFyLWNhY2hlXCIsZSkudGhlbigoKCk9Pnt9KSl9ZGVsZXRlQ2FjaGVPbkV4aXQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkZWxldGUtY2FjaGUtcmVxdWVzdFwiKS50aGVuKCgoKT0+e30pKX1leGl0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZXhpdC1kZXNrdG9wXCIpLnRoZW4oKCgpPT57fSkpfWFzeW5jIGZldGNoTWFuaWZlc3QoZSl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp0fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmZXRjaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSk7cmV0dXJuIHR9Zmx1c2hDb29raWVTdG9yZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZsdXNoLWNvb2tpZS1zdG9yZVwiKS50aGVuKCgoKT0+e30pKX1nZXRBbGxXaW5kb3dzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC13aW5kb3dzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFsbEFwcGxpY2F0aW9ucygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtYXBwbGljYXRpb25zXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldENvbW1hbmRMaW5lQXJndW1lbnRzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNvbW1hbmQtbGluZS1hcmd1bWVudHNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0Q3Jhc2hSZXBvcnRlclN0YXRlKCl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp7ZGlhZ25vc3RpY01vZGU6ZSxpc1J1bm5pbmc6dH19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jcmFzaC1yZXBvcnRlci1zdGF0ZVwiKTtyZXR1cm4gY29uc29sZS53YXJuKFwiZGlhZ25vc3RpY01vZGUgcHJvcGVydHkgaXMgZGVwcmVjYXRlZC4gSXQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb25cIikse2RpYWdub3N0aWNNb2RlOmUsZGlhZ25vc3RpY3NNb2RlOmUsaXNSdW5uaW5nOnR9fWFzeW5jIHN0YXJ0Q3Jhc2hSZXBvcnRlcihlKXtjb25zdCB0PWUsbj17Li4udCxkaWFnbm9zdGljTW9kZTp0LmRpYWdub3N0aWNzTW9kZXx8dC5kaWFnbm9zdGljTW9kZX0se3BheWxvYWQ6e2RhdGE6e2RpYWdub3N0aWNNb2RlOmksaXNSdW5uaW5nOnJ9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdGFydC1jcmFzaC1yZXBvcnRlclwiLG4pO3JldHVybntkaWFnbm9zdGljTW9kZTppLGRpYWdub3N0aWNzTW9kZTppLGlzUnVubmluZzpyfX1nZXRVbmlxdWVVc2VySWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdW5pcXVlLXVzZXItaWRcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0RW50aXR5SW5mbyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1lbnRpdHktaW5mb1wiLHt1dWlkOmUsbmFtZTp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0RW52aXJvbm1lbnRWYXJpYWJsZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZW52aXJvbm1lbnQtdmFyaWFibGVcIix7ZW52aXJvbm1lbnRWYXJpYWJsZXM6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEZvY3VzZWRXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZm9jdXNlZC13aW5kb3dcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgaXNBcHBDZXJ0aWZpZWQoZSl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp7Y2VydGlmaWVkSW5mbzp0fX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaXMtYXBwLWNlcnRpZmllZFwiLHttYW5pZmVzdFVybDplfSk7cmV0dXJuIHR9Z2V0SW5zdGFsbGVkUnVudGltZXMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaW5zdGFsbGVkLXJ1bnRpbWVzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YS5ydW50aW1lcykpfWFzeW5jIGdldEluc3RhbGxlZEFwcHMoKXtjb25zdHtwYXlsb2FkOntkYXRhOntpbnN0YWxsZWRBcHBzOmV9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaW5zdGFsbGVkLWFwcHNcIik7cmV0dXJuIGV9Z2V0TG9nKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctbG9nXCIsZSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TWFjaGluZUlkKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1hY2hpbmUtaWRcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TWluTG9nTGV2ZWwoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbWluLWxvZy1sZXZlbFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRMb2dMaXN0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGlzdC1sb2dzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldE1vbml0b3JJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1vbml0b3ItaW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNb3VzZVBvc2l0aW9uKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1vdXNlLXBvc2l0aW9uXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFByb2Nlc3NMaXN0KCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlN5c3RlbS5nZXRQcm9jZXNzTGlzdCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgY29uc2lkZXIgdXNpbmcgb3VyIG5ldyBwcm9jZXNzIEFQSXM6IFdpbmRvdy5nZXRQcm9jZXNzSW5mbywgVmlldy5nZXRQcm9jZXNzSW5mbywgQXBwbGljYXRpb24uZ2V0UHJvY2Vzc0luZm8sIFN5c3RlbS5nZXRBbGxQcm9jZXNzSW5mb1wiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcInByb2Nlc3Mtc25hcHNob3RcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0QWxsUHJvY2Vzc0luZm8oKXtjb25zdHtwYXlsb2FkOntkYXRhOmV9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtcHJvY2Vzcy1pbmZvXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGV9Z2V0UHJveHlTZXR0aW5ncygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wcm94eS1zZXR0aW5nc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRSdW50aW1lSW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ydW50aW1lLWluZm9cIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UnZtSW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ydm0taW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRIb3N0U3BlY3MoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaG9zdC1zcGVjc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1sYXVuY2hFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMuc2VuZEV4dGVybmFsUHJvY2Vzc1JlcXVlc3QoXCJsYXVuY2gtZXh0ZXJuYWwtcHJvY2Vzc1wiLGUpfW1vbml0b3JFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMuc2VuZEV4dGVybmFsUHJvY2Vzc1JlcXVlc3QoXCJtb25pdG9yLWV4dGVybmFsLXByb2Nlc3NcIixlKX1sb2coZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3cml0ZS10by1sb2dcIix7bGV2ZWw6ZSxtZXNzYWdlOnR9KS50aGVuKCgoKT0+e30pKX1vcGVuVXJsV2l0aEJyb3dzZXIoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwib3Blbi11cmwtd2l0aC1icm93c2VyXCIse3VybDplfSkudGhlbigoKCk9Pnt9KSl9cmVsZWFzZUV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWxlYXNlLWV4dGVybmFsLXByb2Nlc3NcIix7dXVpZDplfSkudGhlbigoKCk9Pnt9KSl9c2hvd0RldmVsb3BlclRvb2xzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctZGV2ZWxvcGVyLXRvb2xzXCIsZSkudGhlbigoKCk9Pnt9KSl9dGVybWluYXRlRXh0ZXJuYWxQcm9jZXNzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInRlcm1pbmF0ZS1leHRlcm5hbC1wcm9jZXNzXCIsZSkudGhlbigoKCk9Pnt9KSl9dXBkYXRlUHJveHlTZXR0aW5ncyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1cGRhdGUtcHJveHlcIixlKS50aGVuKCgoKT0+e30pKX1kb3dubG9hZEFzc2V0KGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKCgobixpKT0+e2lmKFwiTm9kZUVudmlyb25tZW50XCI9PT10aGlzLndpcmUuZW52aXJvbm1lbnQuY29uc3RydWN0b3IubmFtZSlyZXR1cm4gdm9pZCBpKG5ldyByLk5vdFN1cHBvcnRlZEVycm9yKFwiZG93bmxvYWRBc3NldCBvbmx5IHN1cHBvcnRlZCBpbiBhbiBPcGVuRmluIFJlbmRlciBwcm9jZXNzXCIpKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCkudG9TdHJpbmcoKSxzPWBhc3NldC1kb3dubG9hZC1wcm9ncmVzcy0ke299YCxhPWBhc3NldC1kb3dubG9hZC1lcnJvci0ke299YCxjPWBhc3NldC1kb3dubG9hZC1jb21wbGV0ZS0ke299YCxkPWU9Pntjb25zdCBuPXtkb3dubG9hZGVkQnl0ZXM6ZS5kb3dubG9hZGVkQnl0ZXMsdG90YWxCeXRlczplLnRvdGFsQnl0ZXN9O3Qobil9LGg9KCk9Pnt0aGlzLnJlbW92ZUxpc3RlbmVyKHMsZCl9O3RoaXMub24ocyxkKSx0aGlzLm9uY2UoYSwoKGUsdCk9Pntjb25zdCBuPXR8fGU7aCgpLGkobmV3IHIuUnVudGltZUVycm9yKG4pKX0pKSx0aGlzLm9uY2UoYywoKCk9PntoKCksbigpfSkpO2NvbnN0IGw9T2JqZWN0LmFzc2lnbihlLHtkb3dubG9hZElkOm99KTt0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLWFzc2V0XCIsbCkuY2F0Y2goKGU9PntoKCksaShlKX0pKX0pKX1kb3dubG9hZFJ1bnRpbWUoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKChuLGkpPT57aWYoXCJOb2RlRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lKXJldHVybiB2b2lkIGkobmV3IHIuTm90U3VwcG9ydGVkRXJyb3IoXCJkb3dubG9hZFJ1bnRpbWUgb25seSBzdXBwb3J0ZWQgaW4gYW4gT3BlbkZpbiBSZW5kZXIgcHJvY2Vzc1wiKSk7Y29uc3Qgbz10aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpLnRvU3RyaW5nKCkscz1gcnVudGltZS1kb3dubG9hZC1wcm9ncmVzcy0ke299YCxhPWBydW50aW1lLWRvd25sb2FkLWVycm9yLSR7b31gLGM9YHJ1bnRpbWUtZG93bmxvYWQtY29tcGxldGUtJHtvfWAsZD1lPT57Y29uc3Qgbj17ZG93bmxvYWRlZEJ5dGVzOmUuZG93bmxvYWRlZEJ5dGVzLHRvdGFsQnl0ZXM6ZS50b3RhbEJ5dGVzfTt0KG4pfSxoPSgpPT57dGhpcy5yZW1vdmVMaXN0ZW5lcihzLGQpfTt0aGlzLm9uKHMsZCksdGhpcy5vbmNlKGEsKChlLHQpPT57Y29uc3Qgbj10fHxlO2goKSxpKG5ldyByLlJ1bnRpbWVFcnJvcihuKSl9KSksdGhpcy5vbmNlKGMsKCgpPT57aCgpLG4oKX0pKTtjb25zdCBsPU9iamVjdC5hc3NpZ24oZSx7ZG93bmxvYWRJZDpvfSk7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkb3dubG9hZC1ydW50aW1lXCIsbCkuY2F0Y2goKGU9PntoKCksaShlKX0pKX0pKX1kb3dubG9hZFByZWxvYWRTY3JpcHRzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLXByZWxvYWQtc2NyaXB0c1wiLHtzY3JpcHRzOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRBbGxFeHRlcm5hbEFwcGxpY2F0aW9ucygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtZXh0ZXJuYWwtYXBwbGljYXRpb25zXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFwcEFzc2V0SW5mbyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwLWFzc2V0LWluZm9cIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRDb29raWVzKGUpe2NvbnN0IHQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldFVybCgpLG49T2JqZWN0LmFzc2lnbihlLHt1cmw6dH0pO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jb29raWVzXCIsbikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9c2V0TWluTG9nTGV2ZWwoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LW1pbi1sb2ctbGV2ZWxcIix7bGV2ZWw6ZX0pLnRoZW4oKCgpPT57fSkpfXJlc29sdmVVdWlkKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlc29sdmUtdXVpZFwiLHtlbnRpdHlLZXk6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWV4ZWN1dGVPblJlbW90ZShlLHQpe3JldHVybiB0LnJlcXVlc3RpbmdJZGVudGl0eT1lLHRoaXMud2lyZS5mZXJyeUFjdGlvbih0KX1yZWFkUmVnaXN0cnlWYWx1ZShlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVhZC1yZWdpc3RyeS12YWx1ZVwiLHtyb290S2V5OmUsc3Via2V5OnQsdmFsdWU6bn0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXJlZ2lzdGVyRXh0ZXJuYWxDb25uZWN0aW9uKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlZ2lzdGVyLWV4dGVybmFsLWNvbm5lY3Rpb25cIix7dXVpZDplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0U2VydmljZUNvbmZpZ3VyYXRpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgYW4gb2JqZWN0IHdpdGggYSBgbmFtZWAgcHJvcGVydHkgaGF2aW5nIGEgc3RyaW5nIHZhbHVlXCIpO2NvbnN0e25hbWU6dH09ZTtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc2VydmljZS1jb25maWd1cmF0aW9uXCIse25hbWU6dH0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldFN5c3RlbUFwcENvbmZpZyhlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgYSBzdHJpbmcgdmFsdWUgZm9yIG5hbWUgb2Ygc3lzdGVtIGFwcFwiKTtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc3lzdGVtLWFwcC1jb25maWd1cmF0aW9uXCIse25hbWU6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXJ1blJ2bUhlYWx0aENoZWNrKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLXJ2bS1oZWFsdGgtY2hlY2tcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgbGF1bmNoTWFuaWZlc3QoZSx0KXtyZXR1cm4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXVuY2gtbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZSxvcHRzOnR9KSkucGF5bG9hZC5kYXRhLm1hbmlmZXN0fWFzeW5jIHF1ZXJ5UGVybWlzc2lvbkZvckN1cnJlbnRDb250ZXh0KGUpe2NvbnN0IHQ9e3V1aWQ6dGhpcy53aXJlLm1lLnV1aWQsbmFtZTp0aGlzLndpcmUubWUubmFtZX07cmV0dXJuKGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicXVlcnktcGVybWlzc2lvbi1mb3ItY3VycmVudC1jb250ZXh0XCIse2FwaU5hbWU6ZSxpZGVudGl0eTp0fSkpLnBheWxvYWQuZGF0YX1hc3luYyBlbmFibGVOYXRpdmVXaW5kb3dJbnRlZ3JhdGlvblByb3ZpZGVyKGUpe2NvbnN0e3BheWxvYWQ6dH09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJlbmFibGUtbmF0aXZlLXdpbmRvdy1pbnRlZ3JhdGlvbi1wcm92aWRlclwiLHtwZXJtaXNzaW9uczplfSk7cmV0dXJuIHQuZGF0YX1hc3luYyByZWdpc3RlclVzYWdlKHtkYXRhOmUsdHlwZTp0fSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWdpc3Rlci11c2FnZVwiLHtkYXRhOmUsdHlwZTp0fSl9fXQuZGVmYXVsdD1zfSwyNDA6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDQxNjkpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgY3JlYXRlKGUpe2NvbnN0e3V1aWQ6dH09dGhpcy53aXJlLm1lO2lmKCFlLm5hbWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlLm5hbWUpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgYSBuYW1lIHByb3BlcnR5IGFzIGEgc3RyaW5nIGluIG9yZGVyIHRvIGNyZWF0ZSBhIFZpZXcuXCIpO3JldHVybiB0aGlzLndpcmUuZW52aXJvbm1lbnQuY2hpbGRWaWV3cz9hd2FpdCB0aGlzLndpcmUuZW52aXJvbm1lbnQuY3JlYXRlQ2hpbGRDb250ZW50KHtlbnRpdHlUeXBlOlwidmlld1wiLG9wdGlvbnM6ey4uLmUsdXVpZDp0fX0pOmF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY3JlYXRlLXZpZXdcIix7Li4uZSx1dWlkOnR9KSx0aGlzLndyYXBTeW5jKHt1dWlkOnQsbmFtZTplLm5hbWV9KX1hc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy13cmFwXCIpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5WaWV3KHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctd3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5WaWV3KHRoaXMud2lyZSxlKX1nZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ2aWV3LWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNWaWV3KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgVmlldyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOmUsbmFtZTp0fSl9Z2V0Q3VycmVudFN5bmMoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy53aXJlLm1lLmlzVmlldyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFZpZXcgY29udGV4dFwiKTtjb25zdHt1dWlkOmUsbmFtZTp0fT10aGlzLndpcmUubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5kZWZhdWx0PXN9LDMxNjM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVmlldz12b2lkIDA7Y29uc3QgaT1uKDQ2MzYpLHI9big0OTk3KTtjbGFzcyBvIGV4dGVuZHMgaS5XZWJDb250ZW50c3tjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCxcInZpZXdcIiksdGhpcy5pZGVudGl0eT10LHRoaXMuYXR0YWNoPWFzeW5jIGU9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImF0dGFjaC12aWV3XCIse3RhcmdldDplLC4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5kZXN0cm95PWFzeW5jKCk9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRlc3Ryb3ktdmlld1wiLHsuLi50aGlzLmlkZW50aXR5fSl9LHRoaXMuc2hvdz1hc3luYygpPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXZpZXdcIix7Li4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmhpZGU9YXN5bmMoKT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaGlkZS12aWV3XCIsey4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5zZXRCb3VuZHM9YXN5bmMgZT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXZpZXctYm91bmRzXCIse2JvdW5kczplLC4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5nZXRCb3VuZHM9YXN5bmMoKT0+KGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctYm91bmRzXCIsey4uLnRoaXMuaWRlbnRpdHl9KSkucGF5bG9hZC5kYXRhLHRoaXMuZ2V0SW5mbz1hc3luYygpPT4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmlldy1pbmZvXCIsey4uLnRoaXMuaWRlbnRpdHl9KSkucGF5bG9hZC5kYXRhLHRoaXMuZ2V0UGFyZW50TGF5b3V0PWFzeW5jKCk9Pih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LXBhcmVudC1sYXlvdXRcIix7Li4udGhpcy5pZGVudGl0eX0pLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLmdldEN1cnJlbnRXaW5kb3coKSkuZ2V0TGF5b3V0KCkpLHRoaXMuZ2V0T3B0aW9ucz1hc3luYygpPT50aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12aWV3LW9wdGlvbnNcIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpLHRoaXMudXBkYXRlT3B0aW9ucz1hc3luYyBlPT50aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS12aWV3LW9wdGlvbnNcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKSx0aGlzLmdldEN1cnJlbnRXaW5kb3c9YXN5bmMoKT0+e2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctd2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHl9KTtyZXR1cm4gbmV3IHIuX1dpbmRvdyh0aGlzLndpcmUsZSl9fWFzeW5jIGZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9PXtlbWl0U3ludGhGb2N1c2VkOiEwfSl7Y29uc3QgdD1hd2FpdCB0aGlzLmdldEN1cnJlbnRXaW5kb3coKTthd2FpdCB0LmZvY3VzZWRXZWJWaWV3V2FzQ2hhbmdlZCgpLGF3YWl0IHN1cGVyLmZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9KX19dC5WaWV3PW99LDQxNjk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyNDApO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDMxNjMpLHQpfSw0NjM2OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LldlYkNvbnRlbnRzPXZvaWQgMDtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUsbix0LnV1aWQsdC5uYW1lKSx0aGlzLmVudGl0eVR5cGU9bn1jYXB0dXJlUGFnZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjYXB0dXJlLXBhZ2VcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1leGVjdXRlSmF2YVNjcmlwdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleGVjdXRlLWphdmFzY3JpcHQtaW4td2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHksY29kZTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Wm9vbUxldmVsKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXpvb20tbGV2ZWxcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zZXRab29tTGV2ZWwoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXpvb20tbGV2ZWxcIix7Li4udGhpcy5pZGVudGl0eSxsZXZlbDplfSkudGhlbigoKCk9Pnt9KSl9bmF2aWdhdGUoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibmF2aWdhdGUtd2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHksdXJsOmV9KS50aGVuKCgoKT0+e30pKX1uYXZpZ2F0ZUJhY2soKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3ctYmFja1wiLHsuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9YXN5bmMgbmF2aWdhdGVGb3J3YXJkKCl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3ctZm9yd2FyZFwiLHsuLi50aGlzLmlkZW50aXR5fSl9c3RvcE5hdmlnYXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLXdpbmRvdy1uYXZpZ2F0aW9uXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZWxvYWQoZT0hMSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVsb2FkLXdpbmRvd1wiLHtpZ25vcmVDYWNoZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1wcmludChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwcmludFwiLHsuLi50aGlzLmlkZW50aXR5LG9wdGlvbnM6ZX0pLnRoZW4oKCgpPT57fSkpfWZpbmRJblBhZ2UoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmaW5kLWluLXBhZ2VcIix7Li4udGhpcy5pZGVudGl0eSxzZWFyY2hUZXJtOmUsb3B0aW9uczp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9c3RvcEZpbmRJblBhZ2UoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic3RvcC1maW5kLWluLXBhZ2VcIix7Li4udGhpcy5pZGVudGl0eSxhY3Rpb246ZX0pLnRoZW4oKCgpPT57fSkpfWdldFByaW50ZXJzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXByaW50ZXJzXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBmb2N1cyh7ZW1pdFN5bnRoRm9jdXNlZDplfT17ZW1pdFN5bnRoRm9jdXNlZDohMH0pe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZm9jdXMtd2luZG93XCIse2VtaXRTeW50aEZvY3VzZWQ6ZSwuLi50aGlzLmlkZW50aXR5fSl9YXN5bmMgc2hvd0RldmVsb3BlclRvb2xzKCl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LWRldmVsb3Blci10b29sc1wiLHRoaXMuaWRlbnRpdHkpfWFzeW5jIGdldFByb2Nlc3NJbmZvKCl7Y29uc3R7cGF5bG9hZDp7ZGF0YTplfX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtcHJvY2Vzcy1pbmZvXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGV9YXN5bmMgZ2V0U2hhcmVkV29ya2Vycygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zaGFyZWQtd29ya2Vyc1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGluc3BlY3RTaGFyZWRXb3JrZXIoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2hhcmVkLXdvcmtlclwiLHsuLi50aGlzLmlkZW50aXR5fSl9YXN5bmMgaW5zcGVjdFNoYXJlZFdvcmtlckJ5SWQoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnNwZWN0LXNoYXJlZC13b3JrZXItYnktaWRcIix7Li4udGhpcy5pZGVudGl0eSx3b3JrZXJJZDplfSl9YXN5bmMgaW5zcGVjdFNlcnZpY2VXb3JrZXIoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2VydmljZS13b3JrZXJcIix7Li4udGhpcy5pZGVudGl0eX0pfX10LldlYkNvbnRlbnRzPXJ9LDIxNjM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDUwNDcpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy13cmFwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5fV2luZG93KHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9XaW5kb3codGhpcy53aXJlLGUpfWNyZWF0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtd2luZG93XCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLl9XaW5kb3codGhpcy53aXJlLHt1dWlkOnRoaXMubWUudXVpZCxuYW1lOmUubmFtZX0pLmNyZWF0ZVdpbmRvdyhlKX1nZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY3VycmVudC13aW5kb3dcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1dpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFdpbmRvdyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOmUsbmFtZTp0fSl9Z2V0Q3VycmVudFN5bmMoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LXdpbmRvdy1zeW5jXCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dFwiKTtjb25zdHt1dWlkOmUsbmFtZTp0fT10aGlzLndpcmUubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5kZWZhdWx0PXN9LDUwNDc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuX1dpbmRvdz12b2lkIDA7Y29uc3QgaT1uKDcyNjQpLHI9big0NjM2KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIHIuV2ViQ29udGVudHN7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQsXCJ3aW5kb3dcIiksdGhpcy5pZGVudGl0eT10fWNyZWF0ZVdpbmRvdyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctY3JlYXRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLG5ldyBQcm9taXNlKCgodCxuKT0+e2NvbnN0IGk9XCJmaXJlLWNvbnN0cnVjdG9yLWNhbGxiYWNrXCIscj1uZXcgUHJvbWlzZSgoZT0+e3RoaXMub24oaSwoZnVuY3Rpb24gdChuKXtsZXQgcjtjb25zdHtzdWNjZXNzOm99PW4scz1uLmRhdGEse21lc3NhZ2U6YX09cztyPW8/e2h0dHBSZXNwb25zZUNvZGU6cy5odHRwUmVzcG9uc2VDb2RlLGFwaUluamVjdGVkOnMuYXBpSW5qZWN0ZWR9OnttZXNzYWdlOnMubWVzc2FnZSxuZXR3b3JrRXJyb3JDb2RlOnMubmV0d29ya0Vycm9yQ29kZSxzdGFjazpzLnN0YWNrfSx0aGlzLnJlbW92ZUxpc3RlbmVyKGksdCksZSh7bWVzc2FnZTphLGNiUGF5bG9hZDpyLHN1Y2Nlc3M6b30pfSkpfSkpO3ZvaWQgMD09PWUud2FpdEZvclBhZ2VMb2FkJiYoZS53YWl0Rm9yUGFnZUxvYWQ9ITEpLHZvaWQgMD09PWUuYXV0b1Nob3cmJihlLmF1dG9TaG93PSEwKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5jcmVhdGVDaGlsZENvbnRlbnQoe2VudGl0eVR5cGU6XCJ3aW5kb3dcIixvcHRpb25zOmV9KTtQcm9taXNlLmFsbChbcixvXSkudGhlbigoZT0+e2NvbnN0IGk9ZVswXTtpLnN1Y2Nlc3M/dCh0aGlzKTpuKGkpO3RyeXt0aGlzLmdldFdlYldpbmRvdygpLmZpbi5fX2ludGVybmFsXy5vcGVuZXJTdWNjZXNzQ0JDYWxsZWQoKX1jYXRjaChlKXt9fSkpLmNhdGNoKG4pfSkpfWdldEFsbEZyYW1lcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtZnJhbWVzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Qm91bmRzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1ib3VuZHNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1jZW50ZXIoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjZW50ZXItd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Ymx1cigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImJsdXItd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9YnJpbmdUb0Zyb250KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYnJpbmctd2luZG93LXRvLWZyb250XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9YW5pbWF0ZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImFuaW1hdGUtd2luZG93XCIse3RyYW5zaXRpb25zOmUsb3B0aW9uczp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1oaWRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaGlkZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1jbG9zZShlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS13aW5kb3dcIix7Zm9yY2U6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9PntPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxudWxsKX0pKX1mb2N1c2VkV2ViVmlld1dhc0NoYW5nZWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmb2N1c2VkLXdlYnZpZXctY2hhbmdlZFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWdldE5hdGl2ZUlkKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1uYXRpdmUtaWRcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRDdXJyZW50Vmlld3MoKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC12aWV3c1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlLmRhdGEubWFwKChlPT5uZXcgby5WaWV3KHRoaXMud2lyZSxlKSkpfWRpc2FibGVGcmFtZSgpe3JldHVybiBjb25zb2xlLndhcm4oXCJGdW5jdGlvbiBpcyBkZXByZWNhdGVkOyB1c2UgZGlzYWJsZVVzZXJNb3ZlbWVudCBpbnN0ZWFkLlwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImRpc2FibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9ZGlzYWJsZVVzZXJNb3ZlbWVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRpc2FibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9ZW5hYmxlRnJhbWUoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRnVuY3Rpb24gaXMgZGVwcmVjYXRlZDsgdXNlIGVuYWJsZVVzZXJNb3ZlbWVudCBpbnN0ZWFkLlwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1lbmFibGVVc2VyTW92ZW1lbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJlbmFibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Zmxhc2goKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmbGFzaC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zdG9wRmxhc2hpbmcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLWZsYXNoLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRMYXlvdXQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtbGF5b3V0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksIShhd2FpdCB0aGlzLmdldE9wdGlvbnMoKSkubGF5b3V0KXRocm93IG5ldyBFcnJvcihcIldpbmRvdyBkb2VzIG5vdCBoYXZlIGEgTGF5b3V0XCIpO3JldHVybiB0aGlzLmZpbi5QbGF0Zm9ybS5MYXlvdXQud3JhcCh0aGlzLmlkZW50aXR5KX1nZXRPcHRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1vcHRpb25zXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50QXBwbGljYXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXBhcmVudC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgaS5BcHBsaWNhdGlvbih0aGlzLndpcmUsdGhpcy5pZGVudGl0eSkpfWdldFBhcmVudFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtcGFyZW50LXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgaS5BcHBsaWNhdGlvbih0aGlzLndpcmUsdGhpcy5pZGVudGl0eSkpLnRoZW4oKGU9PmUuZ2V0V2luZG93KCkpKX1hc3luYyBnZXRTbmFwc2hvdChlKXtjb25zdCB0PXthcmVhOmUsLi4udGhpcy5pZGVudGl0eX07cmV0dXJuIGNvbnNvbGUud2FybihcIldpbmRvdy5nZXRTbmFwc2hvdCBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFdpbmRvdy5jYXB0dXJlUGFnZVwiKSwoYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LXNuYXBzaG90XCIsdCkpLnBheWxvYWQuZGF0YX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctc3RhdGVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRXZWJXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXdlYi13aW5kb3dcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSx0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0V2ViV2luZG93KHRoaXMuaWRlbnRpdHkpfWlzTWFpbldpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1pcy1tYWluLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMubWUudXVpZD09PXRoaXMubWUubmFtZX1pc1Nob3dpbmcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpcy13aW5kb3ctc2hvd2luZ1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfW1heGltaXplKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibWF4aW1pemUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9bWluaW1pemUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtaW5pbWl6ZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1tb3ZlQnkoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtb3ZlLXdpbmRvdy1ieVwiLHtkZWx0YUxlZnQ6ZSxkZWx0YVRvcDp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1tb3ZlVG8oZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtb3ZlLXdpbmRvd1wiLHtsZWZ0OmUsdG9wOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc2l6ZUJ5KGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXNpemUtd2luZG93LWJ5XCIse2RlbHRhV2lkdGg6TWF0aC5mbG9vcihlKSxkZWx0YUhlaWdodDpNYXRoLmZsb29yKHQpLGFuY2hvcjpuLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZXNpemVUbyhlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzaXplLXdpbmRvd1wiLHt3aWR0aDpNYXRoLmZsb29yKGUpLGhlaWdodDpNYXRoLmZsb29yKHQpLGFuY2hvcjpuLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZXN0b3JlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzdG9yZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zZXRBc0ZvcmVncm91bmQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtZm9yZWdyb3VuZC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zZXRCb3VuZHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXdpbmRvdy1ib3VuZHNcIix7Li4uZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9c2hvdyhlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXdpbmRvd1wiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zaG93QXQoZSx0LG49ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctYXQtd2luZG93XCIse2ZvcmNlOm4sbGVmdDpNYXRoLmZsb29yKGUpLHRvcDpNYXRoLmZsb29yKHQpLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX11cGRhdGVPcHRpb25zKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS13aW5kb3ctb3B0aW9uc1wiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWF1dGhlbnRpY2F0ZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1hdXRoZW50aWNhdGVcIix7dXNlck5hbWU6ZSxwYXNzd29yZDp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBzaG93UG9wdXBNZW51KGUpe2NvbnN0e3BheWxvYWQ6dH09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXBvcHVwLW1lbnVcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KTtyZXR1cm4gdC5kYXRhfWFzeW5jIGNsb3NlUG9wdXBNZW51KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xvc2UtcG9wdXAtbWVudVwiLHsuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9fXQuX1dpbmRvdz1zfSw0OTk3OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMjE2Myk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oNTA0NyksdCl9LDE2ODE6KGUsdCxuKT0+e3ZhciBpO3QuSD12b2lkIDA7Y29uc3Qgcj1uKDY0NjUpLG89big2NTQ1KSxzPW4oOTI5OCk7Y2xhc3MgYSBleHRlbmRzIHIuRXZlbnRFbWl0dGVye2Nvbm5lY3QoZSl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1jb25uZWN0U3luYygpe3Rocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IHJ1bm5pbmcgaW4gT3BlbkZpbi5cIil9c2VuZChlKXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIpfXNodXRkb3duKCl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fWNsYXNzIGN7Y29uc3RydWN0b3IoKXt0aGlzLmNoaWxkVmlld3M9ITB9Z2V0RGVmYXVsdENoYW5uZWxPcHRpb25zKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0UnRjUGVlcigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldE1hbmFnZXJDb25zdHJ1Y3Rvcigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldFByb3ZpZGVySW5pdGlhbGl6ZXIoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX13cml0ZVRva2VuKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9cmV0cmlldmVQb3J0KGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldE5leHRNZXNzYWdlSWQoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRSYW5kb21JZCgpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWNyZWF0ZUNoaWxkQ29udGVudChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRXZWJXaW5kb3coZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0Q3VycmVudEVudGl0eUlkZW50aXR5KCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0Q3VycmVudEVudGl0eVR5cGUoKXtyZXR1cm5cInVua25vd25cIn1yYWlzZUV2ZW50KGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0VXJsKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9d2hlblJlYWR5KCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9fXQuSD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYobnVsbD09PShpPXdpbmRvdyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZmluKXx8KCgpPT57Y29uc3QgZT1uZXcgYyx0PW5ldyBzLmRlZmF1bHQoYSxlLHt1dWlkOlwiXCIsbmFtZTpcIlwifSk7cmV0dXJuIG5ldyBvLmRlZmF1bHQodCl9KSgpfSw4MDY4OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRGaW49dC5yZWdpc3RlckZpbj12b2lkIDA7Y29uc3Qgbj1uZXcgV2Vha01hcDt0LnJlZ2lzdGVyRmluPWZ1bmN0aW9uKGUsdCl7bi5zZXQoZSx0KX0sdC5nZXRGaW49ZnVuY3Rpb24oZSl7Y29uc3QgdD1uLmdldChlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9jYXRlIGZpbiBhcGkgZm9yIGdpdmVuIHRyYW5zcG9ydFwiKTtyZXR1cm4gdH19LDUwMDc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJ1bnRpbWVFcnJvcj10Lk5vdFN1cHBvcnRlZEVycm9yPXQuTm90SW1wbGVtZW50ZWRFcnJvcj10Lk5vQWNrRXJyb3I9dC5EdXBsaWNhdGVDb3JyZWxhdGlvbkVycm9yPXQuVW5leHBlY3RlZEFjdGlvbkVycm9yPXQuRGlzY29ubmVjdGVkRXJyb3I9dm9pZCAwO2NsYXNzIG4gZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihgRXhwZWN0ZWQgd2Vic29ja2V0IHN0YXRlIE9QRU4gYnV0IGZvdW5kICR7ZX1gKSx0aGlzLnJlYWR5U3RhdGU9ZX19dC5EaXNjb25uZWN0ZWRFcnJvcj1uO2NsYXNzIGkgZXh0ZW5kcyBFcnJvcnt9dC5VbmV4cGVjdGVkQWN0aW9uRXJyb3I9aTtjbGFzcyByIGV4dGVuZHMgRXJyb3J7fXQuRHVwbGljYXRlQ29ycmVsYXRpb25FcnJvcj1yO2NsYXNzIG8gZXh0ZW5kcyBFcnJvcnt9dC5Ob0Fja0Vycm9yPW87Y2xhc3MgcyBleHRlbmRzIEVycm9ye310Lk5vdEltcGxlbWVudGVkRXJyb3I9cztjbGFzcyBhIGV4dGVuZHMgRXJyb3J7fXQuTm90U3VwcG9ydGVkRXJyb3I9YTtjbGFzcyBjIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1lLnBheWxvYWR8fGUse3JlYXNvbjpuLGVycm9yOml9PXQ7c3VwZXIobiksdGhpcy5uYW1lPVwiUnVudGltZUVycm9yXCIsKG51bGw9PWk/dm9pZCAwOmkuc3RhY2spJiYodGhpcy5zdGFjaz1pLnN0YWNrKX19dC5SdW50aW1lRXJyb3I9Y30sOTI5ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgcz1uKDY0NjUpLGE9big4NjI0KSxjPW4oNTAwNyksZD1uKDI3MzQpLGg9big5NjQxKTtjbGFzcyBsIGV4dGVuZHMgcy5FdmVudEVtaXR0ZXJ7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksdGhpcy53aXJlTGlzdGVuZXJzPW5ldyBNYXAsdGhpcy50b3BpY1JlZk1hcD1uZXcgTWFwLHRoaXMuZXZlbnRBZ2dyZWdhdG9yPW5ldyBkLmRlZmF1bHQsdGhpcy5tZXNzYWdlSGFuZGxlcnM9W3RoaXMuZXZlbnRBZ2dyZWdhdG9yLmRpc3BhdGNoRXZlbnRdLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmNvbm5lY3RTeW5jPSgpPT57byh0aGlzLGkpLmNvbm5lY3RTeW5jKCl9LHRoaXMuZ2V0UG9ydD0oKT0+e2lmKFwiTm9kZUVudmlyb25tZW50XCIhPT10aGlzLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUpdGhyb3cgbmV3IGMuTm90SW1wbGVtZW50ZWRFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtyZXR1cm4gbyh0aGlzLGkpLndpcmUudXJsLnNwbGl0KFwiOlwiKS5zbGljZSgtMSlbMF19LHIodGhpcyxpLG5ldyBlKHRoaXMub25tZXNzYWdlLmJpbmQodGhpcykpKSx0aGlzLmVudmlyb25tZW50PXQsdGhpcy5zZW5kUmF3PW8odGhpcyxpKS5zZW5kLmJpbmQobyh0aGlzLGkpKSx0aGlzLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5oYW5kbGVNZXNzYWdlLmJpbmQodGhpcykpLG8odGhpcyxpKS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e2Zvcihjb25zdFsse3JlamVjdDplfV1vZiB0aGlzLndpcmVMaXN0ZW5lcnMpZShcIlJlbW90ZSBjb25uZWN0aW9uIGhhcyBjbG9zZWRcIik7dGhpcy53aXJlTGlzdGVuZXJzLmNsZWFyKCksdGhpcy5lbWl0KFwiZGlzY29ubmVjdGVkXCIpfSkpO2NvbnN0e3V1aWQ6cyxuYW1lOmF9PW4sbD10aGlzLmVudmlyb25tZW50LmdldEN1cnJlbnRFbnRpdHlUeXBlKCk7dGhpcy5tZT1oLmdldEJhc2VNZShsLHMsYSl9c2h1dGRvd24oKXtyZXR1cm4gbyh0aGlzLGkpLnNodXRkb3duKCl9YXN5bmMgY29ubmVjdChlKXtpZihhLmlzRXhpc3RpbmdDb25uZWN0Q29uZmlnKGUpKXJldHVybiB0aGlzLmNvbm5lY3RCeVBvcnQoZSk7aWYoYS5pc05ld0Nvbm5lY3RDb25maWcoZSkpe2NvbnN0IHQ9YXdhaXQgdGhpcy5lbnZpcm9ubWVudC5yZXRyaWV2ZVBvcnQoZSk7cmV0dXJuIHRoaXMuY29ubmVjdEJ5UG9ydCh7Li4uZSxhZGRyZXNzOmB3czovL2xvY2FsaG9zdDoke3R9YH0pfX1hc3luYyBjb25uZWN0QnlQb3J0KGUpe2NvbnN0e2FkZHJlc3M6dCx1dWlkOm59PWUscj17Li4uZSx0eXBlOlwiZmlsZS10b2tlblwifSxzPW8odGhpcyxpKTthd2FpdCBzLmNvbm5lY3QodCk7Y29uc3QgYT1hd2FpdCB0aGlzLnNlbmRBY3Rpb24oXCJyZXF1ZXN0LWV4dGVybmFsLWF1dGhvcml6YXRpb25cIix7dXVpZDpuLHR5cGU6XCJmaWxlLXRva2VuXCJ9LCEwKTtpZihcImV4dGVybmFsLWF1dGhvcml6YXRpb24tcmVzcG9uc2VcIiE9PWEuYWN0aW9uKXRocm93IG5ldyBjLlVuZXhwZWN0ZWRBY3Rpb25FcnJvcihhLmFjdGlvbik7Y29uc3R7dG9rZW46ZH09YS5wYXlsb2FkO2F3YWl0IHRoaXMuZW52aXJvbm1lbnQud3JpdGVUb2tlbihhLnBheWxvYWQuZmlsZSxhLnBheWxvYWQudG9rZW4pO2NvbnN0IGg9YXdhaXQgdGhpcy5zZW5kQWN0aW9uKFwicmVxdWVzdC1hdXRob3JpemF0aW9uXCIsciwhMCk7aWYoXCJhdXRob3JpemF0aW9uLXJlc3BvbnNlXCIhPT1oLmFjdGlvbil0aHJvdyBuZXcgYy5VbmV4cGVjdGVkQWN0aW9uRXJyb3IoaC5hY3Rpb24pO2lmKCEwIT09aC5wYXlsb2FkLnN1Y2Nlc3MpdGhyb3cgbmV3IGMuUnVudGltZUVycm9yKGgucGF5bG9hZCk7cmV0dXJuIGR9c2VuZEFjdGlvbihlLHQ9e30sbj0hMSl7cmV0dXJuIG5ldyBQcm9taXNlKCgocixzKT0+e2NvbnN0IGE9dGhpcy5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksYz17YWN0aW9uOmUscGF5bG9hZDp0LG1lc3NhZ2VJZDphfSxkPW8odGhpcyxpKTtyZXR1cm4gdGhpcy5hZGRXaXJlTGlzdGVuZXIoYSxyLHMsbiksZC5zZW5kKGMpLmNhdGNoKHMpfSkpfWZlcnJ5QWN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbik9Pntjb25zdCByPXRoaXMuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpO2UubWVzc2FnZUlkPXI7Y29uc3Qgcz1lPT57dChlLnBheWxvYWQpfTtyZXR1cm4gbyh0aGlzLGkpLnNlbmQoZSkudGhlbigoKCk9PnRoaXMuYWRkV2lyZUxpc3RlbmVyKHIscyxuLCExKSkpLmNhdGNoKG4pfSkpfXJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoZSl7dGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChlKX1hZGRXaXJlTGlzdGVuZXIoZSx0LG4saSl7aT90aGlzLnVuY29ycmVsYXRlZExpc3RlbmVyPXQ6dGhpcy53aXJlTGlzdGVuZXJzLmhhcyhlKT9uKG5ldyBjLkR1cGxpY2F0ZUNvcnJlbGF0aW9uRXJyb3IoU3RyaW5nKGUpKSk6dGhpcy53aXJlTGlzdGVuZXJzLnNldChlLHtyZXNvbHZlOnQscmVqZWN0Om59KX1vbm1lc3NhZ2UoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5tZXNzYWdlSGFuZGxlcnMpdC5jYWxsKG51bGwsZSl9aGFuZGxlTWVzc2FnZShlKXtjb25zdCB0PWUuY29ycmVsYXRpb25JZHx8TmFOO2lmKFwiY29ycmVsYXRpb25JZFwiaW4gZSl7aWYoIXRoaXMud2lyZUxpc3RlbmVycy5oYXModCkpcmV0dXJuITE7e2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09dGhpcy53aXJlTGlzdGVuZXJzLmdldCh0KTtcImFja1wiIT09ZS5hY3Rpb24/aShuZXcgYy5Ob0Fja0Vycm9yKGUuYWN0aW9uKSk6XCJwYXlsb2FkXCJpbiBlP2UucGF5bG9hZC5zdWNjZXNzP24uY2FsbChudWxsLGUpOmkobmV3IGMuUnVudGltZUVycm9yKGUucGF5bG9hZCkpOmkobmV3IGMuUnVudGltZUVycm9yKGUpKSx0aGlzLndpcmVMaXN0ZW5lcnMuZGVsZXRlKHQpfX1lbHNlIHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXImJnRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXIuY2FsbChudWxsLGUpLHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXI9KCk9Pnt9O3JldHVybiEwfX1pPW5ldyBXZWFrTWFwLHQuZGVmYXVsdD1sfSw4NjI0OihlLHQpPT57ZnVuY3Rpb24gbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5tYW5pZmVzdFVybH1mdW5jdGlvbiBpKGUpe3JldHVybiByKGUpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5hZGRyZXNzfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUudXVpZH1mdW5jdGlvbiBvKGUpe3JldHVybiBlLnJ1bnRpbWUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnJ1bnRpbWUudmVyc2lvbn1mdW5jdGlvbiBzKGUpe3JldHVybiByKGUpJiZvKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXNJbnRlcm5hbENvbm5lY3RDb25maWc9dC5pc1BvcnREaXNjb3ZlcnlDb25maWc9dC5pc05ld0Nvbm5lY3RDb25maWc9dC5pc0V4aXN0aW5nQ29ubmVjdENvbmZpZz10LmlzRXh0ZXJuYWxDb25maWc9dm9pZCAwLHQuaXNFeHRlcm5hbENvbmZpZz1uLHQuaXNFeGlzdGluZ0Nvbm5lY3RDb25maWc9aSx0LmlzTmV3Q29ubmVjdENvbmZpZz1zLHQuaXNQb3J0RGlzY292ZXJ5Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZvKGUpfHxzKGUpfSx0LmlzSW50ZXJuYWxDb25uZWN0Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfHxzKGUpfX0sMjM2NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZXJyb3JUb1BPSk89dm9pZCAwLHQuZXJyb3JUb1BPSk89ZnVuY3Rpb24oZSl7cmV0dXJue3N0YWNrOmUuc3RhY2ssbWVzc2FnZTplLm1lc3NhZ2UsdG9TdHJpbmc6ZS50b1N0cmluZ319fSwzOTE3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5leGhhdXN0aXZlQ2hlY2s9dm9pZCAwLHQuZXhoYXVzdGl2ZUNoZWNrPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCB2YWx1ZTogJHtlfSR7dD9gXFxuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlOiAke3Quam9pbihcIlwiKX1gOlwiXCJ9YCl9fSwzNDQyOihlLHQpPT57YXN5bmMgZnVuY3Rpb24gbihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGUpe2NvbnN0IGU9YXdhaXQgbigpO3QucHVzaChlKX1yZXR1cm4gdH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnByb21pc2VNYXBTZXJpYWw9dC5zZXJpYWw9dC5wcm9taXNlTWFwPXQucHJvbWlzaWZ5PXZvaWQgMCx0LnByb21pc2lmeT1mdW5jdGlvbihlKXtyZXR1cm4oLi4udCk9Pm5ldyBQcm9taXNlKCgobixpKT0+e2UoLi4udCwoKGUsdCk9PmU/aShlKTpuKHQpKSl9KSl9LHQucHJvbWlzZU1hcD1hc3luYyBmdW5jdGlvbihlLHQpe3JldHVybiBQcm9taXNlLmFsbChlLm1hcCh0KSl9LHQuc2VyaWFsPW4sdC5wcm9taXNlTWFwU2VyaWFsPWFzeW5jIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oZS5tYXAoKChlLG4saSk9PigpPT50KGUsbixpKSkpKX19LDMxMjc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnRvcGljUmVmTWFwPW5ldyBNYXB9aW5jUmVmQ291bnQoZSl7Y29uc3QgdD10aGlzLnRvcGljUmVmTWFwLmdldChlKTtsZXQgbjtpZih0KXtjb25zdCBpPXQrMTtuPWksdGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKX1lbHNlIHRoaXMudG9waWNSZWZNYXAuc2V0KGUsMSksbj0xO3JldHVybiBufWRlY1JlZkNvdW50KGUpe2NvbnN0IHQ9dGhpcy50b3BpY1JlZk1hcC5nZXQoZSk7bGV0IG47aWYodCl7Y29uc3QgaT10LTE7dGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKSxuPWl9ZWxzZSBuPS0xO3JldHVybiBufWFjdE9uRmlyc3QoZSx0LG4pe3JldHVybiAxPT09dGhpcy5pbmNSZWZDb3VudChlKT90KCk6bigpfWFjdE9uTGFzdChlLHQsbil7cmV0dXJuIDA9PT10aGlzLmRlY1JlZkNvdW50KGUpP3QoKTpuKCl9fX0sMjMwMDooZSx0KT0+e2Z1bmN0aW9uIG4oZSl7cmV0dXJuWy4uLmUuc3BsaXQoXCIuXCIpLnJldmVyc2UoKS5lbnRyaWVzKCldLnJlZHVjZSgoKGUsW3Qsbl0pPT5lKyArbioxZTQqKnQpLDApfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbihlKT49bih0KX1mdW5jdGlvbiByKGUpe3JldHVybiBlLnNwbGl0KFwiL1wiKVswXX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dC5wYXJzZVJ1bnRpbWVVdWlkPXQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dm9pZCAwLHQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249aSx0LnBhcnNlUnVudGltZVV1aWQ9cix0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShyKGUpLHQpfX0sNDk5OTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmFsaWRhdGVJZGVudGl0eT12b2lkIDAsdC52YWxpZGF0ZUlkZW50aXR5PWZ1bmN0aW9uKGUpe2xldCB0O3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS51dWlkfHwodD1cIk5vdCBhIHZhbGlkIGlkZW50aXR5IG9iamVjdFwiKSx0fX0sNjQ2NTplPT57dmFyIHQsbj1cIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdD9SZWZsZWN0Om51bGwsaT1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmFwcGx5P24uYXBwbHk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChlLHQsbil9O3Q9biYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5vd25LZXlzP24ub3duS2V5czpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP2Z1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKX07dmFyIHI9TnVtYmVyLmlzTmFOfHxmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZX07ZnVuY3Rpb24gbygpe28uaW5pdC5jYWxsKHRoaXMpfWUuZXhwb3J0cz1vLGUuZXhwb3J0cy5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLGkpe2Z1bmN0aW9uIHIobil7ZS5yZW1vdmVMaXN0ZW5lcih0LG8pLGkobil9ZnVuY3Rpb24gbygpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVtb3ZlTGlzdGVuZXImJmUucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLHIpLG4oW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKX15KGUsdCxvLHtvbmNlOiEwfSksXCJlcnJvclwiIT09dCYmZnVuY3Rpb24oZSx0LG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUub24mJnkoZSxcImVycm9yXCIsdCx7b25jZTohMH0pfShlLHIpfSkpfSxvLkV2ZW50RW1pdHRlcj1vLG8ucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLG8ucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLG8ucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBzPTEwO2Z1bmN0aW9uIGEoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX1mdW5jdGlvbiBjKGUpe3JldHVybiB2b2lkIDA9PT1lLl9tYXhMaXN0ZW5lcnM/by5kZWZhdWx0TWF4TGlzdGVuZXJzOmUuX21heExpc3RlbmVyc31mdW5jdGlvbiBkKGUsdCxuLGkpe3ZhciByLG8scyxkO2lmKGEobiksdm9pZCAwPT09KG89ZS5fZXZlbnRzKT8obz1lLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxlLl9ldmVudHNDb3VudD0wKToodm9pZCAwIT09by5uZXdMaXN0ZW5lciYmKGUuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksbz1lLl9ldmVudHMpLHM9b1t0XSksdm9pZCAwPT09cylzPW9bdF09biwrK2UuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcz9zPW9bdF09aT9bbixzXTpbcyxuXTppP3MudW5zaGlmdChuKTpzLnB1c2gobiksKHI9YyhlKSk+MCYmcy5sZW5ndGg+ciYmIXMud2FybmVkKXtzLndhcm5lZD0hMDt2YXIgaD1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK3MubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO2gubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGguZW1pdHRlcj1lLGgudHlwZT10LGguY291bnQ9cy5sZW5ndGgsZD1oLGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGQpfXJldHVybiBlfWZ1bmN0aW9uIGgoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDplLHR5cGU6dCxsaXN0ZW5lcjpufSxyPWguYmluZChpKTtyZXR1cm4gci5saXN0ZW5lcj1uLGkud3JhcEZuPXIscn1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgaT1lLl9ldmVudHM7aWYodm9pZCAwPT09aSlyZXR1cm5bXTt2YXIgcj1pW3RdO3JldHVybiB2b2lkIDA9PT1yP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIHI/bj9bci5saXN0ZW5lcnx8cl06W3JdOm4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7KytuKXRbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXTtyZXR1cm4gdH0ocik6dyhyLHIubGVuZ3RoKX1mdW5jdGlvbiBwKGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT10KXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gdyhlLHQpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCksaT0wO2k8dDsrK2kpbltpXT1lW2ldO3JldHVybiBufWZ1bmN0aW9uIHkoZSx0LG4saSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbilpLm9uY2U/ZS5vbmNlKHQsbik6ZS5vbih0LG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpO2UuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbiByKG8pe2kub25jZSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsciksbihvKX0pKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZTwwfHxyKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKTtzPWV9fSksby5pbml0PWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHMhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH0sby5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPDB8fHIoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2UrXCIuXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxvLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gYyh0aGlzKX0sby5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7dmFyIHI9XCJlcnJvclwiPT09ZSxvPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1vKXI9ciYmdm9pZCAwPT09by5lcnJvcjtlbHNlIGlmKCFyKXJldHVybiExO2lmKHIpe3ZhciBzO2lmKHQubGVuZ3RoPjAmJihzPXRbMF0pLHMgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBzO3ZhciBhPW5ldyBFcnJvcihcIlVuaGFuZGxlZCBlcnJvci5cIisocz9cIiAoXCIrcy5tZXNzYWdlK1wiKVwiOlwiXCIpKTt0aHJvdyBhLmNvbnRleHQ9cyxhfXZhciBjPW9bZV07aWYodm9pZCAwPT09YylyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKWkoYyx0aGlzLHQpO2Vsc2V7dmFyIGQ9Yy5sZW5ndGgsaD13KGMsZCk7Zm9yKG49MDtuPGQ7KytuKWkoaFtuXSx0aGlzLHQpfXJldHVybiEwfSxvLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBkKHRoaXMsZSx0LCExKX0sby5wcm90b3R5cGUub249by5wcm90b3R5cGUuYWRkTGlzdGVuZXIsby5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQodGhpcyxlLHQsITApfSxvLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5vbihlLGwodGhpcyxlLHQpKSx0aGlzfSxvLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5wcmVwZW5kTGlzdGVuZXIoZSxsKHRoaXMsZSx0KSksdGhpc30sby5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxzO2lmKGEodCksdm9pZCAwPT09KGk9dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT0obj1pW2VdKSlyZXR1cm4gdGhpcztpZihuPT09dHx8bi5saXN0ZW5lcj09PXQpMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTooZGVsZXRlIGlbZV0saS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLG4ubGlzdGVuZXJ8fHQpKTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pe2ZvcihyPS0xLG89bi5sZW5ndGgtMTtvPj0wO28tLSlpZihuW29dPT09dHx8bltvXS5saXN0ZW5lcj09PXQpe3M9bltvXS5saXN0ZW5lcixyPW87YnJlYWt9aWYocjwwKXJldHVybiB0aGlzOzA9PT1yP24uc2hpZnQoKTpmdW5jdGlvbihlLHQpe2Zvcig7dCsxPGUubGVuZ3RoO3QrKyllW3RdPWVbdCsxXTtlLnBvcCgpfShuLHIpLDE9PT1uLmxlbmd0aCYmKGlbZV09blswXSksdm9pZCAwIT09aS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHN8fHQpfXJldHVybiB0aGlzfSxvLnByb3RvdHlwZS5vZmY9by5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsby5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZih2b2lkIDA9PT0obj10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PW4ucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKTp2b2lkIDAhPT1uW2VdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTpkZWxldGUgbltlXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHIsbz1PYmplY3Qua2V5cyhuKTtmb3IoaT0wO2k8by5sZW5ndGg7KytpKVwicmVtb3ZlTGlzdGVuZXJcIiE9PShyPW9baV0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhyKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wLHRoaXN9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YodD1uW2VdKSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdCk7ZWxzZSBpZih2b2lkIDAhPT10KWZvcihpPXQubGVuZ3RoLTE7aT49MDtpLS0pdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHRbaV0pO3JldHVybiB0aGlzfSxvLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHUodGhpcyxlLCEwKX0sby5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiB1KHRoaXMsZSwhMSl9LG8ubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUubGlzdGVuZXJDb3VudD9lLmxpc3RlbmVyQ291bnQodCk6cC5jYWxsKGUsdCl9LG8ucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9cCxvLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/dCh0aGlzLl9ldmVudHMpOltdfX19LHQ9e307ZnVuY3Rpb24gbihpKXt2YXIgcj10W2ldO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgbz10W2ldPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmV4cG9ydHN9bi5kPShlLHQpPT57Zm9yKHZhciBpIGluIHQpbi5vKHQsaSkmJiFuLm8oZSxpKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6dFtpXX0pfSxuLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO3ZhciBpPXt9OygoKT0+e24uZChpLHtkcTooKT0+YSxNUzooKT0+cyx4UTooKT0+YyxzTzooKT0+ZmUsWnU6KCk9PmdlLEkzOigpPT5tZSwkVTooKT0+dmUsaTA6KCk9PkNlLGNYOigpPT5kLF9XOigpPT5oLFUkOigpPT53LFU3OigpPT55LHJkOigpPT5wZX0pO3ZhciBlLHQscixvPW4oMTY4MSk7Y2xhc3MgcyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGU9XCJBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZFwiLHQpe3ZhciBuO3N1cGVyKGUpLHQmJih0aGlzLmlubmVyRXJyb3I9dCYmdCksdGhpcy5zdGFjaz1udWxsPT09KG49dGhpcy5zdGFjayl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucmVwbGFjZSgvXihcXHcqRXJyb3IpLyxgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9fWNsYXNzIGEgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gZXhlY3V0ZSBhZGFwdGVyIGZ1bmN0aW9uXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgYyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byByYWlzZSBldmVudFwiLHQpe3N1cGVyKGUsdCl9fWNsYXNzIGQgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhZGFwdGVyXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgaCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkludmFsaWQgcGFyYW1ldGVyIHZhbHVlXCIsdCl7c3VwZXIoZSx0KX19IWZ1bmN0aW9uKGUpe2UuQWN0aXZhdGVXb3JrYm9vaz1cIkFjdGl2YXRlV29ya2Jvb2tcIixlLkFjdGl2YXRlV29ya3NoZWV0PVwiQWN0aXZhdGVXb3Jrc2hlZXRcIixlLkFkZFdvcmtzaGVldD1cIkFkZFdvcmtzaGVldFwiLGUuQ2FsY3VsYXRlV29ya2Jvb2s9XCJDYWxjdWxhdGVXb3JrYm9va1wiLGUuQ2FsY3VsYXRlV29ya3NoZWV0PVwiQ2FsY3VsYXRlV29ya3NoZWV0XCIsZS5DbGVhckFsbENlbGxzPVwiQ2xlYXJBbGxDZWxsc1wiLGUuQ2xlYXJBbGxDZWxsVmFsdWVzPVwiQ2xlYXJBbGxDZWxsVmFsdWVzXCIsZS5DbGVhckFsbENlbGxGb3JtYXR0aW5nPVwiQ2xlYXJBbGxDZWxsRm9ybWF0dGluZ1wiLGUuQ2xlYXJDZWxsVmFsdWVzPVwiQ2xlYXJDZWxsVmFsdWVzXCIsZS5DbGVhckNlbGxGb3JtYXR0aW5nPVwiQ2xlYXJDZWxsRm9ybWF0dGluZ1wiLGUuQ2xlYXJDZWxscz1cIkNsZWFyQ2VsbHNcIixlLkNsb3NlV29ya2Jvb2s9XCJDbG9zZVdvcmtib29rXCIsZS5DcmVhdGVXb3JrYm9vaz1cIkNyZWF0ZVdvcmtib29rXCIsZS5EZWxldGVXb3Jrc2hlZXQ9XCJEZWxldGVXb3Jrc2hlZXRcIixlLkRlcmVnaXN0ZXJFdmVudD1cIkRlcmVnaXN0ZXJFdmVudFwiLGUuRXZlbnRGaXJlZD1cIkV2ZW50RmlyZWRcIixlLkdldENhbGN1bGF0aW9uTW9kZT1cIkdldENhbGN1bGF0aW9uTW9kZVwiLGUuR2V0Q2VsbHM9XCJHZXRDZWxsc1wiLGUuR2V0V29ya2Jvb2tCeUlkPVwiR2V0V29ya2Jvb2tCeUlkXCIsZS5HZXRXb3JrYm9va05hbWU9XCJHZXRXb3JrYm9va05hbWVcIixlLkdldFdvcmtib29rcz1cIkdldFdvcmtib29rc1wiLGUuR2V0V29ya3NoZWV0QnlJZD1cIkdldFdvcmtzaGVldEJ5SWRcIixlLkdldFdvcmtzaGVldEJ5TmFtZT1cIkdldFdvcmtzaGVldEJ5TmFtZVwiLGUuR2V0V29ya3NoZWV0TmFtZT1cIkdldFdvcmtzaGVldE5hbWVcIixlLkdldFdvcmtzaGVldHM9XCJHZXRXb3Jrc2hlZXRzXCIsZS5Mb2dNZXNzYWdlPVwiTG9nTWVzc2FnZVwiLGUuT3Blbldvcmtib29rPVwiT3Blbldvcmtib29rXCIsZS5Qcm90ZWN0V29ya3NoZWV0PVwiUHJvdGVjdFdvcmtzaGVldFwiLGUuUmVnaXN0ZXJFdmVudD1cIlJlZ2lzdGVyRXZlbnRcIixlLlNhdmVXb3JrYm9vaz1cIlNhdmVXb3JrYm9va1wiLGUuU2F2ZVdvcmtib29rQXM9XCJTYXZlV29ya2Jvb2tBc1wiLGUuU2V0Q2VsbFZhbHVlcz1cIlNldENlbGxWYWx1ZXNcIixlLlNldENlbGxGb3JtYXR0aW5nPVwiU2V0Q2VsbEZvcm1hdHRpbmdcIixlLlNldENlbGxOYW1lPVwiU2V0Q2VsbE5hbWVcIixlLlNldFdvcmtzaGVldE5hbWU9XCJTZXRXb3Jrc2hlZXROYW1lXCIsZS5GaWx0ZXJDZWxscz1cIkZpbHRlckNlbGxzXCIsZS5RdWl0QXBwbGljYXRpb249XCJRdWl0QXBwbGljYXRpb25cIn0oZXx8KGU9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2YXRlPVwiQWN0aXZhdGVcIixlLkFkZFdvcmtzaGVldD1cIkFkZFdvcmtzaGVldFwiLGUuQ2hhbmdlPVwiQ2hhbmdlXCIsZS5DbG9zZT1cIkNsb3NlXCIsZS5EZWFjdGl2YXRlPVwiRGVhY3RpdmF0ZVwiLGUuRGVsZXRlV29ya3NoZWV0PVwiRGVsZXRlV29ya3NoZWV0XCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZS5Xb3JrYm9vaz1cIldvcmtib29rXCIsZS5Xb3Jrc2hlZXQ9XCJXb3Jrc2hlZXRcIn0ocnx8KHI9e30pKTtjb25zdCBsPVwiMS4zLjBcIjtsZXQgdT0hMTtjb25zdCBwPVwiW0BvcGVuZmluL2V4Y2VsXVwiLHc9KCk9Pnt1PSExfSx5PSgpPT57dT0hMCxnKFwidjEuMy4wXCIpfSxmPShlLHQpPT57dSYmKGUuaW5uZXJFcnJvcj9jb25zb2xlLmVycm9yKHQ/YCR7cH0gJHt0fWA6cCxlLFwiXFxuXFxuKGlubmVyKVwiLGUuaW5uZXJFcnJvcik6Y29uc29sZS5lcnJvcih0P2Ake3B9ICR7dH1gOnAsZSkpfSxnPSguLi5lKT0+e3UmJmNvbnNvbGUubG9nKHAsLi4uZSl9LG09KC4uLmUpPT57dSYmY29uc29sZS53YXJuKHAsLi4uZSl9O28uSHx8T2JqZWN0LmFzc2lnbih3aW5kb3cse2Zpbjp7fX0pLE9iamVjdC5hc3NpZ24oby5ILHtJbnRlZ3JhdGlvbnM6e0V4Y2VsOntlbmFibGVMb2dnaW5nOnksZGlzYWJsZUxvZ2dpbmc6d319fSk7Y29uc3Qgdj0oKT0+XCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csKGU9Pntjb25zdCB0PTE2Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4oXCJ4XCI9PT1lP3Q6MyZ0fDgpLnRvU3RyaW5nKDE2KX0pKSxDPW5ldyBNYXAsST0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQWN0aXZhdGUgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5BY3RpdmF0ZVdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LHg9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENhbGN1bGF0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNhbGN1bGF0ZVdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEE9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGFsbCBjZWxsIHZhbHVlcyAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQWxsQ2VsbFZhbHVlcyxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LGI9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGFsbCBjZWxsIGZvcm1hdHRpbmcgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckFsbENlbGxGb3JtYXR0aW5nLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sRT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQ2xlYXIgYWxsIGNlbGxzICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJBbGxDZWxscyxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LFA9KHQsbik9PmFzeW5jIGk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGNlbGwgdmFsdWVzOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgKTtjb25zdCByPXtjZWxsUmFuZ2U6aSxvYmplY3RJZDpufTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQ2VsbFZhbHVlcyxyKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LGs9KHQsbik9PmFzeW5jIGk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGNlbGwgZm9ybWF0dGluZzsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCk7Y29uc3Qgcj17Y2VsbFJhbmdlOmksb2JqZWN0SWQ6bn07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckNlbGxGb3JtYXR0aW5nLHIpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sTT0odCxuKT0+YXN5bmMgaT0+e2coYFdvcmtzaGVldDogQ2xlYXIgY2VsbHM7IGNlbGxSYW5nZToke2l9ICgke259KWApO2NvbnN0IHI9e2NlbGxSYW5nZTppLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJDZWxscyxyKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LF89KGUsdCk9PihuLGkscj0xZTMpPT57aWYoTnVtYmVyLmlzTmFOKHIpfHxyPD0wKXRocm93IG5ldyBzKFwiVXBkYXRlIGludGVydmFsIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7Y29uc3Qgbz12KCk7ZyhgV29ya3NoZWV0OiBDcmVhdGUgZGF0YSBzdHJlYW07IHN0cmVhbUlkOiR7b307IGNlbGxSYW5nZToke259OyB1cGRhdGVJbnRlcnZhbDoke3J9ICgke3R9KWApO2NvbnN0IGE9e2Nsb3NlOigpPT57ZyhgQ2xvc2VkIHN0cmVhbSAoJHtvfSlgKSwoZT0+e3ZhciB0O3RyeXtjb25zdCBuPUMuZ2V0KGUpO2lmKCFuKXRocm93IG5ldyBzKGBVbmFibGUgdG8gZmluZCByZWdpc3RlcmVkIGRhdGEgc3RyZWFtIHdpdGggaWQgJHtlfWApO3ZvaWQgMCE9PShudWxsIT09KHQ9bi50aW1lcikmJnZvaWQgMCE9PXQ/dDp2b2lkIDApJiZUKGUpLEMuZGVsZXRlKGUpfWNhdGNoKGUpe3Rocm93IGYoZSksZX19KShvKX0sY2VsbFJhbmdlOm4saWQ6byxzdGFydDooKT0+e2coYFN0YXJ0ZWQgc3RyZWFtaW5nICgke299KWApLEIobyxpLGUsdCl9LHN0b3A6KCk9PntnKGBTdG9wcGVkIHN0cmVhbWluZyAoJHtvfSlgKSxUKG8pfSx1cGRhdGVJbnRlcnZhbDpyLHdvcmtzaGVldElkOnR9O3JldHVybiBDLnNldChvLHtkYXRhU3RyZWFtOmF9KSxhfSxTPShlLHQsbixpKT0+e2NvbnN0IG89e2V2ZW50VGFyZ2V0OnIuV29ya3NoZWV0LG9iamVjdElkOnR9O3JldHVybntvYmplY3RJZDp0LGFjdGl2YXRlOkkoZSx0KSxhZGRFdmVudExpc3RlbmVyOm4oZSxvKSxjYWxjdWxhdGU6eChlLHQpLGNsZWFyQWxsQ2VsbEZvcm1hdHRpbmc6YihlLHQpLGNsZWFyQWxsQ2VsbHM6RShlLHQpLGNsZWFyQWxsQ2VsbFZhbHVlczpBKGUsdCksY2xlYXJDZWxsRm9ybWF0dGluZzprKGUsdCksY2xlYXJDZWxsczpNKGUsdCksY2xlYXJDZWxsVmFsdWVzOlAoZSx0KSxjcmVhdGVEYXRhU3RyZWFtOl8oZSx0KSxkZWxldGU6TyhlLHQpLGZpbHRlckNlbGxzOlcoZSx0KSxnZXRDZWxsczpGKGUsdCksZ2V0TmFtZTpMKGUsdCkscHJvdGVjdDpSKGUsdCkscmVtb3ZlRXZlbnRMaXN0ZW5lcjppKGUpLHNldENlbGxGb3JtYXR0aW5nOiQoZSx0KSxzZXRDZWxsTmFtZTpHKGUsdCksc2V0Q2VsbFZhbHVlczpqKGUsdCksc2V0TmFtZTpOKGUsdCl9fSxPPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBEZWxldGUgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5EZWxldGVXb3Jrc2hlZXQsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxXPSh0LG4pPT5hc3luYyhpLHIsbyxzLGMsZD0hMCk9PntnKGBXb3Jrc2hlZXQ6IEZpbHRlciBjZWxsczsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCx7Y29sdW1uSW5kZXg6cixmaWx0ZXJPcGVyYXRvcjpvLGNyaXRlcmlhMTpzLGNyaXRlcmlhMjpjLHZpc2libGVEcm9wRG93bjpkfSk7Y29uc3QgaD17Y2VsbFJhbmdlOmksY3JpdGVyaWExOnMsY3JpdGVyaWEyOmMsY29sdW1uSW5kZXg6cixmaWx0ZXJPcGVyYXRvcjpvLG9iamVjdElkOm4sdmlzaWJsZURyb3BEb3duOmR9O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuRmlsdGVyQ2VsbHMsaCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxGPSh0LG4pPT5hc3luYyBpPT57ZyhgV29ya3NoZWV0OiBHZXQgY2VsbHM7IGNlbGxSYW5nZToke2l9ICgke259KWApO2NvbnN0IHI9e2NlbGxSYW5nZTppLG9iamVjdElkOm59O2xldCBvPVtdO3RyeXtvPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRDZWxscyxyKSxnKGAke2l9OmAsbyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIG99LEw9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IEdldCBuYW1lICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldE5hbWUsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxSPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBQcm90ZWN0ICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuUHJvdGVjdFdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LCQ9KHQsbik9PmFzeW5jKGkscik9PntnKGBXb3Jrc2hlZXQ6IFNldCBjZWxsIGZvcm1hdHRpbmc7IGNlbGxSYW5nZToke2l9ICgke259KWAscik7Y29uc3Qgbz17Y2VsbFJhbmdlOmksZm9ybWF0dGluZzpyLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuU2V0Q2VsbEZvcm1hdHRpbmcsbyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxHPSh0LG4pPT5hc3luYyhpLHIpPT57Y29uc3Qgbz1yLnRyaW0oKTtsZXQgcztpZighbyl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIiksZihzKSxzO2lmKG8ubGVuZ3RoPjI1NSl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIG11c3QgYmUgMjU1IGNoYXJhY3RlcnMgb3IgbGVzc1wiKSxmKHMpLHM7aWYoL1teYS16MC05Xy4/XFxcXFwiJ10vLnRlc3QobykpdGhyb3cgcz1uZXcgaChcIkNlbGwgcmFuZ2UgbmFtZSBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnNcIiksZihzKSxzO2lmKC9eXFxkfFxcZCQvLnRlc3QobykpdGhyb3cgcz1uZXcgaChcIkNlbGwgcmFuZ2UgbmFtZSBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBhIG51bWJlclwiKSxmKHMpLHM7ZyhgV29ya3NoZWV0OiBTZXQgY2VsbCBuYW1lOyBjZWxsUmFuZ2U6JHtpfTsgbmV3Q2VsbFJhbmdlTmFtZToke299ICgke259KWApO2NvbnN0IGM9e2NlbGxSYW5nZTppLG5hbWU6byxvYmplY3RJZDpufTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLlNldENlbGxOYW1lLGMpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0saj0odCxuKT0+YXN5bmMoaSxyKT0+e2coYFdvcmtzaGVldDogU2V0IGNlbGwgdmFsdWVzOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgLHIpO2NvbnN0IG89e2NlbGxSYW5nZTppLG9iamVjdElkOm4sdmFsdWVzTWFwOnJ9O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuU2V0Q2VsbFZhbHVlcyxvKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LE49KHQsbik9PmFzeW5jIGk9Pntjb25zdCByPWkudHJpbSgpO2xldCBvO2lmKCFyKXRocm93IG89bmV3IGgoXCJXb3Jrc2hlZXQgbmFtZSBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nXCIpLGYobyksbztpZihyLmxlbmd0aD4zMSl0aHJvdyBvPW5ldyBoKFwiV29ya3NoZWV0IG5hbWUgbXVzdCBiZSAzMSBjaGFyYWN0ZXJzIG9yIGxlc3NcIiksZihvKSxvO2coYFdvcmtzaGVldDogU2V0IG5hbWU7IG5ld1dvcmtzaGVldE5hbWU6JHtyfSAoJHtufSlgKTtjb25zdCBzPXtuZXdXb3Jrc2hlZXROYW1lOnIsb2JqZWN0SWQ6bn07dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuU2V0V29ya3NoZWV0TmFtZSxzKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEI9KGUsdCxuLGkpPT57dmFyIHI7dHJ5e2NvbnN0IG89Qy5nZXQoZSk7aWYoIW8pdGhyb3cgbmV3IHMoYFVuYWJsZSB0byBmaW5kIHJlZ2lzdGVyZWQgZGF0YSBzdHJlYW0gd2l0aCBpZCAke2V9YCk7dm9pZCAwIT09KG51bGwhPT0ocj1vLnRpbWVyKSYmdm9pZCAwIT09cj9yOnZvaWQgMCkmJlQoZSk7Y29uc3R7Y2VsbFJhbmdlOmEsdXBkYXRlSW50ZXJ2YWw6Y309by5kYXRhU3RyZWFtLGQ9YXN5bmMoKT0+e2NvbnN0IHI9YXdhaXQgdCgpO3RyeXthd2FpdCBqKG4saSkoYSxbW3JdXSl9Y2F0Y2godCl7bShgVW5hYmxlIHRvIHVwZGF0ZSBjZWxsIHJhbmdlIGZvciBzdHJlYW0gd2l0aCBpZCAke2V9OiAke251bGw9PXQ/dm9pZCAwOnQubWVzc2FnZX1gKX19LGg9d2luZG93LnNldEludGVydmFsKGQsYyk7by50aW1lcj1ofWNhdGNoKGUpe3Rocm93IGYoZSksZX19LFQ9ZT0+e3ZhciB0O3RyeXtjb25zdCBuPUMuZ2V0KGUpO2lmKCFuKXRocm93IG5ldyBzKGBVbmFibGUgdG8gZmluZCByZWdpc3RlcmVkIGRhdGEgc3RyZWFtIHdpdGggaWQgJHtlfWApO2lmKHZvaWQgMD09PShudWxsIT09KHQ9bi50aW1lcikmJnZvaWQgMCE9PXQ/dDp2b2lkIDApKXJldHVybjt3aW5kb3cuY2xlYXJJbnRlcnZhbChuLnRpbWVyKSxuLnRpbWVyPXZvaWQgMH1jYXRjaChlKXt0aHJvdyBmKGUpLGV9fSxEPW5ldyBNYXAsVj0obixpKT0+YXN5bmMocixvKT0+e2lmKCFpfHwhaS5ldmVudFRhcmdldHx8IWkub2JqZWN0SWQpe2NvbnN0IGU9bmV3IGMoXCJFdmVudCByZWdpc3RyYXRpb24gbWlzc2luZyByZXF1aXJlZCB2YWx1ZXNcIik7dGhyb3cgZihlKSxlfWNvbnN0IHM9T2JqZWN0LmtleXModCkuZmluZCgoZT0+ZS50b0xvd2VyQ2FzZSgpPT09ci50b0xvd2VyQ2FzZSgpKSk7aWYoIXMpe2NvbnN0IGU9bmV3IGMoYFVuc3VwcG9ydGVkIGV2ZW50IG5hbWU6ICR7cn1gKTt0aHJvdyBmKGUpLGV9aS5ldmVudE5hbWU9dFtzXSxnKFwiUmVnaXN0ZXJpbmcgZXZlbnRcIixpKTt0cnl7Y29uc3QgdD1hd2FpdCBuLmRpc3BhdGNoKGUuUmVnaXN0ZXJFdmVudCxpKTtELnNldCh0LG8pfWNhdGNoKGUpe3Rocm93IG5ldyBhKHZvaWQgMCxlKX19LEg9dD0+YXN5bmMgbj0+e2xldCBpO2Zvcihjb25zdFtlLHRdb2YgRClpZih0PT09bil7aT1lO2JyZWFrfWlmKCFpKXRocm93IG5ldyBjO2coXCJEZXJlZ2lzdGVyaW5nIGV2ZW50OlwiLGkpO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuRGVyZWdpc3RlckV2ZW50LGkpLEQuZGVsZXRlKGkpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sVT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBBY3RpdmF0ZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5BY3RpdmF0ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sej0odCxuLGkscik9PmFzeW5jKCk9PntsZXQgbztnKGBXb3JrYm9vazogQWRkIHdvcmtzaGVldCAoJHtufSlgKTt0cnl7bz1hd2FpdCB0LmRpc3BhdGNoKGUuQWRkV29ya3NoZWV0LG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBTKHQsbyxpLHIpfSxxPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IENhbGN1bGF0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNhbGN1bGF0ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sSj0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBDbG9zZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5DbG9zZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sSz0oZSx0LG4saSk9Pntjb25zdCBvPXtldmVudFRhcmdldDpyLldvcmtib29rLG9iamVjdElkOnR9O3JldHVybntvYmplY3RJZDp0LGFjdGl2YXRlOlUoZSx0KSxhZGRXb3Jrc2hlZXQ6eihlLHQsbixpKSxhZGRFdmVudExpc3RlbmVyOm4oZSxvKSxjYWxjdWxhdGU6cShlLHQpLGNsb3NlOkooZSx0KSxnZXRDYWxjdWxhdGlvbk1vZGU6WShlLHQpLGdldE5hbWU6UShlLHQpLGdldFdvcmtzaGVldEJ5TmFtZTpaKGUsdCxuLGkpLGdldFdvcmtzaGVldHM6WChlLHQsbixpKSxyZW1vdmVFdmVudExpc3RlbmVyOmkoZSksc2F2ZTplZShlLHQpLHNhdmVBczp0ZShlLHQpfX0sWT0odCxuKT0+YXN5bmMoKT0+e2coXCJXb3JrYm9vazogR2V0IGNhbGN1bGF0aW9uIG1vZGVcIik7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuR2V0Q2FsY3VsYXRpb25Nb2RlLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sUT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBHZXQgbmFtZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3JrYm9va05hbWUsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxaPSh0LG4saSxyKT0+YXN5bmMgbz0+e2xldCBzO2coYFdvcmtib29rOiBHZXQgd29ya3NoZWV0IGJ5IG5hbWU6ICR7b30gKCR7bn0pYCk7dHJ5e2lmKHM9YXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldEJ5TmFtZSx7b2JqZWN0SWQ6bix3b3Jrc2hlZXROYW1lOm99KSxudWxsPT09cylyZXR1cm4gbnVsbH1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gUyh0LHMsaSxyKX0sWD0odCxuLGkscik9PmFzeW5jKCk9PntsZXQgbztnKGBXb3JrYm9vazogR2V0IHdvcmtzaGVldHMgKCR7bn0pYCk7dHJ5e289YXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldHMsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIG8ubWFwKChlPT5TKHQsZSxpLHIpKSl9LGVlPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IFNhdmUgKCR7bn0pYCk7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuU2F2ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sdGU9KHQsbik9PmFzeW5jIGk9PntnKGBXb3JrYm9vazogU2F2ZSBhczsgZmlsZVBhdGg6JHtpfSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5TYXZlV29ya2Jvb2tBcyx7ZmlsZVBhdGg6aSxvYmplY3RJZDpufSl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxuZT10PT5hc3luYygpPT57bGV0IG47ZyhcIkFwcGxpY2F0aW9uOiBDcmVhdGUgd29ya2Jvb2tcIik7dHJ5e249YXdhaXQgdC5kaXNwYXRjaChlLkNyZWF0ZVdvcmtib29rKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gSyh0LG4sVixIKX0saWU9dD0+YXN5bmMgbj0+e2xldCBpO2coYEFwcGxpY2F0aW9uOiBHZXQgd29ya2Jvb2s7IGlkOiR7bn1gKTt0cnl7aT1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya2Jvb2tCeUlkLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBLKHQsaSxWLEgpfSxyZT10PT5hc3luYygpPT57bGV0IG47ZyhcIkFwcGxpY2F0aW9uOiBHZXQgd29ya2Jvb2tzXCIpO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3JrYm9va3MpfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBuLm1hcCgoZT0+Syh0LGUsVixIKSkpfSxvZT10PT5hc3luYyBuPT57ZyhgQXBwbGljYXRpb246IEdldCB3b3Jrc2hlZXQ7IGlkOiR7bn1gKTt0cnl7bj1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya3NoZWV0QnlJZCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gUyh0LG4sVixIKX0sc2U9dD0+YXN5bmMgbj0+e2xldCBpO2coYEFwcGxpY2F0aW9uOiBPcGVuIHdvcmtib29rOyBmaWxlUGF0aDoke259YCk7dHJ5e2k9YXdhaXQgdC5kaXNwYXRjaChlLk9wZW5Xb3JrYm9vayxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gSyh0LGksVixIKX0sYWU9dD0+YXN5bmMobj0hMCk9PntnKGBBcHBsaWNhdGlvbjogUXVpdDsgZGlzcGxheUFsZXJ0czoke259YCk7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuUXVpdEFwcGxpY2F0aW9uLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX07dmFyIGNlOyFmdW5jdGlvbihlKXtlW2UuSW5mbz0xXT1cIkluZm9cIixlW2UuV2Fybj0yXT1cIldhcm5cIixlW2UuRXJyb3I9M109XCJFcnJvclwifShjZXx8KGNlPXt9KSk7Y29uc3QgZGU9XCJleGNlbC1hZGFwdGVyXCIsaGU9digpO2xldCBsZSx1ZTtjb25zdCBwZT1hc3luYygpPT57dHJ5e2lmKCFsZXx8IWF3YWl0KGFzeW5jIGU9Pihhd2FpdCBvLkguSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmdldEFsbENoYW5uZWxzKCkpLnNvbWUoKHQ9PnQuY2hhbm5lbE5hbWU9PT1lKSkpKGhlKSl7YXdhaXQoYXN5bmMoKT0+e3ZhciBlO2NvbnN0IHQ9bnVsbD09PShlPShhd2FpdCBvLkguQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRNYW5pZmVzdCgpKS5hcHBBc3NldHMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmZpbmQoKGU9PmUuYWxpYXM9PT1kZSkpO2lmKHQpcmV0dXJuIHZvaWQgbShcIkRldGVjdGVkIGFkYXB0ZXIgcGFja2FnZSBpbiBhcHAgbWFuaWZlc3QgYXBwQXNzZXRzXCIsdCk7aWYoYXdhaXQgeWUoKSlyZXR1cm4gdm9pZCBnKFwiVXNpbmcgZXhpc3RpbmcgYWRhcHRlciBwYWNrYWdlXCIpO2NvbnN0IG49e2FsaWFzOmRlLHNyYzpcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vcmVsZWFzZS9pbnRlZ3JhdGlvbnMvZXhjZWwvMS4zLjAvT3BlbkZpbi5FeGNlbC56aXBcIix0YXJnZXQ6XCJPcGVuRmluLkV4Y2VsLmV4ZVwiLHZlcnNpb246bH07ZyhcIkRvd25sb2FkaW5nIGFkYXB0ZXIgcGFja2FnZVwiLG4pO3RyeXthd2FpdCBvLkguU3lzdGVtLmRvd25sb2FkQXNzZXQobiwoKCk9Pnt9KSl9Y2F0Y2goZSl7dGhyb3cgZihcIlVuYWJsZSB0byBkb3dubG9hZCBhZGFwdGVyIHBhY2thZ2VcIiksZX19KSgpO2NvbnN0IGU9YXdhaXQgby5ILlN5c3RlbS5nZXRSdW50aW1lSW5mbygpLHQ9by5ILkFwcGxpY2F0aW9uLm1lLnV1aWQsbj1lLnZlcnNpb24saT1lLnNlY3VyaXR5UmVhbG07ZyhcIkluaXRpYWxpemluZyBhZGFwdGVyXCIse2FwcElkOnQsY2hhbm5lbE5hbWU6aGUscnVudGltZVZlcnNpb246bixzZWN1cml0eVJlYWxtOml9KSxsZT1hd2FpdCBvLkguU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzcyh7YWxpYXM6ZGUsYXJndW1lbnRzOmAke3R9ICR7bn0gJHtpfSAke2hlfWB9KSxnKGBBZGFwdGVyIHJ1bm5pbmcgd2l0aCB1dWlkICR7bGUudXVpZH1gKX1jb25zdCBpPW8uSC5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChoZSx7cGF5bG9hZDp7dmVyc2lvbjpsfX0pLHM9bmV3IFByb21pc2UoKGU9PntzZXRUaW1lb3V0KGUsMmU0KX0pKS50aGVuKCgoKT0+e3Rocm93IG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gdG8gYWRhcHRlciB0aW1lZCBvdXRcIil9KSk7dWU9YXdhaXQgUHJvbWlzZS5yYWNlKFtpLHNdKSxnKGBDb25uZWN0ZWQgdG8gYWRhcHRlciBvbiBjaGFubmVsICR7aGV9YCksdWUucmVnaXN0ZXIoZS5Mb2dNZXNzYWdlLHdlKSx1ZS5yZWdpc3RlcihlLkV2ZW50RmlyZWQsKG49dWUsZT0+e2NvbnN0e2V2ZW50UmVnaXN0cmF0aW9uSWQ6aX09ZSxvPUQuZ2V0KGkpO2lmKCFvKXRocm93IG5ldyBjKGBObyByZWdpc3RlcmVkIGV2ZW50IGxpc3RlbmVyIGZvdW5kIGZvciBpZDogJHtpfWApO2coXCJFdmVudCBwYXlsb2FkIHJlY2VpdmVkXCIsZSksKChlLG4saSk9Pnt2YXIgbyxzO3N3aXRjaChpLmV2ZW50VGFyZ2V0KXtjYXNlIHIuV29ya2Jvb2s6c3dpdGNoKG51bGw9PT0obz1pLmV2ZW50TmFtZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9VcHBlckNhc2UoKSl7Y2FzZSB0LkFjdGl2YXRlLnRvVXBwZXJDYXNlKCk6Y2FzZSB0LkNsb3NlLnRvVXBwZXJDYXNlKCk6Y2FzZSB0LkRlYWN0aXZhdGUudG9VcHBlckNhc2UoKTpyZXR1cm4gZSgpO2Nhc2UgdC5BZGRXb3Jrc2hlZXQudG9VcHBlckNhc2UoKTpjYXNlIHQuRGVsZXRlV29ya3NoZWV0LnRvVXBwZXJDYXNlKCk6cmV0dXJuIGUoUyhuLGkud29ya3NoZWV0T2JqZWN0SWQsVixIKSk7ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCB3b3JrYm9vayBldmVudDogJHtpLmV2ZW50TmFtZX1gKX1jYXNlIHIuV29ya3NoZWV0OnN3aXRjaChudWxsPT09KHM9aS5ldmVudE5hbWUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpe2Nhc2UgdC5BY3RpdmF0ZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKCk7Y2FzZSB0LkNoYW5nZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKGkuY2hhbmdlZENlbGxzKTtjYXNlIHQuRGVhY3RpdmF0ZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKCk7ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCB3b3Jrc2hlZXQgZXZlbnQ6ICR7aS5ldmVudE5hbWV9YCl9ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCBldmVudCB0YXJnZXQ6ICR7aS5ldmVudFRhcmdldH1gKX19KShvLG4sZSl9KSl9Y2F0Y2goZSl7Y29uc3QgdD1uZXcgZCh2b2lkIDAsZSk7dGhyb3cgZih0KSx0fXZhciBuO3JldHVybnthZGFwdGVyOntjaGFubmVsTmFtZTpoZSx2ZXJzaW9uOmx9LGNyZWF0ZVdvcmtib29rOm5lKHVlKSxnZXRXb3JrYm9va0J5SWQ6aWUodWUpLGdldFdvcmtib29rczpyZSh1ZSksZ2V0V29ya3NoZWV0QnlJZDpvZSh1ZSksb3Blbldvcmtib29rOnNlKHVlKSxxdWl0OmFlKHVlKX19LHdlPWU9Pntjb25zdHttZXNzYWdlOnQsdHlwZTpufT1lLGk9XCJbYWRhcHRlcl1cIjtzd2l0Y2gobil7Y2FzZSBjZS5FcnJvcjpmKHQsaSk7YnJlYWs7Y2FzZSBjZS5JbmZvOmcoaSx0KTticmVhaztjYXNlIGNlLldhcm46bShpLHQpfX0seWU9YXN5bmMoKT0+e3RyeXtjb25zdCBlPWF3YWl0IG8uSC5TeXN0ZW0uZ2V0QXBwQXNzZXRJbmZvKHthbGlhczpkZX0pO3JldHVybiBlJiZlLnZlcnNpb249PT1sfWNhdGNoKGUpe3JldHVybiExfX07dmFyIGZlLGdlLG1lLHZlLENlOyFmdW5jdGlvbihlKXtlLkNvbnRpbnVvdXM9XCJDb250aW51b3VzXCIsZS5EYXNoPVwiRGFzaFwiLGUuRGFzaERvdD1cIkRhc2hEb3RcIixlLkRhc2hEb3REb3Q9XCJEYXNoRG90RG90XCIsZS5Eb3Q9XCJEb3RcIixlLkRvdWJsZT1cIkRvdWJsZVwiLGUuU2xhbnREYXNoRG90PVwiU2xhbnREYXNoRG90XCIsZS5Ob25lPVwiTm9uZVwifShmZXx8KGZlPXt9KSksZnVuY3Rpb24oZSl7ZS5DZW50ZXI9XCJDZW50ZXJcIixlLkNlbnRlckFjcm9zc1NlbGVjdGlvbj1cIkNlbnRlckFjcm9zc1NlbGVjdGlvblwiLGUuRGlzdHJpYnV0ZWQ9XCJEaXN0cmlidXRlZFwiLGUuRmlsbD1cIkZpbGxcIixlLkdlbmVyYWw9XCJHZW5lcmFsXCIsZS5KdXN0aWZ5PVwiSnVzdGlmeVwiLGUuTGVmdD1cIkxlZnRcIixlLlJpZ2h0PVwiUmlnaHRcIn0oZ2V8fChnZT17fSkpLGZ1bmN0aW9uKGUpe2UuQXV0b21hdGljPVwiQXV0b21hdGljXCIsZS5DaGVja2VyPVwiQ2hlY2tlclwiLGUuQ3Jpc3NDcm9zcz1cIkNyaXNzQ3Jvc3NcIixlLkRvd249XCJEb3duXCIsZS5HcmF5MTY9XCJHcmF5MTZcIixlLkdyYXkyNT1cIkdyYXkyNVwiLGUuR3JheTUwPVwiR3JheTUwXCIsZS5HcmF5NzU9XCJHcmF5NzVcIixlLkdyYXk4PVwiR3JheThcIixlLkdyaWQ9XCJHcmlkXCIsZS5Ib3Jpem9udGFsPVwiSG9yaXpvbnRhbFwiLGUuTGlnaHREb3duPVwiTGlnaHREb3duXCIsZS5MaWdodEhvcml6b250YWw9XCJMaWdodEhvcml6b250YWxcIixlLkxpZ2h0VXA9XCJMaWdodFVwXCIsZS5MaWdodFZlcnRpY2FsPVwiTGlnaHRWZXJ0aWNhbFwiLGUuTGluZWFyR3JhZGllbnQ9XCJMaW5lYXJHcmFkaWVudFwiLGUuTm9uZT1cIk5vbmVcIixlLlJlY3Rhbmd1bGFyR3JhZGllbnQ9XCJSZWN0YW5ndWxhckdyYWRpZW50XCIsZS5TZW1pR3JheTc1PVwiU2VtaUdyYXk3NVwiLGUuU29saWQ9XCJTb2xpZFwiLGUuVXA9XCJVcFwiLGUuVmVydGljYWw9XCJWZXJ0aWNhbFwifShtZXx8KG1lPXt9KSksZnVuY3Rpb24oZSl7ZS5Cb3R0b209XCJCb3R0b21cIixlLkNlbnRlcj1cIkNlbnRlclwiLGUuRGlzdHJpYnV0ZWQ9XCJEaXN0cmlidXRlZFwiLGUuSnVzdGlmeT1cIkp1c3RpZnlcIixlLlRvcD1cIlRvcFwifSh2ZXx8KHZlPXt9KSksZnVuY3Rpb24oZSl7ZS5BbmQ9XCJBbmRcIixlLk9yPVwiT3JcIixlLlRvcDEwSXRlbXM9XCJUb3AxMEl0ZW1zXCIsZS5Cb3R0b20xMEl0ZW1zPVwiQm90dG9tMTBJdGVtc1wiLGUuVG9wMTBQZXJjZW50PVwiVG9wMTBQZXJjZW50XCIsZS5Cb3R0b20xMFBlcmNlbnQ9XCJCb3R0b20xMFBlcmNlbnRcIixlLkZpbHRlclZhbHVlcz1cIkZpbHRlclZhbHVlc1wifShDZXx8KENlPXt9KSl9KSgpO3ZhciByPWkuZHEsbz1pLk1TLHM9aS54USxhPWkuc08sYz1pLlp1LGQ9aS5JMyxoPWkuJFUsbD1pLmkwLHU9aS5jWCxwPWkuX1csdz1pLlUkLHk9aS5VNyxmPWkucmQ7ZXhwb3J0e3IgYXMgQWRhcHRlckVycm9yLG8gYXMgQXBpRXJyb3IscyBhcyBFdmVudEVycm9yLGEgYXMgRXhjZWxDZWxsQm9yZGVyTGluZVN0eWxlLGMgYXMgRXhjZWxDZWxsSG9yaXpvbnRhbEFsaWdubWVudCxkIGFzIEV4Y2VsQ2VsbFBhdHRlcm4saCBhcyBFeGNlbENlbGxWZXJ0aWNhbEFsaWdubWVudCxsIGFzIEV4Y2VsRmlsdGVyT3BlcmF0b3IsdSBhcyBJbml0aWFsaXphdGlvbkVycm9yLHAgYXMgUGFyYW1ldGVyRXJyb3IsdyBhcyBkaXNhYmxlTG9nZ2luZyx5IGFzIGVuYWJsZUxvZ2dpbmcsZiBhcyBnZXRFeGNlbEFwcGxpY2F0aW9ufTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IGdldEN1cnJlbnRDaGFubmVsIH0gZnJvbSBcIkBmaW5vcy9mZGMzXCI7XG5pbXBvcnQgeyBDZWxsLCBFeGNlbEFwcGxpY2F0aW9uLCBFeGNlbFdvcmtib29rLCBFeGNlbFdvcmtzaGVldCwgZ2V0RXhjZWxBcHBsaWNhdGlvbiB9IGZyb20gXCJAb3BlbmZpbi9leGNlbFwiO1xuXG5jb25zdCBLTk9XTl9JTlNUUlVNRU5UUyA9IFtcIlRTTEFcIiwgXCJNU0ZUXCIsIFwiQUFQTFwiXTtcblxubGV0IGV4Y2VsOiBFeGNlbEFwcGxpY2F0aW9uIHwgdW5kZWZpbmVkO1xubGV0IG9wZW5Xb3JrYm9va3M6XG5cdHwge1xuXHRcdFx0Ym9vazogRXhjZWxXb3JrYm9vaztcblx0XHRcdG5hbWU6IHN0cmluZztcblx0ICB9W11cblx0fCB1bmRlZmluZWQ7XG5sZXQgc2VsZWN0ZWRXb3JrYm9va0luZGV4OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5sZXQgb3BlbldvcmtzaGVldHM6XG5cdHwge1xuXHRcdFx0c2hlZXQ6IEV4Y2VsV29ya3NoZWV0O1xuXHRcdFx0bmFtZTogc3RyaW5nO1xuXHQgIH1bXVxuXHR8IHVuZGVmaW5lZDtcbmxldCBzZWxlY3RlZFdvcmtzaGVldEluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGFzeW5jICgpID0+IHtcblx0dHJ5IHtcblx0XHRhd2FpdCBpbml0KCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdH1cbn0pO1xuXG5hc3luYyBmdW5jdGlvbiBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIiNyZXN1bHRzLWNvbnRhaW5lclwiKTtcblx0XHRyZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdGV4Y2VsID0gYXdhaXQgZ2V0RXhjZWxBcHBsaWNhdGlvbigpO1xuXG5cdFx0YXdhaXQgcG9wdWxhdGVXb3JrYm9va3MoKTtcblxuXHRcdGNvbnN0IG9wZW5FeGNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3Blbi1leGNlbFwiKTtcblx0XHRvcGVuRXhjZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IG9wZW5FeGNlbCgpO1xuXHRcdH0pO1xuXG5cdFx0Y29uc3QgcmVmcmVzaFdvcmtib29rQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3b3JrYm9vay1yZWZyZXNoXCIpO1xuXHRcdHJlZnJlc2hXb3JrYm9va0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4gcG9wdWxhdGVXb3JrYm9va3MoKSk7XG5cblx0XHRjb25zdCByZWZyZXNoV29ya3NoZWV0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3b3Jrc2hlZXQtcmVmcmVzaFwiKTtcblx0XHRyZWZyZXNoV29ya3NoZWV0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiBwb3B1bGF0ZVdvcmtzaGVldHMoKSk7XG5cblx0XHRjb25zdCBvcGVuV29ya2Jvb2tzU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3b3JrYm9va3NcIik7XG5cdFx0b3Blbldvcmtib29rc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGFzeW5jIChlKSA9PlxuXHRcdFx0c2VsZWN0V29ya2Jvb2soKGUudGFyZ2V0IGFzIHVua25vd24gYXMgeyB2YWx1ZTogc3RyaW5nIH0pLnZhbHVlKVxuXHRcdCk7XG5cblx0XHRjb25zdCBvcGVuV29ya3NoZWV0c1NlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd29ya3NoZWV0c1wiKTtcblx0XHRvcGVuV29ya3NoZWV0c1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGFzeW5jIChlKSA9PlxuXHRcdFx0c2VsZWN0V29ya3NoZWV0KChlLnRhcmdldCBhcyB1bmtub3duIGFzIHsgdmFsdWU6IHN0cmluZyB9KS52YWx1ZSlcblx0XHQpO1xuXG5cdFx0Y29uc3Qgc2V0VmFsdWVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NldC12YWx1ZVwiKTtcblx0XHRzZXRWYWx1ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgc2V0Q2VsbFZhbHVlKCk7XG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHNob3dFcnJvcihlcnIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNob3dFcnJvcihlcnIpIHtcblx0Y29uc3QgZXJyRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlcnJvclwiKTtcblx0ZXJyRG9tLmlubmVySFRNTCA9IGVyci5tZXNzYWdlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvcGVuRXhjZWwoKTogUHJvbWlzZTx2b2lkPiB7XG5cdHRyeSB7XG5cdFx0Ly8gT3BlbiB0aGUgc2VsZWN0IHdvcmsgYm9vayBhbmQgc2hlZXRcblx0XHQvLyBpZiBhbnl0aGluZyB0aHJvd3MgYW4gZXhjZXB0aW9uIGp1c3Qgb3BlbiBhIG5ldyB3b3JrYm9va1xuXHRcdGF3YWl0IHNlbGVjdFdvcmtib29rKG9wZW5Xb3JrYm9va3Nbc2VsZWN0ZWRXb3JrYm9va0luZGV4XS5uYW1lKTtcblx0XHRhd2FpdCBzZWxlY3RXb3Jrc2hlZXQob3BlbldvcmtzaGVldHNbc2VsZWN0ZWRXb3Jrc2hlZXRJbmRleF0ubmFtZSk7XG5cdH0gY2F0Y2gge1xuXHRcdGF3YWl0IGV4Y2VsLmNyZWF0ZVdvcmtib29rKCk7XG5cdFx0YXdhaXQgcG9wdWxhdGVXb3JrYm9va3MoKTtcblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBwb3B1bGF0ZVdvcmtib29rcygpOiBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKGV4Y2VsKSB7XG5cdFx0c2VsZWN0ZWRXb3JrYm9va0luZGV4ID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IHJlZnJlc2hCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3b3JrYm9vay1yZWZyZXNoXCIpO1xuXHRcdHJlZnJlc2hCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXG5cdFx0Y29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MU2VsZWN0RWxlbWVudD4oXCIjd29ya2Jvb2tzXCIpO1xuXHRcdHNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cdFx0c2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XG5cblx0XHRvcGVuV29ya2Jvb2tzID0gW107XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgd29ya2Jvb2tzID0gYXdhaXQgZXhjZWwuZ2V0V29ya2Jvb2tzKCk7XG5cblx0XHRcdGZvciAoY29uc3QgYm9vayBvZiB3b3JrYm9va3MpIHtcblx0XHRcdFx0Y29uc3QgbmFtZSA9IGF3YWl0IGJvb2suZ2V0TmFtZSgpO1xuXHRcdFx0XHRvcGVuV29ya2Jvb2tzLnB1c2goe1xuXHRcdFx0XHRcdGJvb2ssXG5cdFx0XHRcdFx0bmFtZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgb3B0aW9uRW1wdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXHRcdFx0b3B0aW9uRW1wdHkuaW5uZXJIVE1MID0gXCItLS0tU2VsZWN0IHdvcmtib29rLS0tLVwiO1xuXHRcdFx0b3B0aW9uRW1wdHkudmFsdWUgPSBcIlwiO1xuXHRcdFx0b3B0aW9uRW1wdHkuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0b3B0aW9uRW1wdHkuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0c2VsZWN0LmFwcGVuZChvcHRpb25FbXB0eSk7XG5cblx0XHRcdGZvciAoY29uc3Qgb3Blbldvcmtib29rIG9mIG9wZW5Xb3JrYm9va3MpIHtcblx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblx0XHRcdFx0b3B0aW9uLmlubmVySFRNTCA9IG9wZW5Xb3JrYm9vay5uYW1lO1xuXHRcdFx0XHRvcHRpb24udmFsdWUgPSBvcGVuV29ya2Jvb2submFtZTtcblx0XHRcdFx0c2VsZWN0LmFwcGVuZChvcHRpb24pO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0c2hvd0Vycm9yKGVycik7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHNlbGVjdC5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0cmVmcmVzaEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdH1cblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWxlY3RXb3JrYm9vayhuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgbmV3V29ya2Jvb2tJbmRleCA9IG9wZW5Xb3JrYm9va3MuZmluZEluZGV4KCh3KSA9PiB3Lm5hbWUgPT09IG5hbWUpO1xuXG5cdGlmIChuZXdXb3JrYm9va0luZGV4ICE9PSBzZWxlY3RlZFdvcmtib29rSW5kZXgpIHtcblx0XHRzZWxlY3RlZFdvcmtib29rSW5kZXggPSBuZXdXb3JrYm9va0luZGV4O1xuXHRcdGlmIChuZXdXb3JrYm9va0luZGV4ID49IDApIHtcblx0XHRcdGF3YWl0IG9wZW5Xb3JrYm9va3Nbc2VsZWN0ZWRXb3JrYm9va0luZGV4XS5ib29rLmFjdGl2YXRlKCk7XG5cdFx0fVxuXHR9XG5cblx0YXdhaXQgcG9wdWxhdGVXb3Jrc2hlZXRzKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBvcHVsYXRlV29ya3NoZWV0cygpOiBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKGV4Y2VsKSB7XG5cdFx0c2VsZWN0ZWRXb3Jrc2hlZXRJbmRleCA9IHVuZGVmaW5lZDtcblx0XHRjb25zdCByZWZyZXNoQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd29ya3NoZWV0LXJlZnJlc2hcIik7XG5cdFx0cmVmcmVzaEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cblx0XHRjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcIiN3b3Jrc2hlZXRzXCIpO1xuXHRcdHNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cdFx0c2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XG5cblx0XHRvcGVuV29ya3NoZWV0cyA9IFtdO1xuXG5cdFx0Y29uc3Qgd29ya2Jvb2sgPSBvcGVuV29ya2Jvb2tzW3NlbGVjdGVkV29ya2Jvb2tJbmRleF07XG5cdFx0aWYgKHdvcmtib29rKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBzaGVldHMgPSBhd2FpdCB3b3JrYm9vay5ib29rLmdldFdvcmtzaGVldHMoKTtcblxuXHRcdFx0XHRmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cykge1xuXHRcdFx0XHRcdGNvbnN0IG5hbWUgPSBhd2FpdCBzaGVldC5nZXROYW1lKCk7XG5cdFx0XHRcdFx0b3BlbldvcmtzaGVldHMucHVzaCh7XG5cdFx0XHRcdFx0XHRzaGVldCxcblx0XHRcdFx0XHRcdG5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IG9wdGlvbkVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblx0XHRcdFx0b3B0aW9uRW1wdHkuaW5uZXJIVE1MID0gXCItLS0tU2VsZWN0IHdvcmtzaGVldC0tLS1cIjtcblx0XHRcdFx0b3B0aW9uRW1wdHkudmFsdWUgPSBcIlwiO1xuXHRcdFx0XHRvcHRpb25FbXB0eS5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdG9wdGlvbkVtcHR5LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0c2VsZWN0LmFwcGVuZChvcHRpb25FbXB0eSk7XG5cblx0XHRcdFx0Zm9yIChjb25zdCBvcGVuV29ya3NoZWV0IG9mIG9wZW5Xb3Jrc2hlZXRzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblx0XHRcdFx0XHRvcHRpb24uaW5uZXJIVE1MID0gb3BlbldvcmtzaGVldC5uYW1lO1xuXHRcdFx0XHRcdG9wdGlvbi52YWx1ZSA9IG9wZW5Xb3Jrc2hlZXQubmFtZTtcblx0XHRcdFx0XHRzZWxlY3QuYXBwZW5kKG9wdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHRcdHNob3dFcnJvcihlcnIpO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0c2VsZWN0LmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdHJlZnJlc2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VsZWN0V29ya3NoZWV0KG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRjb25zdCBuZXdXb3Jrc2hlZXRJbmRleCA9IG9wZW5Xb3Jrc2hlZXRzLmZpbmRJbmRleCgodykgPT4gdy5uYW1lID09PSBuYW1lKTtcblxuXHRpZiAobmV3V29ya3NoZWV0SW5kZXggIT09IHNlbGVjdGVkV29ya3NoZWV0SW5kZXgpIHtcblx0XHRjb25zdCBvbGRXb3Jrc2hlZXQgPSBvcGVuV29ya3NoZWV0c1tzZWxlY3RlZFdvcmtzaGVldEluZGV4XTtcblx0XHRpZiAob2xkV29ya3NoZWV0KSB7XG5cdFx0XHRhd2FpdCBvbGRXb3Jrc2hlZXQuc2hlZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihoYW5kbGVDZWxsQ2hhbmdlKTtcblx0XHR9XG5cblx0XHRzZWxlY3RlZFdvcmtzaGVldEluZGV4ID0gbmV3V29ya3NoZWV0SW5kZXg7XG5cdFx0aWYgKHNlbGVjdGVkV29ya3NoZWV0SW5kZXggPj0gMCkge1xuXHRcdFx0YXdhaXQgb3BlbldvcmtzaGVldHNbc2VsZWN0ZWRXb3Jrc2hlZXRJbmRleF0uc2hlZXQuYWN0aXZhdGUoKTtcblx0XHRcdGF3YWl0IG9wZW5Xb3Jrc2hlZXRzW3NlbGVjdGVkV29ya3NoZWV0SW5kZXhdLnNoZWV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlQ2VsbENoYW5nZSk7XG5cblx0XHRcdGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIiNyZXN1bHRzLWNvbnRhaW5lclwiKTtcblx0XHRcdHJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI2NlbGwtbG9jYXRpb25cIikuZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjY2VsbC12YWx1ZVwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiNzZXQtdmFsdWVcIikuZGlzYWJsZWQgPSBmYWxzZTtcblx0XHR9XG5cdH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ2VsbENoYW5nZShjZWxsczogQ2VsbFtdKTogUHJvbWlzZTx2b2lkPiB7XG5cdGNvbnN0IGNlbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NlbGwtY2hhbmdlcy1jb250YWluZXJcIik7XG5cdGNlbGxDb250YWluZXIuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoY2VsbHMsIHVuZGVmaW5lZCwgXCIgIFwiKTtcblxuXHRmb3IgKGNvbnN0IGNlbGwgb2YgY2VsbHMpIHtcblx0XHRpZiAoS05PV05fSU5TVFJVTUVOVFMuaW5jbHVkZXMoY2VsbC52YWx1ZSkpIHtcblx0XHRcdGF3YWl0IGJyb2FkY2FzdEluc3RydW1lbnQoY2VsbC52YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldENlbGxWYWx1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKG9wZW5Xb3Jrc2hlZXRzICYmIHNlbGVjdGVkV29ya3NoZWV0SW5kZXggIT09IHVuZGVmaW5lZCkge1xuXHRcdGNvbnN0IGNlbGxMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjY2VsbC1sb2NhdGlvblwiKTtcblx0XHRjb25zdCBjZWxsVmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI2NlbGwtdmFsdWVcIik7XG5cblx0XHRhd2FpdCBvcGVuV29ya3NoZWV0c1tzZWxlY3RlZFdvcmtzaGVldEluZGV4XS5zaGVldC5zZXRDZWxsVmFsdWVzKGNlbGxMb2NhdGlvbi52YWx1ZSwgW1tjZWxsVmFsdWUudmFsdWVdXSk7XG5cdH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYnJvYWRjYXN0SW5zdHJ1bWVudChpbnN0cnVtZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgYnJvYWRjYXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjYnJvYWRjYXN0LWluc3RydW1lbnRcIik7XG5cdGlmICh3aW5kb3cuZmRjMykge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmZGNJbnN0cnVtZW50ID0ge1xuXHRcdFx0XHR0eXBlOiBcImZkYzMuaW5zdHJ1bWVudFwiLFxuXHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdHRpY2tlcjogaW5zdHJ1bWVudFxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjaGFubmVsID0gYXdhaXQgZ2V0Q3VycmVudENoYW5uZWwoKTtcblx0XHRcdGNoYW5uZWwuYnJvYWRjYXN0KGZkY0luc3RydW1lbnQpO1xuXG5cdFx0XHRicm9hZGNhc3RFbGVtZW50LnZhbHVlID0gaW5zdHJ1bWVudDtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGJyb2FkY2FzdEVsZW1lbnQudmFsdWUgPSBlcnIubWVzc2FnZTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0YnJvYWRjYXN0RWxlbWVudC50ZXh0Q29udGVudCA9IFwiTm8gRkQzIENoYW5uZWwgYXZhaWxhYmxlXCI7XG5cdH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==